(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function iT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Yd={exports:{}},xl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv;function gA(){if(lv)return xl;lv=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return xl.Fragment=t,xl.jsx=n,xl.jsxs=n,xl}var uv;function yA(){return uv||(uv=1,Yd.exports=gA()),Yd.exports}var x=yA(),Kd={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv;function _A(){if(cv)return It;cv=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.iterator;function A(D){return D===null||typeof D!="object"?null:(D=S&&D[S]||D["@@iterator"],typeof D=="function"?D:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,F={};function U(D,J,ot){this.props=D,this.context=J,this.refs=F,this.updater=ot||V}U.prototype.isReactComponent={},U.prototype.setState=function(D,J){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,J,"setState")},U.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function tt(){}tt.prototype=U.prototype;function et(D,J,ot){this.props=D,this.context=J,this.refs=F,this.updater=ot||V}var nt=et.prototype=new tt;nt.constructor=et,z(nt,U.prototype),nt.isPureReactComponent=!0;var yt=Array.isArray,ft={H:null,A:null,T:null,S:null,V:null},_t=Object.prototype.hasOwnProperty;function k(D,J,ot,it,pt,Ct){return ot=Ct.ref,{$$typeof:r,type:D,key:J,ref:ot!==void 0?ot:null,props:Ct}}function w(D,J){return k(D.type,J,void 0,void 0,void 0,D.props)}function I(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function M(D){var J={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ot){return J[ot]})}var O=/\/+/g;function P(D,J){return typeof D=="object"&&D!==null&&D.key!=null?M(""+D.key):J.toString(36)}function C(){}function pe(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function(J){D.status==="pending"&&(D.status="fulfilled",D.value=J)},function(J){D.status==="pending"&&(D.status="rejected",D.reason=J)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function ne(D,J,ot,it,pt){var Ct=typeof D;(Ct==="undefined"||Ct==="boolean")&&(D=null);var bt=!1;if(D===null)bt=!0;else switch(Ct){case"bigint":case"string":case"number":bt=!0;break;case"object":switch(D.$$typeof){case r:case t:bt=!0;break;case T:return bt=D._init,ne(bt(D._payload),J,ot,it,pt)}}if(bt)return pt=pt(D),bt=it===""?"."+P(D,0):it,yt(pt)?(ot="",bt!=null&&(ot=bt.replace(O,"$&/")+"/"),ne(pt,J,ot,"",function(Jn){return Jn})):pt!=null&&(I(pt)&&(pt=w(pt,ot+(pt.key==null||D&&D.key===pt.key?"":(""+pt.key).replace(O,"$&/")+"/")+bt)),J.push(pt)),1;bt=0;var Me=it===""?".":it+":";if(yt(D))for(var Jt=0;Jt<D.length;Jt++)it=D[Jt],Ct=Me+P(it,Jt),bt+=ne(it,J,ot,Ct,pt);else if(Jt=A(D),typeof Jt=="function")for(D=Jt.call(D),Jt=0;!(it=D.next()).done;)it=it.value,Ct=Me+P(it,Jt++),bt+=ne(it,J,ot,Ct,pt);else if(Ct==="object"){if(typeof D.then=="function")return ne(pe(D),J,ot,it,pt);throw J=String(D),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return bt}function Q(D,J,ot){if(D==null)return D;var it=[],pt=0;return ne(D,it,"","",function(Ct){return J.call(ot,Ct,pt++)}),it}function at(D){if(D._status===-1){var J=D._result;J=J(),J.then(function(ot){(D._status===0||D._status===-1)&&(D._status=1,D._result=ot)},function(ot){(D._status===0||D._status===-1)&&(D._status=2,D._result=ot)}),D._status===-1&&(D._status=0,D._result=J)}if(D._status===1)return D._result.default;throw D._result}var dt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function kt(){}return It.Children={map:Q,forEach:function(D,J,ot){Q(D,function(){J.apply(this,arguments)},ot)},count:function(D){var J=0;return Q(D,function(){J++}),J},toArray:function(D){return Q(D,function(J){return J})||[]},only:function(D){if(!I(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},It.Component=U,It.Fragment=n,It.Profiler=o,It.PureComponent=et,It.StrictMode=s,It.Suspense=y,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ft,It.__COMPILER_RUNTIME={__proto__:null,c:function(D){return ft.H.useMemoCache(D)}},It.cache=function(D){return function(){return D.apply(null,arguments)}},It.cloneElement=function(D,J,ot){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var it=z({},D.props),pt=D.key,Ct=void 0;if(J!=null)for(bt in J.ref!==void 0&&(Ct=void 0),J.key!==void 0&&(pt=""+J.key),J)!_t.call(J,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&J.ref===void 0||(it[bt]=J[bt]);var bt=arguments.length-2;if(bt===1)it.children=ot;else if(1<bt){for(var Me=Array(bt),Jt=0;Jt<bt;Jt++)Me[Jt]=arguments[Jt+2];it.children=Me}return k(D.type,pt,void 0,void 0,Ct,it)},It.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},It.createElement=function(D,J,ot){var it,pt={},Ct=null;if(J!=null)for(it in J.key!==void 0&&(Ct=""+J.key),J)_t.call(J,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(pt[it]=J[it]);var bt=arguments.length-2;if(bt===1)pt.children=ot;else if(1<bt){for(var Me=Array(bt),Jt=0;Jt<bt;Jt++)Me[Jt]=arguments[Jt+2];pt.children=Me}if(D&&D.defaultProps)for(it in bt=D.defaultProps,bt)pt[it]===void 0&&(pt[it]=bt[it]);return k(D,Ct,void 0,void 0,null,pt)},It.createRef=function(){return{current:null}},It.forwardRef=function(D){return{$$typeof:m,render:D}},It.isValidElement=I,It.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:at}},It.memo=function(D,J){return{$$typeof:g,type:D,compare:J===void 0?null:J}},It.startTransition=function(D){var J=ft.T,ot={};ft.T=ot;try{var it=D(),pt=ft.S;pt!==null&&pt(ot,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(kt,dt)}catch(Ct){dt(Ct)}finally{ft.T=J}},It.unstable_useCacheRefresh=function(){return ft.H.useCacheRefresh()},It.use=function(D){return ft.H.use(D)},It.useActionState=function(D,J,ot){return ft.H.useActionState(D,J,ot)},It.useCallback=function(D,J){return ft.H.useCallback(D,J)},It.useContext=function(D){return ft.H.useContext(D)},It.useDebugValue=function(){},It.useDeferredValue=function(D,J){return ft.H.useDeferredValue(D,J)},It.useEffect=function(D,J,ot){var it=ft.H;if(typeof ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return it.useEffect(D,J)},It.useId=function(){return ft.H.useId()},It.useImperativeHandle=function(D,J,ot){return ft.H.useImperativeHandle(D,J,ot)},It.useInsertionEffect=function(D,J){return ft.H.useInsertionEffect(D,J)},It.useLayoutEffect=function(D,J){return ft.H.useLayoutEffect(D,J)},It.useMemo=function(D,J){return ft.H.useMemo(D,J)},It.useOptimistic=function(D,J){return ft.H.useOptimistic(D,J)},It.useReducer=function(D,J,ot){return ft.H.useReducer(D,J,ot)},It.useRef=function(D){return ft.H.useRef(D)},It.useState=function(D){return ft.H.useState(D)},It.useSyncExternalStore=function(D,J,ot){return ft.H.useSyncExternalStore(D,J,ot)},It.useTransition=function(){return ft.H.useTransition()},It.version="19.1.1",It}var hv;function Km(){return hv||(hv=1,Kd.exports=_A()),Kd.exports}var ct=Km();const to=iT(ct);var Xd={exports:{}},Dl={},Wd={exports:{}},Zd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv;function vA(){return fv||(fv=1,function(r){function t(Q,at){var dt=Q.length;Q.push(at);t:for(;0<dt;){var kt=dt-1>>>1,D=Q[kt];if(0<o(D,at))Q[kt]=at,Q[dt]=D,dt=kt;else break t}}function n(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var at=Q[0],dt=Q.pop();if(dt!==at){Q[0]=dt;t:for(var kt=0,D=Q.length,J=D>>>1;kt<J;){var ot=2*(kt+1)-1,it=Q[ot],pt=ot+1,Ct=Q[pt];if(0>o(it,dt))pt<D&&0>o(Ct,it)?(Q[kt]=Ct,Q[pt]=dt,kt=pt):(Q[kt]=it,Q[ot]=dt,kt=ot);else if(pt<D&&0>o(Ct,dt))Q[kt]=Ct,Q[pt]=dt,kt=pt;else break t}}return at}function o(Q,at){var dt=Q.sortIndex-at.sortIndex;return dt!==0?dt:Q.id-at.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var y=[],g=[],T=1,S=null,A=3,V=!1,z=!1,F=!1,U=!1,tt=typeof setTimeout=="function"?setTimeout:null,et=typeof clearTimeout=="function"?clearTimeout:null,nt=typeof setImmediate<"u"?setImmediate:null;function yt(Q){for(var at=n(g);at!==null;){if(at.callback===null)s(g);else if(at.startTime<=Q)s(g),at.sortIndex=at.expirationTime,t(y,at);else break;at=n(g)}}function ft(Q){if(F=!1,yt(Q),!z)if(n(y)!==null)z=!0,_t||(_t=!0,P());else{var at=n(g);at!==null&&ne(ft,at.startTime-Q)}}var _t=!1,k=-1,w=5,I=-1;function M(){return U?!0:!(r.unstable_now()-I<w)}function O(){if(U=!1,_t){var Q=r.unstable_now();I=Q;var at=!0;try{t:{z=!1,F&&(F=!1,et(k),k=-1),V=!0;var dt=A;try{e:{for(yt(Q),S=n(y);S!==null&&!(S.expirationTime>Q&&M());){var kt=S.callback;if(typeof kt=="function"){S.callback=null,A=S.priorityLevel;var D=kt(S.expirationTime<=Q);if(Q=r.unstable_now(),typeof D=="function"){S.callback=D,yt(Q),at=!0;break e}S===n(y)&&s(y),yt(Q)}else s(y);S=n(y)}if(S!==null)at=!0;else{var J=n(g);J!==null&&ne(ft,J.startTime-Q),at=!1}}break t}finally{S=null,A=dt,V=!1}at=void 0}}finally{at?P():_t=!1}}}var P;if(typeof nt=="function")P=function(){nt(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,pe=C.port2;C.port1.onmessage=O,P=function(){pe.postMessage(null)}}else P=function(){tt(O,0)};function ne(Q,at){k=tt(function(){Q(r.unstable_now())},at)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(Q){switch(A){case 1:case 2:case 3:var at=3;break;default:at=A}var dt=A;A=at;try{return Q()}finally{A=dt}},r.unstable_requestPaint=function(){U=!0},r.unstable_runWithPriority=function(Q,at){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var dt=A;A=Q;try{return at()}finally{A=dt}},r.unstable_scheduleCallback=function(Q,at,dt){var kt=r.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?kt+dt:kt):dt=kt,Q){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=dt+D,Q={id:T++,callback:at,priorityLevel:Q,startTime:dt,expirationTime:D,sortIndex:-1},dt>kt?(Q.sortIndex=dt,t(g,Q),n(y)===null&&Q===n(g)&&(F?(et(k),k=-1):F=!0,ne(ft,dt-kt))):(Q.sortIndex=D,t(y,Q),z||V||(z=!0,_t||(_t=!0,P()))),Q},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(Q){var at=A;return function(){var dt=A;A=at;try{return Q.apply(this,arguments)}finally{A=dt}}}}(Zd)),Zd}var dv;function TA(){return dv||(dv=1,Wd.exports=vA()),Wd.exports}var Jd={exports:{}},We={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv;function EA(){if(mv)return We;mv=1;var r=Km();function t(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,g,T){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:y,containerInfo:g,implementation:T}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return We.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,We.createPortal=function(y,g){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(y,g,null,T)},We.flushSync=function(y){var g=f.T,T=s.p;try{if(f.T=null,s.p=2,y)return y()}finally{f.T=g,s.p=T,s.d.f()}},We.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(y,g))},We.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},We.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var T=g.as,S=m(T,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,V=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;T==="style"?s.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:A,fetchPriority:V}):T==="script"&&s.d.X(y,{crossOrigin:S,integrity:A,fetchPriority:V,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},We.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var T=m(g.as,g.crossOrigin);s.d.M(y,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(y)},We.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var T=g.as,S=m(T,g.crossOrigin);s.d.L(y,T,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},We.preloadModule=function(y,g){if(typeof y=="string")if(g){var T=m(g.as,g.crossOrigin);s.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(y)},We.requestFormReset=function(y){s.d.r(y)},We.unstable_batchedUpdates=function(y,g){return y(g)},We.useFormState=function(y,g,T){return f.H.useFormState(y,g,T)},We.useFormStatus=function(){return f.H.useHostTransitionStatus()},We.version="19.1.1",We}var pv;function bA(){if(pv)return Jd.exports;pv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Jd.exports=EA(),Jd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gv;function SA(){if(gv)return Dl;gv=1;var r=TA(),t=Km(),n=bA();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function f(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(s(188))}function y(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),e;if(d===l)return m(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,l=d;break}if(E===l){v=!0,l=h,a=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===a){v=!0,a=d,l=h;break}if(E===l){v=!0,l=d,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function g(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=g(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),tt=Symbol.for("react.provider"),et=Symbol.for("react.consumer"),nt=Symbol.for("react.context"),yt=Symbol.for("react.forward_ref"),ft=Symbol.for("react.suspense"),_t=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=O&&e[O]||e["@@iterator"],typeof e=="function"?e:null)}var C=Symbol.for("react.client.reference");function pe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===C?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case U:return"Profiler";case F:return"StrictMode";case ft:return"Suspense";case _t:return"SuspenseList";case I:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case V:return"Portal";case nt:return(e.displayName||"Context")+".Provider";case et:return(e._context.displayName||"Context")+".Consumer";case yt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return i=e.displayName||null,i!==null?i:pe(e.type)||"Memo";case w:i=e._payload,e=e._init;try{return pe(e(i))}catch{}}return null}var ne=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt={pending:!1,data:null,method:null,action:null},kt=[],D=-1;function J(e){return{current:e}}function ot(e){0>D||(e.current=kt[D],kt[D]=null,D--)}function it(e,i){D++,kt[D]=e.current,e.current=i}var pt=J(null),Ct=J(null),bt=J(null),Me=J(null);function Jt(e,i){switch(it(bt,i),it(Ct,e),it(pt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?P_(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=P_(i),e=L_(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ot(pt),it(pt,e)}function Jn(){ot(pt),ot(Ct),ot(bt)}function ur(e){e.memoizedState!==null&&it(Me,e);var i=pt.current,a=L_(i,e.type);i!==a&&(it(Ct,e),it(pt,a))}function Ii(e){Ct.current===e&&(ot(pt),ot(Ct)),Me.current===e&&(ot(Me),Al._currentValue=dt)}var ss=Object.prototype.hasOwnProperty,as=r.unstable_scheduleCallback,os=r.unstable_cancelCallback,Eo=r.unstable_shouldYield,cu=r.unstable_requestPaint,Rn=r.unstable_now,Qh=r.unstable_getCurrentPriorityLevel,bo=r.unstable_ImmediatePriority,ra=r.unstable_UserBlockingPriority,ls=r.unstable_NormalPriority,Yh=r.unstable_LowPriority,sa=r.unstable_IdlePriority,So=r.log,hu=r.unstable_setDisableYieldValue,ce=null,Gt=null;function dn(e){if(typeof So=="function"&&hu(e),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(ce,e)}catch{}}var Ke=Math.clz32?Math.clz32:us,fu=Math.log,Kh=Math.LN2;function us(e){return e>>>=0,e===0?32:31-(fu(e)/Kh|0)|0}var cs=256,hs=4194304;function qn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function aa(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var h=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=l&134217727;return E!==0?(l=E&~d,l!==0?h=qn(l):(v&=E,v!==0?h=qn(v):a||(a=E&~e,a!==0&&(h=qn(a))))):(E=l&~d,E!==0?h=qn(E):v!==0?h=qn(v):a||(a=l&~e,a!==0&&(h=qn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function fs(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Ao(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wo(){var e=cs;return cs<<=1,(cs&4194048)===0&&(cs=256),e}function Ro(){var e=hs;return hs<<=1,(hs&62914560)===0&&(hs=4194304),e}function Ci(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function xi(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Io(e,i,a,l,h,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,R=e.expirationTimes,q=e.hiddenUpdates;for(a=v&~a;0<a;){var Y=31-Ke(a),W=1<<Y;E[Y]=0,R[Y]=-1;var H=q[Y];if(H!==null)for(q[Y]=null,Y=0;Y<H.length;Y++){var G=H[Y];G!==null&&(G.lane&=-536870913)}a&=~W}l!==0&&ti(e,l,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~i))}function ti(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-Ke(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function Co(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-Ke(a),h=1<<l;h&i|e[l]&i&&(e[l]|=i),a&=~h}}function cr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function oa(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function hr(){var e=at.p;return e!==0?e:(e=window.event,e===void 0?32:nv(e.type))}function du(e,i){var a=at.p;try{return at.p=e,i()}finally{at.p=a}}var re=Math.random().toString(36).slice(2),Ce="__reactFiber$"+re,Ee="__reactProps$"+re,In="__reactContainer$"+re,xo="__reactEvents$"+re,Xh="__reactListeners$"+re,fr="__reactHandles$"+re,mu="__reactResources$"+re,ds="__reactMarker$"+re;function dr(e){delete e[Ce],delete e[Ee],delete e[xo],delete e[Xh],delete e[fr]}function Di(e){var i=e[Ce];if(i)return i;for(var a=e.parentNode;a;){if(i=a[In]||a[Ce]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=j_(e);e!==null;){if(a=e[Ce])return a;e=j_(e)}return i}e=a,a=e.parentNode}return null}function ei(e){if(e=e[Ce]||e[In]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function ni(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function nn(e){var i=e[mu];return i||(i=e[mu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ge(e){e[ds]=!0}var Do=new Set,la={};function Hn(e,i){Oi(e,i),Oi(e+"Capture",i)}function Oi(e,i){for(la[e]=i,e=0;e<i.length;e++)Do.add(i[e])}var pu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gu={},ms={};function yu(e){return ss.call(ms,e)?!0:ss.call(gu,e)?!1:pu.test(e)?ms[e]=!0:(gu[e]=!0,!1)}function mr(e,i,a){if(yu(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function ii(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function je(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}var ps,_u;function Ni(e){if(ps===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ps=i&&i[1]||"",_u=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ps+e+_u}var ua=!1;function ca(e,i){if(!e||ua)return"";ua=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(G){var H=G}Reflect.construct(e,[],W)}else{try{W.call()}catch(G){H=G}e.call(W.prototype)}}else{try{throw Error()}catch(G){H=G}(W=e())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var R=v.split(`
`),q=E.split(`
`);for(h=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(l===R.length||h===q.length)for(l=R.length-1,h=q.length-1;1<=l&&0<=h&&R[l]!==q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(R[l]!==q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||R[l]!==q[h]){var Y=`
`+R[l].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=l&&0<=h);break}}}finally{ua=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ni(a):""}function Oo(e){switch(e.tag){case 26:case 27:case 5:return Ni(e.type);case 16:return Ni("Lazy");case 13:return Ni("Suspense");case 19:return Ni("SuspenseList");case 0:case 15:return ca(e.type,!1);case 11:return ca(e.type.render,!1);case 1:return ca(e.type,!0);case 31:return Ni("Activity");default:return""}}function ha(e){try{var i="";do i+=Oo(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function rn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function No(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Wh(e){var i=No(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),l=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function fa(e){e._valueTracker||(e._valueTracker=Wh(e))}function ko(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=No(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function gs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Zh=/[\n"\\]/g;function be(e){return e.replace(Zh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function mn(e,i,a,l,h,d,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+rn(i)):e.value!==""+rn(i)&&(e.value=""+rn(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?pr(e,v,rn(i)):a!=null?pr(e,v,rn(a)):l!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+rn(E):e.removeAttribute("name")}function ys(e,i,a,l,h,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+rn(a):"",i=i!=null?""+rn(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=E?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function pr(e,i,a){i==="number"&&gs(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ki(e,i,a,l){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+rn(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Yt(e,i,a){if(i!=null&&(i=""+rn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+rn(a):""}function _s(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(ne(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=rn(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function Cn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var vs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vu(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||vs.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Mo(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&vu(e,h,l)}else for(var d in i)i.hasOwnProperty(d)&&vu(e,d,i[d])}function Vo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function da(e){return tf.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Mi=null;function xn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vi=null,Pi=null;function Po(e){var i=ei(e);if(i&&(e=i.stateNode)){var a=e[Ee]||null;t:switch(e=i.stateNode,i.type){case"input":if(mn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+be(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var h=l[Ee]||null;if(!h)throw Error(s(90));mn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&ko(l)}break t;case"textarea":Yt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&ki(e,!!a.multiple,i,!1)}}}var ri=!1;function Tu(e,i,a){if(ri)return e(i,a);ri=!0;try{var l=e(i);return l}finally{if(ri=!1,(Vi!==null||Pi!==null)&&(dc(),Vi&&(i=Vi,e=Pi,Pi=Vi=null,Po(i),e)))for(i=0;i<e.length;i++)Po(e[i])}}function Ts(e,i){var a=e.stateNode;if(a===null)return null;var l=a[Ee]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dn=!1;if(Fn)try{var Es={};Object.defineProperty(Es,"passive",{get:function(){Dn=!0}}),window.addEventListener("test",Es,Es),window.removeEventListener("test",Es,Es)}catch{Dn=!1}var si=null,gr=null,Li=null;function Lo(){if(Li)return Li;var e,i=gr,a=i.length,l,h="value"in si?si.value:si.textContent,d=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return Li=h.slice(e,1<l?1-l:void 0)}function ai(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function oi(){return!0}function Uo(){return!1}function Ve(e){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?oi:Uo,this.isPropagationStopped=Uo,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),i}var Ht={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ma=Ve(Ht),bs=T({},Ht,{view:0,detail:0}),Eu=Ve(bs),pa,ga,li,Ss=T({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==li&&(li&&e.type==="mousemove"?(pa=e.screenX-li.screenX,ga=e.screenY-li.screenY):ga=pa=0,li=e),pa)},movementY:function(e){return"movementY"in e?e.movementY:ga}}),On=Ve(Ss),bu=T({},Ss,{dataTransfer:0}),ef=Ve(bu),As=T({},bs,{relatedTarget:0}),ya=Ve(As),Bo=T({},Ht,{animationName:0,elapsedTime:0,pseudoElement:0}),_a=Ve(Bo),Su=T({},Ht,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),va=Ve(Su),nf=T({},Ht,{data:0}),zo=Ve(nf),ws={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Au={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jo(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=wu[e])?!!i[e]:!1}function Rs(){return jo}var Ru=T({},bs,{key:function(e){if(e.key){var i=ws[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=ai(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Au[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rs,charCode:function(e){return e.type==="keypress"?ai(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ai(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ta=Ve(Ru),Iu=T({},Ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qo=Ve(Iu),Ui=T({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rs}),Cu=Ve(Ui),xu=T({},Ht,{propertyName:0,elapsedTime:0,pseudoElement:0}),Du=Ve(xu),Ou=T({},Ss,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ea=Ve(Ou),sn=T({},Ht,{newState:0,oldState:0}),Nu=Ve(sn),ku=[9,13,27,32],ui=Fn&&"CompositionEvent"in window,c=null;Fn&&"documentMode"in document&&(c=document.documentMode);var p=Fn&&"TextEvent"in window&&!c,_=Fn&&(!ui||c&&8<c&&11>=c),b=" ",B=!1;function $(e,i){switch(e){case"keyup":return ku.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lt=!1;function xe(e,i){switch(e){case"compositionend":return rt(i);case"keypress":return i.which!==32?null:(B=!0,b);case"textInput":return e=i.data,e===b&&B?null:e;default:return null}}function Ut(e,i){if(Lt)return e==="compositionend"||!ui&&$(e,i)?(e=Lo(),Li=gr=si=null,Lt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Pe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function De(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Pe[e.type]:i==="textarea"}function Bi(e,i,a,l){Vi?Pi?Pi.push(l):Pi=[l]:Vi=l,i=vc(i,"onChange"),0<i.length&&(a=new ma("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var qe=null,ci=null;function Ho(e){O_(e,0)}function Mu(e){var i=ni(e);if(ko(i))return e}function Zp(e,i){if(e==="change")return i}var Jp=!1;if(Fn){var rf;if(Fn){var sf="oninput"in document;if(!sf){var tg=document.createElement("div");tg.setAttribute("oninput","return;"),sf=typeof tg.oninput=="function"}rf=sf}else rf=!1;Jp=rf&&(!document.documentMode||9<document.documentMode)}function eg(){qe&&(qe.detachEvent("onpropertychange",ng),ci=qe=null)}function ng(e){if(e.propertyName==="value"&&Mu(ci)){var i=[];Bi(i,ci,e,xn(e)),Tu(Ho,i)}}function $b(e,i,a){e==="focusin"?(eg(),qe=i,ci=a,qe.attachEvent("onpropertychange",ng)):e==="focusout"&&eg()}function Qb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mu(ci)}function Yb(e,i){if(e==="click")return Mu(i)}function Kb(e,i){if(e==="input"||e==="change")return Mu(i)}function Xb(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var pn=typeof Object.is=="function"?Object.is:Xb;function Fo(e,i){if(pn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!ss.call(i,h)||!pn(e[h],i[h]))return!1}return!0}function ig(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rg(e,i){var a=ig(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=ig(a)}}function sg(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?sg(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function ag(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=gs(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=gs(e.document)}return i}function af(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Wb=Fn&&"documentMode"in document&&11>=document.documentMode,ba=null,of=null,Go=null,lf=!1;function og(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;lf||ba==null||ba!==gs(l)||(l=ba,"selectionStart"in l&&af(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Go&&Fo(Go,l)||(Go=l,l=vc(of,"onSelect"),0<l.length&&(i=new ma("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=ba)))}function Is(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Sa={animationend:Is("Animation","AnimationEnd"),animationiteration:Is("Animation","AnimationIteration"),animationstart:Is("Animation","AnimationStart"),transitionrun:Is("Transition","TransitionRun"),transitionstart:Is("Transition","TransitionStart"),transitioncancel:Is("Transition","TransitionCancel"),transitionend:Is("Transition","TransitionEnd")},uf={},lg={};Fn&&(lg=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function Cs(e){if(uf[e])return uf[e];if(!Sa[e])return e;var i=Sa[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in lg)return uf[e]=i[a];return e}var ug=Cs("animationend"),cg=Cs("animationiteration"),hg=Cs("animationstart"),Zb=Cs("transitionrun"),Jb=Cs("transitionstart"),tS=Cs("transitioncancel"),fg=Cs("transitionend"),dg=new Map,cf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cf.push("scrollEnd");function Gn(e,i){dg.set(e,i),Hn(i,[e])}var mg=new WeakMap;function Nn(e,i){if(typeof e=="object"&&e!==null){var a=mg.get(e);return a!==void 0?a:(i={value:e,source:i,stack:ha(i)},mg.set(e,i),i)}return{value:e,source:i,stack:ha(i)}}var kn=[],Aa=0,hf=0;function Vu(){for(var e=Aa,i=hf=Aa=0;i<e;){var a=kn[i];kn[i++]=null;var l=kn[i];kn[i++]=null;var h=kn[i];kn[i++]=null;var d=kn[i];if(kn[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&pg(a,h,d)}}function Pu(e,i,a,l){kn[Aa++]=e,kn[Aa++]=i,kn[Aa++]=a,kn[Aa++]=l,hf|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function ff(e,i,a,l){return Pu(e,i,a,l),Lu(e)}function wa(e,i){return Pu(e,null,null,i),Lu(e)}function pg(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&i!==null&&(h=31-Ke(a),e=d.hiddenUpdates,l=e[h],l===null?e[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function Lu(e){if(50<gl)throw gl=0,_d=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Ra={};function eS(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(e,i,a,l){return new eS(e,i,a,l)}function df(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zi(e,i){var a=e.alternate;return a===null?(a=gn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function gg(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Uu(e,i,a,l,h,d){var v=0;if(l=e,typeof e=="function")df(e)&&(v=1);else if(typeof e=="string")v=iA(e,a,pt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case I:return e=gn(31,a,i,h),e.elementType=I,e.lanes=d,e;case z:return xs(a.children,h,d,i);case F:v=8,h|=24;break;case U:return e=gn(12,a,i,h|2),e.elementType=U,e.lanes=d,e;case ft:return e=gn(13,a,i,h),e.elementType=ft,e.lanes=d,e;case _t:return e=gn(19,a,i,h),e.elementType=_t,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tt:case nt:v=10;break t;case et:v=9;break t;case yt:v=11;break t;case k:v=14;break t;case w:v=16,l=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return i=gn(v,a,i,h),i.elementType=e,i.type=l,i.lanes=d,i}function xs(e,i,a,l){return e=gn(7,e,l,i),e.lanes=a,e}function mf(e,i,a){return e=gn(6,e,null,i),e.lanes=a,e}function pf(e,i,a){return i=gn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Ia=[],Ca=0,Bu=null,zu=0,Mn=[],Vn=0,Ds=null,ji=1,qi="";function Os(e,i){Ia[Ca++]=zu,Ia[Ca++]=Bu,Bu=e,zu=i}function yg(e,i,a){Mn[Vn++]=ji,Mn[Vn++]=qi,Mn[Vn++]=Ds,Ds=e;var l=ji;e=qi;var h=32-Ke(l)-1;l&=~(1<<h),a+=1;var d=32-Ke(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,ji=1<<32-Ke(i)+h|a<<h|l,qi=d+e}else ji=1<<d|a<<h|l,qi=e}function gf(e){e.return!==null&&(Os(e,1),yg(e,1,0))}function yf(e){for(;e===Bu;)Bu=Ia[--Ca],Ia[Ca]=null,zu=Ia[--Ca],Ia[Ca]=null;for(;e===Ds;)Ds=Mn[--Vn],Mn[Vn]=null,qi=Mn[--Vn],Mn[Vn]=null,ji=Mn[--Vn],Mn[Vn]=null}var an=null,he=null,qt=!1,Ns=null,hi=!1,_f=Error(s(519));function ks(e){var i=Error(s(418,""));throw Yo(Nn(i,e)),_f}function _g(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[Ce]=e,i[Ee]=l,a){case"dialog":Nt("cancel",i),Nt("close",i);break;case"iframe":case"object":case"embed":Nt("load",i);break;case"video":case"audio":for(a=0;a<_l.length;a++)Nt(_l[a],i);break;case"source":Nt("error",i);break;case"img":case"image":case"link":Nt("error",i),Nt("load",i);break;case"details":Nt("toggle",i);break;case"input":Nt("invalid",i),ys(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),fa(i);break;case"select":Nt("invalid",i);break;case"textarea":Nt("invalid",i),_s(i,l.value,l.defaultValue,l.children),fa(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||V_(i.textContent,a)?(l.popover!=null&&(Nt("beforetoggle",i),Nt("toggle",i)),l.onScroll!=null&&Nt("scroll",i),l.onScrollEnd!=null&&Nt("scrollend",i),l.onClick!=null&&(i.onclick=Tc),i=!0):i=!1,i||ks(e)}function vg(e){for(an=e.return;an;)switch(an.tag){case 5:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:an=an.return}}function $o(e){if(e!==an)return!1;if(!qt)return vg(e),qt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Md(e.type,e.memoizedProps)),a=!a),a&&he&&ks(e),vg(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){he=Qn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}he=null}}else i===27?(i=he,Nr(e.type)?(e=Ud,Ud=null,he=e):he=i):he=an?Qn(e.stateNode.nextSibling):null;return!0}function Qo(){he=an=null,qt=!1}function Tg(){var e=Ns;return e!==null&&(cn===null?cn=e:cn.push.apply(cn,e),Ns=null),e}function Yo(e){Ns===null?Ns=[e]:Ns.push(e)}var vf=J(null),Ms=null,Hi=null;function yr(e,i,a){it(vf,i._currentValue),i._currentValue=a}function Fi(e){e._currentValue=vf.current,ot(vf)}function Tf(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function Ef(e,i,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;t:for(;d!==null;){var E=d;d=h;for(var R=0;R<i.length;R++)if(E.context===i[R]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),Tf(d.return,a,e),l||(v=null);break t}d=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Tf(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Ko(e,i,a,l){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;pn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===Me.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Al):e=[Al])}h=h.return}e!==null&&Ef(i,e,a,l),i.flags|=262144}function ju(e){for(e=e.firstContext;e!==null;){if(!pn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Vs(e){Ms=e,Hi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Xe(e){return Eg(Ms,e)}function qu(e,i){return Ms===null&&Vs(e),Eg(e,i)}function Eg(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Hi===null){if(e===null)throw Error(s(308));Hi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Hi=Hi.next=i;return a}var nS=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},iS=r.unstable_scheduleCallback,rS=r.unstable_NormalPriority,Oe={$$typeof:nt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bf(){return{controller:new nS,data:new Map,refCount:0}}function Xo(e){e.refCount--,e.refCount===0&&iS(rS,function(){e.controller.abort()})}var Wo=null,Sf=0,xa=0,Da=null;function sS(e,i){if(Wo===null){var a=Wo=[];Sf=0,xa=wd(),Da={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Sf++,i.then(bg,bg),i}function bg(){if(--Sf===0&&Wo!==null){Da!==null&&(Da.status="fulfilled");var e=Wo;Wo=null,xa=0,Da=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function aS(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Sg=Q.S;Q.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&sS(e,i),Sg!==null&&Sg(e,i)};var Ps=J(null);function Af(){var e=Ps.current;return e!==null?e:te.pooledCache}function Hu(e,i){i===null?it(Ps,Ps.current):it(Ps,i.pool)}function Ag(){var e=Af();return e===null?null:{parent:Oe._currentValue,pool:e}}var Zo=Error(s(460)),wg=Error(s(474)),Fu=Error(s(542)),wf={then:function(){}};function Rg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Gu(){}function Ig(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Gu,Gu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,xg(e),e;default:if(typeof i.status=="string")i.then(Gu,Gu);else{if(e=te,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,xg(e),e}throw Jo=i,Zo}}var Jo=null;function Cg(){if(Jo===null)throw Error(s(459));var e=Jo;return Jo=null,e}function xg(e){if(e===Zo||e===Fu)throw Error(s(483))}var _r=!1;function Rf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function If(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Tr(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,($t&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Lu(e),pg(e,null,a),i}return Pu(e,l,i,a),Lu(e)}function tl(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Co(e,a)}}function Cf(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var xf=!1;function el(){if(xf){var e=Da;if(e!==null)throw e}}function nl(e,i,a,l){xf=!1;var h=e.updateQueue;_r=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var R=E,q=R.next;R.next=null,v===null?d=q:v.next=q,v=R;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,E=Y.lastBaseUpdate,E!==v&&(E===null?Y.firstBaseUpdate=q:E.next=q,Y.lastBaseUpdate=R))}if(d!==null){var W=h.baseState;v=0,Y=q=R=null,E=d;do{var H=E.lane&-536870913,G=H!==E.lane;if(G?(Bt&H)===H:(l&H)===H){H!==0&&H===xa&&(xf=!0),Y!==null&&(Y=Y.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var St=e,vt=E;H=i;var Wt=a;switch(vt.tag){case 1:if(St=vt.payload,typeof St=="function"){W=St.call(Wt,W,H);break t}W=St;break t;case 3:St.flags=St.flags&-65537|128;case 0:if(St=vt.payload,H=typeof St=="function"?St.call(Wt,W,H):St,H==null)break t;W=T({},W,H);break t;case 2:_r=!0}}H=E.callback,H!==null&&(e.flags|=64,G&&(e.flags|=8192),G=h.callbacks,G===null?h.callbacks=[H]:G.push(H))}else G={lane:H,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Y===null?(q=Y=G,R=W):Y=Y.next=G,v|=H;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;G=E,E=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);Y===null&&(R=W),h.baseState=R,h.firstBaseUpdate=q,h.lastBaseUpdate=Y,d===null&&(h.shared.lanes=0),Cr|=v,e.lanes=v,e.memoizedState=W}}function Dg(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Og(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Dg(a[e],i)}var Oa=J(null),$u=J(0);function Ng(e,i){e=Wi,it($u,e),it(Oa,i),Wi=e|i.baseLanes}function Df(){it($u,Wi),it(Oa,Oa.current)}function Of(){Wi=$u.current,ot(Oa),ot($u)}var Er=0,xt=null,Kt=null,Se=null,Qu=!1,Na=!1,Ls=!1,Yu=0,il=0,ka=null,oS=0;function ye(){throw Error(s(321))}function Nf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!pn(e[a],i[a]))return!1;return!0}function kf(e,i,a,l,h,d){return Er=d,xt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=e===null||e.memoizedState===null?py:gy,Ls=!1,d=a(l,h),Ls=!1,Na&&(d=Mg(i,a,l,h)),kg(e),d}function kg(e){Q.H=tc;var i=Kt!==null&&Kt.next!==null;if(Er=0,Se=Kt=xt=null,Qu=!1,il=0,ka=null,i)throw Error(s(300));e===null||Le||(e=e.dependencies,e!==null&&ju(e)&&(Le=!0))}function Mg(e,i,a,l){xt=e;var h=0;do{if(Na&&(ka=null),il=0,Na=!1,25<=h)throw Error(s(301));if(h+=1,Se=Kt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Q.H=mS,d=i(a,l)}while(Na);return d}function lS(){var e=Q.H,i=e.useState()[0];return i=typeof i.then=="function"?rl(i):i,e=e.useState()[0],(Kt!==null?Kt.memoizedState:null)!==e&&(xt.flags|=1024),i}function Mf(){var e=Yu!==0;return Yu=0,e}function Vf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function Pf(e){if(Qu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Qu=!1}Er=0,Se=Kt=xt=null,Na=!1,il=Yu=0,ka=null}function ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?xt.memoizedState=Se=e:Se=Se.next=e,Se}function Ae(){if(Kt===null){var e=xt.alternate;e=e!==null?e.memoizedState:null}else e=Kt.next;var i=Se===null?xt.memoizedState:Se.next;if(i!==null)Se=i,Kt=e;else{if(e===null)throw xt.alternate===null?Error(s(467)):Error(s(310));Kt=e,e={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},Se===null?xt.memoizedState=Se=e:Se=Se.next=e}return Se}function Lf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rl(e){var i=il;return il+=1,ka===null&&(ka=[]),e=Ig(ka,e,i),i=xt,(Se===null?i.memoizedState:Se.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?py:gy),e}function Ku(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return rl(e);if(e.$$typeof===nt)return Xe(e)}throw Error(s(438,String(e)))}function Uf(e){var i=null,a=xt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=xt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Lf(),xt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=M;return i.index++,a}function Gi(e,i){return typeof i=="function"?i(e):i}function Xu(e){var i=Ae();return Bf(i,Kt,e)}function Bf(e,i,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=e.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var E=v=null,R=null,q=i,Y=!1;do{var W=q.lane&-536870913;if(W!==q.lane?(Bt&W)===W:(Er&W)===W){var H=q.revertLane;if(H===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),W===xa&&(Y=!0);else if((Er&H)===H){q=q.next,H===xa&&(Y=!0);continue}else W={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},R===null?(E=R=W,v=d):R=R.next=W,xt.lanes|=H,Cr|=H;W=q.action,Ls&&a(d,W),d=q.hasEagerState?q.eagerState:a(d,W)}else H={lane:W,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},R===null?(E=R=H,v=d):R=R.next=H,xt.lanes|=W,Cr|=W;q=q.next}while(q!==null&&q!==i);if(R===null?v=d:R.next=E,!pn(d,e.memoizedState)&&(Le=!0,Y&&(a=Da,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=R,l.lastRenderedState=d}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function zf(e){var i=Ae(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=e(d,v.action),v=v.next;while(v!==h);pn(d,i.memoizedState)||(Le=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Vg(e,i,a){var l=xt,h=Ae(),d=qt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!pn((Kt||h).memoizedState,a);v&&(h.memoizedState=a,Le=!0),h=h.queue;var E=Ug.bind(null,l,h,e);if(sl(2048,8,E,[e]),h.getSnapshot!==i||v||Se!==null&&Se.memoizedState.tag&1){if(l.flags|=2048,Ma(9,Wu(),Lg.bind(null,l,h,a,i),null),te===null)throw Error(s(349));d||(Er&124)!==0||Pg(l,i,a)}return a}function Pg(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=xt.updateQueue,i===null?(i=Lf(),xt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function Lg(e,i,a,l){i.value=a,i.getSnapshot=l,Bg(i)&&zg(e)}function Ug(e,i,a){return a(function(){Bg(i)&&zg(e)})}function Bg(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!pn(e,a)}catch{return!0}}function zg(e){var i=wa(e,2);i!==null&&En(i,e,2)}function jf(e){var i=ln();if(typeof e=="function"){var a=e;if(e=a(),Ls){dn(!0);try{a()}finally{dn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:e},i}function jg(e,i,a,l){return e.baseState=a,Bf(e,Kt,typeof l=="function"?l:Gi)}function uS(e,i,a,l,h){if(Ju(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};Q.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,qg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function qg(e,i){var a=i.action,l=i.payload,h=e.state;if(i.isTransition){var d=Q.T,v={};Q.T=v;try{var E=a(h,l),R=Q.S;R!==null&&R(v,E),Hg(e,i,E)}catch(q){qf(e,i,q)}finally{Q.T=d}}else try{d=a(h,l),Hg(e,i,d)}catch(q){qf(e,i,q)}}function Hg(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Fg(e,i,l)},function(l){return qf(e,i,l)}):Fg(e,i,a)}function Fg(e,i,a){i.status="fulfilled",i.value=a,Gg(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,qg(e,a)))}function qf(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Gg(i),i=i.next;while(i!==l)}e.action=null}function Gg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function $g(e,i){return i}function Qg(e,i){if(qt){var a=te.formState;if(a!==null){t:{var l=xt;if(qt){if(he){e:{for(var h=he,d=hi;h.nodeType!==8;){if(!d){h=null;break e}if(h=Qn(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){he=Qn(h.nextSibling),l=h.data==="F!";break t}}ks(l)}l=!1}l&&(i=a[0])}}return a=ln(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$g,lastRenderedState:i},a.queue=l,a=fy.bind(null,xt,l),l.dispatch=a,l=jf(!1),d=Qf.bind(null,xt,!1,l.queue),l=ln(),h={state:i,dispatch:null,action:e,pending:null},l.queue=h,a=uS.bind(null,xt,h,d,a),h.dispatch=a,l.memoizedState=e,[i,a,!1]}function Yg(e){var i=Ae();return Kg(i,Kt,e)}function Kg(e,i,a){if(i=Bf(e,i,$g)[0],e=Xu(Gi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=rl(i)}catch(v){throw v===Zo?Fu:v}else l=i;i=Ae();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(xt.flags|=2048,Ma(9,Wu(),cS.bind(null,h,a),null)),[l,d,e]}function cS(e,i){e.action=i}function Xg(e){var i=Ae(),a=Kt;if(a!==null)return Kg(i,a,e);Ae(),i=i.memoizedState,a=Ae();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function Ma(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=xt.updateQueue,i===null&&(i=Lf(),xt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function Wu(){return{destroy:void 0,resource:void 0}}function Wg(){return Ae().memoizedState}function Zu(e,i,a,l){var h=ln();l=l===void 0?null:l,xt.flags|=e,h.memoizedState=Ma(1|i,Wu(),a,l)}function sl(e,i,a,l){var h=Ae();l=l===void 0?null:l;var d=h.memoizedState.inst;Kt!==null&&l!==null&&Nf(l,Kt.memoizedState.deps)?h.memoizedState=Ma(i,d,a,l):(xt.flags|=e,h.memoizedState=Ma(1|i,d,a,l))}function Zg(e,i){Zu(8390656,8,e,i)}function Jg(e,i){sl(2048,8,e,i)}function ty(e,i){return sl(4,2,e,i)}function ey(e,i){return sl(4,4,e,i)}function ny(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function iy(e,i,a){a=a!=null?a.concat([e]):null,sl(4,4,ny.bind(null,i,e),a)}function Hf(){}function ry(e,i){var a=Ae();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Nf(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function sy(e,i){var a=Ae();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Nf(i,l[1]))return l[0];if(l=e(),Ls){dn(!0);try{e()}finally{dn(!1)}}return a.memoizedState=[l,i],l}function Ff(e,i,a){return a===void 0||(Er&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=l_(),xt.lanes|=e,Cr|=e,a)}function ay(e,i,a,l){return pn(a,i)?a:Oa.current!==null?(e=Ff(e,a,l),pn(e,i)||(Le=!0),e):(Er&42)===0?(Le=!0,e.memoizedState=a):(e=l_(),xt.lanes|=e,Cr|=e,i)}function oy(e,i,a,l,h){var d=at.p;at.p=d!==0&&8>d?d:8;var v=Q.T,E={};Q.T=E,Qf(e,!1,i,a);try{var R=h(),q=Q.S;if(q!==null&&q(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var Y=aS(R,l);al(e,i,Y,Tn(e))}else al(e,i,l,Tn(e))}catch(W){al(e,i,{then:function(){},status:"rejected",reason:W},Tn())}finally{at.p=d,Q.T=v}}function hS(){}function Gf(e,i,a,l){if(e.tag!==5)throw Error(s(476));var h=ly(e).queue;oy(e,h,i,dt,a===null?hS:function(){return uy(e),a(l)})}function ly(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:dt,baseState:dt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:dt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function uy(e){var i=ly(e).next.queue;al(e,i,{},Tn())}function $f(){return Xe(Al)}function cy(){return Ae().memoizedState}function hy(){return Ae().memoizedState}function fS(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=Tn();e=vr(a);var l=Tr(i,e,a);l!==null&&(En(l,i,a),tl(l,i,a)),i={cache:bf()},e.payload=i;return}i=i.return}}function dS(e,i,a){var l=Tn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ju(e)?dy(i,a):(a=ff(e,i,a,l),a!==null&&(En(a,e,l),my(a,i,l)))}function fy(e,i,a){var l=Tn();al(e,i,a,l)}function al(e,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ju(e))dy(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,E=d(v,a);if(h.hasEagerState=!0,h.eagerState=E,pn(E,v))return Pu(e,i,h,0),te===null&&Vu(),!1}catch{}finally{}if(a=ff(e,i,h,l),a!==null)return En(a,e,l),my(a,i,l),!0}return!1}function Qf(e,i,a,l){if(l={lane:2,revertLane:wd(),action:l,hasEagerState:!1,eagerState:null,next:null},Ju(e)){if(i)throw Error(s(479))}else i=ff(e,a,l,2),i!==null&&En(i,e,2)}function Ju(e){var i=e.alternate;return e===xt||i!==null&&i===xt}function dy(e,i){Na=Qu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function my(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Co(e,a)}}var tc={readContext:Xe,use:Ku,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye},py={readContext:Xe,use:Ku,useCallback:function(e,i){return ln().memoizedState=[e,i===void 0?null:i],e},useContext:Xe,useEffect:Zg,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Zu(4194308,4,ny.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Zu(4194308,4,e,i)},useInsertionEffect:function(e,i){Zu(4,2,e,i)},useMemo:function(e,i){var a=ln();i=i===void 0?null:i;var l=e();if(Ls){dn(!0);try{e()}finally{dn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=ln();if(a!==void 0){var h=a(i);if(Ls){dn(!0);try{a(i)}finally{dn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=dS.bind(null,xt,e),[l.memoizedState,e]},useRef:function(e){var i=ln();return e={current:e},i.memoizedState=e},useState:function(e){e=jf(e);var i=e.queue,a=fy.bind(null,xt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Hf,useDeferredValue:function(e,i){var a=ln();return Ff(a,e,i)},useTransition:function(){var e=jf(!1);return e=oy.bind(null,xt,e.queue,!0,!1),ln().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=xt,h=ln();if(qt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),te===null)throw Error(s(349));(Bt&124)!==0||Pg(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Zg(Ug.bind(null,l,d,e),[e]),l.flags|=2048,Ma(9,Wu(),Lg.bind(null,l,d,a,i),null),a},useId:function(){var e=ln(),i=te.identifierPrefix;if(qt){var a=qi,l=ji;a=(l&~(1<<32-Ke(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=Yu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=oS++,i="«"+i+"r"+a.toString(32)+"»";return e.memoizedState=i},useHostTransitionStatus:$f,useFormState:Qg,useActionState:Qg,useOptimistic:function(e){var i=ln();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Qf.bind(null,xt,!0,a),a.dispatch=i,[e,i]},useMemoCache:Uf,useCacheRefresh:function(){return ln().memoizedState=fS.bind(null,xt)}},gy={readContext:Xe,use:Ku,useCallback:ry,useContext:Xe,useEffect:Jg,useImperativeHandle:iy,useInsertionEffect:ty,useLayoutEffect:ey,useMemo:sy,useReducer:Xu,useRef:Wg,useState:function(){return Xu(Gi)},useDebugValue:Hf,useDeferredValue:function(e,i){var a=Ae();return ay(a,Kt.memoizedState,e,i)},useTransition:function(){var e=Xu(Gi)[0],i=Ae().memoizedState;return[typeof e=="boolean"?e:rl(e),i]},useSyncExternalStore:Vg,useId:cy,useHostTransitionStatus:$f,useFormState:Yg,useActionState:Yg,useOptimistic:function(e,i){var a=Ae();return jg(a,Kt,e,i)},useMemoCache:Uf,useCacheRefresh:hy},mS={readContext:Xe,use:Ku,useCallback:ry,useContext:Xe,useEffect:Jg,useImperativeHandle:iy,useInsertionEffect:ty,useLayoutEffect:ey,useMemo:sy,useReducer:zf,useRef:Wg,useState:function(){return zf(Gi)},useDebugValue:Hf,useDeferredValue:function(e,i){var a=Ae();return Kt===null?Ff(a,e,i):ay(a,Kt.memoizedState,e,i)},useTransition:function(){var e=zf(Gi)[0],i=Ae().memoizedState;return[typeof e=="boolean"?e:rl(e),i]},useSyncExternalStore:Vg,useId:cy,useHostTransitionStatus:$f,useFormState:Xg,useActionState:Xg,useOptimistic:function(e,i){var a=Ae();return Kt!==null?jg(a,Kt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Uf,useCacheRefresh:hy},Va=null,ol=0;function ec(e){var i=ol;return ol+=1,Va===null&&(Va=[]),Ig(Va,e,i)}function ll(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function nc(e,i){throw i.$$typeof===S?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function yy(e){var i=e._init;return i(e._payload)}function _y(e){function i(L,N){if(e){var j=L.deletions;j===null?(L.deletions=[N],L.flags|=16):j.push(N)}}function a(L,N){if(!e)return null;for(;N!==null;)i(L,N),N=N.sibling;return null}function l(L){for(var N=new Map;L!==null;)L.key!==null?N.set(L.key,L):N.set(L.index,L),L=L.sibling;return N}function h(L,N){return L=zi(L,N),L.index=0,L.sibling=null,L}function d(L,N,j){return L.index=j,e?(j=L.alternate,j!==null?(j=j.index,j<N?(L.flags|=67108866,N):j):(L.flags|=67108866,N)):(L.flags|=1048576,N)}function v(L){return e&&L.alternate===null&&(L.flags|=67108866),L}function E(L,N,j,K){return N===null||N.tag!==6?(N=mf(j,L.mode,K),N.return=L,N):(N=h(N,j),N.return=L,N)}function R(L,N,j,K){var ht=j.type;return ht===z?Y(L,N,j.props.children,K,j.key):N!==null&&(N.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===w&&yy(ht)===N.type)?(N=h(N,j.props),ll(N,j),N.return=L,N):(N=Uu(j.type,j.key,j.props,null,L.mode,K),ll(N,j),N.return=L,N)}function q(L,N,j,K){return N===null||N.tag!==4||N.stateNode.containerInfo!==j.containerInfo||N.stateNode.implementation!==j.implementation?(N=pf(j,L.mode,K),N.return=L,N):(N=h(N,j.children||[]),N.return=L,N)}function Y(L,N,j,K,ht){return N===null||N.tag!==7?(N=xs(j,L.mode,K,ht),N.return=L,N):(N=h(N,j),N.return=L,N)}function W(L,N,j){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=mf(""+N,L.mode,j),N.return=L,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case A:return j=Uu(N.type,N.key,N.props,null,L.mode,j),ll(j,N),j.return=L,j;case V:return N=pf(N,L.mode,j),N.return=L,N;case w:var K=N._init;return N=K(N._payload),W(L,N,j)}if(ne(N)||P(N))return N=xs(N,L.mode,j,null),N.return=L,N;if(typeof N.then=="function")return W(L,ec(N),j);if(N.$$typeof===nt)return W(L,qu(L,N),j);nc(L,N)}return null}function H(L,N,j,K){var ht=N!==null?N.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ht!==null?null:E(L,N,""+j,K);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case A:return j.key===ht?R(L,N,j,K):null;case V:return j.key===ht?q(L,N,j,K):null;case w:return ht=j._init,j=ht(j._payload),H(L,N,j,K)}if(ne(j)||P(j))return ht!==null?null:Y(L,N,j,K,null);if(typeof j.then=="function")return H(L,N,ec(j),K);if(j.$$typeof===nt)return H(L,N,qu(L,j),K);nc(L,j)}return null}function G(L,N,j,K,ht){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return L=L.get(j)||null,E(N,L,""+K,ht);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case A:return L=L.get(K.key===null?j:K.key)||null,R(N,L,K,ht);case V:return L=L.get(K.key===null?j:K.key)||null,q(N,L,K,ht);case w:var Dt=K._init;return K=Dt(K._payload),G(L,N,j,K,ht)}if(ne(K)||P(K))return L=L.get(j)||null,Y(N,L,K,ht,null);if(typeof K.then=="function")return G(L,N,j,ec(K),ht);if(K.$$typeof===nt)return G(L,N,j,qu(N,K),ht);nc(N,K)}return null}function St(L,N,j,K){for(var ht=null,Dt=null,mt=N,Tt=N=0,Be=null;mt!==null&&Tt<j.length;Tt++){mt.index>Tt?(Be=mt,mt=null):Be=mt.sibling;var jt=H(L,mt,j[Tt],K);if(jt===null){mt===null&&(mt=Be);break}e&&mt&&jt.alternate===null&&i(L,mt),N=d(jt,N,Tt),Dt===null?ht=jt:Dt.sibling=jt,Dt=jt,mt=Be}if(Tt===j.length)return a(L,mt),qt&&Os(L,Tt),ht;if(mt===null){for(;Tt<j.length;Tt++)mt=W(L,j[Tt],K),mt!==null&&(N=d(mt,N,Tt),Dt===null?ht=mt:Dt.sibling=mt,Dt=mt);return qt&&Os(L,Tt),ht}for(mt=l(mt);Tt<j.length;Tt++)Be=G(mt,L,Tt,j[Tt],K),Be!==null&&(e&&Be.alternate!==null&&mt.delete(Be.key===null?Tt:Be.key),N=d(Be,N,Tt),Dt===null?ht=Be:Dt.sibling=Be,Dt=Be);return e&&mt.forEach(function(Lr){return i(L,Lr)}),qt&&Os(L,Tt),ht}function vt(L,N,j,K){if(j==null)throw Error(s(151));for(var ht=null,Dt=null,mt=N,Tt=N=0,Be=null,jt=j.next();mt!==null&&!jt.done;Tt++,jt=j.next()){mt.index>Tt?(Be=mt,mt=null):Be=mt.sibling;var Lr=H(L,mt,jt.value,K);if(Lr===null){mt===null&&(mt=Be);break}e&&mt&&Lr.alternate===null&&i(L,mt),N=d(Lr,N,Tt),Dt===null?ht=Lr:Dt.sibling=Lr,Dt=Lr,mt=Be}if(jt.done)return a(L,mt),qt&&Os(L,Tt),ht;if(mt===null){for(;!jt.done;Tt++,jt=j.next())jt=W(L,jt.value,K),jt!==null&&(N=d(jt,N,Tt),Dt===null?ht=jt:Dt.sibling=jt,Dt=jt);return qt&&Os(L,Tt),ht}for(mt=l(mt);!jt.done;Tt++,jt=j.next())jt=G(mt,L,Tt,jt.value,K),jt!==null&&(e&&jt.alternate!==null&&mt.delete(jt.key===null?Tt:jt.key),N=d(jt,N,Tt),Dt===null?ht=jt:Dt.sibling=jt,Dt=jt);return e&&mt.forEach(function(pA){return i(L,pA)}),qt&&Os(L,Tt),ht}function Wt(L,N,j,K){if(typeof j=="object"&&j!==null&&j.type===z&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case A:t:{for(var ht=j.key;N!==null;){if(N.key===ht){if(ht=j.type,ht===z){if(N.tag===7){a(L,N.sibling),K=h(N,j.props.children),K.return=L,L=K;break t}}else if(N.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===w&&yy(ht)===N.type){a(L,N.sibling),K=h(N,j.props),ll(K,j),K.return=L,L=K;break t}a(L,N);break}else i(L,N);N=N.sibling}j.type===z?(K=xs(j.props.children,L.mode,K,j.key),K.return=L,L=K):(K=Uu(j.type,j.key,j.props,null,L.mode,K),ll(K,j),K.return=L,L=K)}return v(L);case V:t:{for(ht=j.key;N!==null;){if(N.key===ht)if(N.tag===4&&N.stateNode.containerInfo===j.containerInfo&&N.stateNode.implementation===j.implementation){a(L,N.sibling),K=h(N,j.children||[]),K.return=L,L=K;break t}else{a(L,N);break}else i(L,N);N=N.sibling}K=pf(j,L.mode,K),K.return=L,L=K}return v(L);case w:return ht=j._init,j=ht(j._payload),Wt(L,N,j,K)}if(ne(j))return St(L,N,j,K);if(P(j)){if(ht=P(j),typeof ht!="function")throw Error(s(150));return j=ht.call(j),vt(L,N,j,K)}if(typeof j.then=="function")return Wt(L,N,ec(j),K);if(j.$$typeof===nt)return Wt(L,N,qu(L,j),K);nc(L,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,N!==null&&N.tag===6?(a(L,N.sibling),K=h(N,j),K.return=L,L=K):(a(L,N),K=mf(j,L.mode,K),K.return=L,L=K),v(L)):a(L,N)}return function(L,N,j,K){try{ol=0;var ht=Wt(L,N,j,K);return Va=null,ht}catch(mt){if(mt===Zo||mt===Fu)throw mt;var Dt=gn(29,mt,null,L.mode);return Dt.lanes=K,Dt.return=L,Dt}finally{}}}var Pa=_y(!0),vy=_y(!1),Pn=J(null),fi=null;function br(e){var i=e.alternate;it(Ne,Ne.current&1),it(Pn,e),fi===null&&(i===null||Oa.current!==null||i.memoizedState!==null)&&(fi=e)}function Ty(e){if(e.tag===22){if(it(Ne,Ne.current),it(Pn,e),fi===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(fi=e)}}else Sr()}function Sr(){it(Ne,Ne.current),it(Pn,Pn.current)}function $i(e){ot(Pn),fi===e&&(fi=null),ot(Ne)}var Ne=J(0);function ic(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Ld(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Yf(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Kf={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=Tn(),h=vr(l);h.payload=i,a!=null&&(h.callback=a),i=Tr(e,h,l),i!==null&&(En(i,e,l),tl(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=Tn(),h=vr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Tr(e,h,l),i!==null&&(En(i,e,l),tl(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=Tn(),l=vr(a);l.tag=2,i!=null&&(l.callback=i),i=Tr(e,l,a),i!==null&&(En(i,e,a),tl(i,e,a))}};function Ey(e,i,a,l,h,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!Fo(a,l)||!Fo(h,d):!0}function by(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&Kf.enqueueReplaceState(i,i.state,null)}function Us(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var rc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Sy(e){rc(e)}function Ay(e){console.error(e)}function wy(e){rc(e)}function sc(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Ry(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Xf(e,i,a){return a=vr(a),a.tag=3,a.payload={element:null},a.callback=function(){sc(e,i)},a}function Iy(e){return e=vr(e),e.tag=3,e}function Cy(e,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;e.payload=function(){return h(d)},e.callback=function(){Ry(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Ry(i,a,l),typeof h!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function pS(e,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ko(i,a,h,!0),a=Pn.current,a!==null){switch(a.tag){case 13:return fi===null?Td():a.alternate===null&&fe===0&&(fe=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===wf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),bd(e,l,h)),!1;case 22:return a.flags|=65536,l===wf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),bd(e,l,h)),!1}throw Error(s(435,a.tag))}return bd(e,l,h),Td(),!1}if(qt)return i=Pn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==_f&&(e=Error(s(422),{cause:l}),Yo(Nn(e,a)))):(l!==_f&&(i=Error(s(423),{cause:l}),Yo(Nn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=Nn(l,a),h=Xf(e.stateNode,l,h),Cf(e,h),fe!==4&&(fe=2)),!1;var d=Error(s(520),{cause:l});if(d=Nn(d,a),pl===null?pl=[d]:pl.push(d),fe!==4&&(fe=2),i===null)return!0;l=Nn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Xf(a.stateNode,l,e),Cf(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(xr===null||!xr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Iy(h),Cy(h,e,a,l),Cf(a,h),!1}a=a.return}while(a!==null);return!1}var xy=Error(s(461)),Le=!1;function He(e,i,a,l){i.child=e===null?vy(i,null,a,l):Pa(i,e.child,a,l)}function Dy(e,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var E in l)E!=="ref"&&(v[E]=l[E])}else v=l;return Vs(i),l=kf(e,i,a,v,d,h),E=Mf(),e!==null&&!Le?(Vf(e,i,h),Qi(e,i,h)):(qt&&E&&gf(i),i.flags|=1,He(e,i,l,h),i.child)}function Oy(e,i,a,l,h){if(e===null){var d=a.type;return typeof d=="function"&&!df(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Ny(e,i,d,l,h)):(e=Uu(a.type,null,l,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!rd(e,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Fo,a(v,l)&&e.ref===i.ref)return Qi(e,i,h)}return i.flags|=1,e=zi(d,l),e.ref=i.ref,e.return=i,i.child=e}function Ny(e,i,a,l,h){if(e!==null){var d=e.memoizedProps;if(Fo(d,l)&&e.ref===i.ref)if(Le=!1,i.pendingProps=l=d,rd(e,h))(e.flags&131072)!==0&&(Le=!0);else return i.lanes=e.lanes,Qi(e,i,h)}return Wf(e,i,a,l,h)}function ky(e,i,a){var l=i.pendingProps,h=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,e!==null){for(h=i.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return My(e,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Hu(i,d!==null?d.cachePool:null),d!==null?Ng(i,d):Df(),Ty(i);else return i.lanes=i.childLanes=536870912,My(e,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Hu(i,d.cachePool),Ng(i,d),Sr(),i.memoizedState=null):(e!==null&&Hu(i,null),Df(),Sr());return He(e,i,h,a),i.child}function My(e,i,a,l){var h=Af();return h=h===null?null:{parent:Oe._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Hu(i,null),Df(),Ty(i),e!==null&&Ko(e,i,l,!0),null}function ac(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Wf(e,i,a,l,h){return Vs(i),a=kf(e,i,a,l,void 0,h),l=Mf(),e!==null&&!Le?(Vf(e,i,h),Qi(e,i,h)):(qt&&l&&gf(i),i.flags|=1,He(e,i,a,h),i.child)}function Vy(e,i,a,l,h,d){return Vs(i),i.updateQueue=null,a=Mg(i,l,a,h),kg(e),l=Mf(),e!==null&&!Le?(Vf(e,i,d),Qi(e,i,d)):(qt&&l&&gf(i),i.flags|=1,He(e,i,a,d),i.child)}function Py(e,i,a,l,h){if(Vs(i),i.stateNode===null){var d=Ra,v=a.contextType;typeof v=="object"&&v!==null&&(d=Xe(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Kf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Rf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Xe(v):Ra,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Yf(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Kf.enqueueReplaceState(d,d.state,null),nl(i,l,d,h),el(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){d=i.stateNode;var E=i.memoizedProps,R=Us(a,E);d.props=R;var q=d.context,Y=a.contextType;v=Ra,typeof Y=="object"&&Y!==null&&(v=Xe(Y));var W=a.getDerivedStateFromProps;Y=typeof W=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||q!==v)&&by(i,d,l,v),_r=!1;var H=i.memoizedState;d.state=H,nl(i,l,d,h),el(),q=i.memoizedState,E||H!==q||_r?(typeof W=="function"&&(Yf(i,a,W,l),q=i.memoizedState),(R=_r||Ey(i,a,R,l,H,q,v))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=q),d.props=l,d.state=q,d.context=v,l=R):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,If(e,i),v=i.memoizedProps,Y=Us(a,v),d.props=Y,W=i.pendingProps,H=d.context,q=a.contextType,R=Ra,typeof q=="object"&&q!==null&&(R=Xe(q)),E=a.getDerivedStateFromProps,(q=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==W||H!==R)&&by(i,d,l,R),_r=!1,H=i.memoizedState,d.state=H,nl(i,l,d,h),el();var G=i.memoizedState;v!==W||H!==G||_r||e!==null&&e.dependencies!==null&&ju(e.dependencies)?(typeof E=="function"&&(Yf(i,a,E,l),G=i.memoizedState),(Y=_r||Ey(i,a,Y,l,H,G,R)||e!==null&&e.dependencies!==null&&ju(e.dependencies))?(q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,G,R),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,G,R)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=G),d.props=l,d.state=G,d.context=R,l=Y):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=1024),l=!1)}return d=l,ac(e,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&l?(i.child=Pa(i,e.child,null,h),i.child=Pa(i,null,a,h)):He(e,i,a,h),i.memoizedState=d.state,e=i.child):e=Qi(e,i,h),e}function Ly(e,i,a,l){return Qo(),i.flags|=256,He(e,i,a,l),i.child}var Zf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jf(e){return{baseLanes:e,cachePool:Ag()}}function td(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Ln),e}function Uy(e,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Ne.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(qt){if(h?br(i):Sr(),qt){var E=he,R;if(R=E){t:{for(R=E,E=hi;R.nodeType!==8;){if(!E){E=null;break t}if(R=Qn(R.nextSibling),R===null){E=null;break t}}E=R}E!==null?(i.memoizedState={dehydrated:E,treeContext:Ds!==null?{id:ji,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},R=gn(18,null,null,0),R.stateNode=E,R.return=i,i.child=R,an=i,he=null,R=!0):R=!1}R||ks(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Ld(E)?i.lanes=32:i.lanes=536870912,null;$i(i)}return E=l.children,l=l.fallback,h?(Sr(),h=i.mode,E=oc({mode:"hidden",children:E},h),l=xs(l,h,a,null),E.return=i,l.return=i,E.sibling=l,i.child=E,h=i.child,h.memoizedState=Jf(a),h.childLanes=td(e,v,a),i.memoizedState=Zf,l):(br(i),ed(i,E))}if(R=e.memoizedState,R!==null&&(E=R.dehydrated,E!==null)){if(d)i.flags&256?(br(i),i.flags&=-257,i=nd(e,i,a)):i.memoizedState!==null?(Sr(),i.child=e.child,i.flags|=128,i=null):(Sr(),h=l.fallback,E=i.mode,l=oc({mode:"visible",children:l.children},E),h=xs(h,E,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Pa(i,e.child,null,a),l=i.child,l.memoizedState=Jf(a),l.childLanes=td(e,v,a),i.memoizedState=Zf,i=h);else if(br(i),Ld(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var q=v.dgst;v=q,l=Error(s(419)),l.stack="",l.digest=v,Yo({value:l,source:null,stack:null}),i=nd(e,i,a)}else if(Le||Ko(e,i,a,!1),v=(a&e.childLanes)!==0,Le||v){if(v=te,v!==null&&(l=a&-a,l=(l&42)!==0?1:cr(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==R.retryLane))throw R.retryLane=l,wa(e,l),En(v,e,l),xy;E.data==="$?"||Td(),i=nd(e,i,a)}else E.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=R.treeContext,he=Qn(E.nextSibling),an=i,qt=!0,Ns=null,hi=!1,e!==null&&(Mn[Vn++]=ji,Mn[Vn++]=qi,Mn[Vn++]=Ds,ji=e.id,qi=e.overflow,Ds=i),i=ed(i,l.children),i.flags|=4096);return i}return h?(Sr(),h=l.fallback,E=i.mode,R=e.child,q=R.sibling,l=zi(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,q!==null?h=zi(q,h):(h=xs(h,E,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,E=e.child.memoizedState,E===null?E=Jf(a):(R=E.cachePool,R!==null?(q=Oe._currentValue,R=R.parent!==q?{parent:q,pool:q}:R):R=Ag(),E={baseLanes:E.baseLanes|a,cachePool:R}),h.memoizedState=E,h.childLanes=td(e,v,a),i.memoizedState=Zf,l):(br(i),a=e.child,e=a.sibling,a=zi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function ed(e,i){return i=oc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function oc(e,i){return e=gn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function nd(e,i,a){return Pa(i,e.child,null,a),e=ed(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function By(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),Tf(e.return,i,a)}function id(e,i,a,l,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function zy(e,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(He(e,i,l.children,a),l=Ne.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&By(e,a,i);else if(e.tag===19)By(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(it(Ne,l),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&ic(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),id(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&ic(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}id(i,!0,a,null,d);break;case"together":id(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Qi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Cr|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Ko(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=zi(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=zi(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function rd(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&ju(e)))}function gS(e,i,a){switch(i.tag){case 3:Jt(i,i.stateNode.containerInfo),yr(i,Oe,e.memoizedState.cache),Qo();break;case 27:case 5:ur(i);break;case 4:Jt(i,i.stateNode.containerInfo);break;case 10:yr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(br(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Uy(e,i,a):(br(i),e=Qi(e,i,a),e!==null?e.sibling:null);br(i);break;case 19:var h=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ko(e,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return zy(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),it(Ne,Ne.current),l)break;return null;case 22:case 23:return i.lanes=0,ky(e,i,a);case 24:yr(i,Oe,e.memoizedState.cache)}return Qi(e,i,a)}function jy(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Le=!0;else{if(!rd(e,a)&&(i.flags&128)===0)return Le=!1,gS(e,i,a);Le=(e.flags&131072)!==0}else Le=!1,qt&&(i.flags&1048576)!==0&&yg(i,zu,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")df(l)?(e=Us(l,e),i.tag=1,i=Py(null,i,l,e,a)):(i.tag=0,i=Wf(null,i,l,e,a));else{if(l!=null){if(h=l.$$typeof,h===yt){i.tag=11,i=Dy(null,i,l,e,a);break t}else if(h===k){i.tag=14,i=Oy(null,i,l,e,a);break t}}throw i=pe(l)||l,Error(s(306,i,""))}}return i;case 0:return Wf(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Us(l,i.pendingProps),Py(e,i,l,h,a);case 3:t:{if(Jt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,If(e,i),nl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,yr(i,Oe,l),l!==d.cache&&Ef(i,[Oe],a,!0),el(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Ly(e,i,l,a);break t}else if(l!==h){h=Nn(Error(s(424)),i),Yo(h),i=Ly(e,i,l,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(he=Qn(e.firstChild),an=i,qt=!0,Ns=null,hi=!0,a=vy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Qo(),l===h){i=Qi(e,i,a);break t}He(e,i,l,a)}i=i.child}return i;case 26:return ac(e,i),e===null?(a=G_(i.type,null,i.pendingProps,null))?i.memoizedState=a:qt||(a=i.type,e=i.pendingProps,l=Ec(bt.current).createElement(a),l[Ce]=i,l[Ee]=e,Ge(l,a,e),ge(l),i.stateNode=l):i.memoizedState=G_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return ur(i),e===null&&qt&&(l=i.stateNode=q_(i.type,i.pendingProps,bt.current),an=i,hi=!0,h=he,Nr(i.type)?(Ud=h,he=Qn(l.firstChild)):he=h),He(e,i,i.pendingProps.children,a),ac(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&qt&&((h=l=he)&&(l=FS(l,i.type,i.pendingProps,hi),l!==null?(i.stateNode=l,an=i,he=Qn(l.firstChild),hi=!1,h=!0):h=!1),h||ks(i)),ur(i),h=i.type,d=i.pendingProps,v=e!==null?e.memoizedProps:null,l=d.children,Md(h,d)?l=null:v!==null&&Md(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=kf(e,i,lS,null,null,a),Al._currentValue=h),ac(e,i),He(e,i,l,a),i.child;case 6:return e===null&&qt&&((e=a=he)&&(a=GS(a,i.pendingProps,hi),a!==null?(i.stateNode=a,an=i,he=null,e=!0):e=!1),e||ks(i)),null;case 13:return Uy(e,i,a);case 4:return Jt(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=Pa(i,null,l,a):He(e,i,l,a),i.child;case 11:return Dy(e,i,i.type,i.pendingProps,a);case 7:return He(e,i,i.pendingProps,a),i.child;case 8:return He(e,i,i.pendingProps.children,a),i.child;case 12:return He(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,yr(i,i.type,l.value),He(e,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Vs(i),h=Xe(h),l=l(h),i.flags|=1,He(e,i,l,a),i.child;case 14:return Oy(e,i,i.type,i.pendingProps,a);case 15:return Ny(e,i,i.type,i.pendingProps,a);case 19:return zy(e,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},e===null?(a=oc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=zi(e.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return ky(e,i,a);case 24:return Vs(i),l=Xe(Oe),e===null?(h=Af(),h===null&&(h=te,d=bf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Rf(i),yr(i,Oe,h)):((e.lanes&a)!==0&&(If(e,i),nl(i,null,null,a),el()),h=e.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),yr(i,Oe,l)):(l=d.cache,yr(i,Oe,l),l!==h.cache&&Ef(i,[Oe],a,!0))),He(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Yi(e){e.flags|=4}function qy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!X_(i)){if(i=Pn.current,i!==null&&((Bt&4194048)===Bt?fi!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||i!==fi))throw Jo=wf,wg;e.flags|=8192}}function lc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Ro():536870912,e.lanes|=i,za|=i)}function ul(e,i){if(!qt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function oe(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function yS(e,i,a){var l=i.pendingProps;switch(yf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oe(i),null;case 1:return oe(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Fi(Oe),Jn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&($o(i)?Yi(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Tg())),oe(i),null;case 26:return a=i.memoizedState,e===null?(Yi(i),a!==null?(oe(i),qy(i,a)):(oe(i),i.flags&=-16777217)):a?a!==e.memoizedState?(Yi(i),oe(i),qy(i,a)):(oe(i),i.flags&=-16777217):(e.memoizedProps!==l&&Yi(i),oe(i),i.flags&=-16777217),null;case 27:Ii(i),a=bt.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Yi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return oe(i),null}e=pt.current,$o(i)?_g(i):(e=q_(h,l,a),i.stateNode=e,Yi(i))}return oe(i),null;case 5:if(Ii(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Yi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return oe(i),null}if(e=pt.current,$o(i))_g(i);else{switch(h=Ec(bt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}e[Ce]=i,e[Ee]=l;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(Ge(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Yi(i)}}return oe(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&Yi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(e=bt.current,$o(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,h=an,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[Ce]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||V_(e.nodeValue,a)),e||ks(i)}else e=Ec(e).createTextNode(l),e[Ce]=i,i.stateNode=e}return oe(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=$o(i),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ce]=i}else Qo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;oe(i),h=!1}else h=Tg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?($i(i),i):($i(i),null)}if($i(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),lc(i,i.updateQueue),oe(i),null;case 4:return Jn(),e===null&&xd(i.stateNode.containerInfo),oe(i),null;case 10:return Fi(i.type),oe(i),null;case 19:if(ot(Ne),h=i.memoizedState,h===null)return oe(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)ul(h,!1);else{if(fe!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=ic(e),d!==null){for(i.flags|=128,ul(h,!1),e=d.updateQueue,i.updateQueue=e,lc(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)gg(a,e),a=a.sibling;return it(Ne,Ne.current&1|2),i.child}e=e.sibling}h.tail!==null&&Rn()>hc&&(i.flags|=128,l=!0,ul(h,!1),i.lanes=4194304)}else{if(!l)if(e=ic(d),e!==null){if(i.flags|=128,l=!0,e=e.updateQueue,i.updateQueue=e,lc(i,e),ul(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!qt)return oe(i),null}else 2*Rn()-h.renderingStartTime>hc&&a!==536870912&&(i.flags|=128,l=!0,ul(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(e=h.last,e!==null?e.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Rn(),i.sibling=null,e=Ne.current,it(Ne,l?e&1|2:e&1),i):(oe(i),null);case 22:case 23:return $i(i),Of(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(oe(i),i.subtreeFlags&6&&(i.flags|=8192)):oe(i),a=i.updateQueue,a!==null&&lc(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&ot(Ps),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Fi(Oe),oe(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function _S(e,i){switch(yf(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Fi(Oe),Jn(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Ii(i),null;case 13:if($i(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Qo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return ot(Ne),null;case 4:return Jn(),null;case 10:return Fi(i.type),null;case 22:case 23:return $i(i),Of(),e!==null&&ot(Ps),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Fi(Oe),null;case 25:return null;default:return null}}function Hy(e,i){switch(yf(i),i.tag){case 3:Fi(Oe),Jn();break;case 26:case 27:case 5:Ii(i);break;case 4:Jn();break;case 13:$i(i);break;case 19:ot(Ne);break;case 10:Fi(i.type);break;case 22:case 23:$i(i),Of(),e!==null&&ot(Ps);break;case 24:Fi(Oe)}}function cl(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(E){Zt(i,i.return,E)}}function Ar(e,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&e)===e){var v=l.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var R=a,q=E;try{q()}catch(Y){Zt(h,R,Y)}}}l=l.next}while(l!==d)}}catch(Y){Zt(i,i.return,Y)}}function Fy(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Og(i,a)}catch(l){Zt(e,e.return,l)}}}function Gy(e,i,a){a.props=Us(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Zt(e,i,l)}}function hl(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(h){Zt(e,i,h)}}function di(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Zt(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Zt(e,i,h)}else a.current=null}function $y(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Zt(e,e.return,h)}}function sd(e,i,a){try{var l=e.stateNode;BS(l,e.type,a,i),l[Ee]=i}catch(h){Zt(e,e.return,h)}}function Qy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Nr(e.type)||e.tag===4}function ad(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Qy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Nr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function od(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Tc));else if(l!==4&&(l===27&&Nr(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(od(e,i,a),e=e.sibling;e!==null;)od(e,i,a),e=e.sibling}function uc(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&Nr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(uc(e,i,a),e=e.sibling;e!==null;)uc(e,i,a),e=e.sibling}function Yy(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Ge(i,l,a),i[Ce]=e,i[Ee]=a}catch(d){Zt(e,e.return,d)}}var Ki=!1,_e=!1,ld=!1,Ky=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function vS(e,i){if(e=e.containerInfo,Nd=Ic,e=ag(e),af(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,E=-1,R=-1,q=0,Y=0,W=e,H=null;e:for(;;){for(var G;W!==a||h!==0&&W.nodeType!==3||(E=v+h),W!==d||l!==0&&W.nodeType!==3||(R=v+l),W.nodeType===3&&(v+=W.nodeValue.length),(G=W.firstChild)!==null;)H=W,W=G;for(;;){if(W===e)break e;if(H===a&&++q===h&&(E=v),H===d&&++Y===l&&(R=v),(G=W.nextSibling)!==null)break;W=H,H=W.parentNode}W=G}a=E===-1||R===-1?null:{start:E,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(kd={focusedElem:e,selectionRange:a},Ic=!1,Ue=i;Ue!==null;)if(i=Ue,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Ue=e;else for(;Ue!==null;){switch(i=Ue,d=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var St=Us(a.type,h,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(St,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(vt){Zt(a,a.return,vt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)Pd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Pd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Ue=e;break}Ue=i.return}}function Xy(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:wr(e,a),l&4&&cl(5,a);break;case 1:if(wr(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){Zt(a,a.return,v)}else{var h=Us(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Zt(a,a.return,v)}}l&64&&Fy(a),l&512&&hl(a,a.return);break;case 3:if(wr(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Og(e,i)}catch(v){Zt(a,a.return,v)}}break;case 27:i===null&&l&4&&Yy(a);case 26:case 5:wr(e,a),i===null&&l&4&&$y(a),l&512&&hl(a,a.return);break;case 12:wr(e,a);break;case 13:wr(e,a),l&4&&Jy(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=CS.bind(null,a),$S(e,a))));break;case 22:if(l=a.memoizedState!==null||Ki,!l){i=i!==null&&i.memoizedState!==null||_e,h=Ki;var d=_e;Ki=l,(_e=i)&&!d?Rr(e,a,(a.subtreeFlags&8772)!==0):wr(e,a),Ki=h,_e=d}break;case 30:break;default:wr(e,a)}}function Wy(e){var i=e.alternate;i!==null&&(e.alternate=null,Wy(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&dr(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var se=null,un=!1;function Xi(e,i,a){for(a=a.child;a!==null;)Zy(e,i,a),a=a.sibling}function Zy(e,i,a){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ce,a)}catch{}switch(a.tag){case 26:_e||di(a,i),Xi(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:_e||di(a,i);var l=se,h=un;Nr(a.type)&&(se=a.stateNode,un=!1),Xi(e,i,a),Tl(a.stateNode),se=l,un=h;break;case 5:_e||di(a,i);case 6:if(l=se,h=un,se=null,Xi(e,i,a),se=l,un=h,se!==null)if(un)try{(se.nodeType===9?se.body:se.nodeName==="HTML"?se.ownerDocument.body:se).removeChild(a.stateNode)}catch(d){Zt(a,i,d)}else try{se.removeChild(a.stateNode)}catch(d){Zt(a,i,d)}break;case 18:se!==null&&(un?(e=se,z_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Cl(e)):z_(se,a.stateNode));break;case 4:l=se,h=un,se=a.stateNode.containerInfo,un=!0,Xi(e,i,a),se=l,un=h;break;case 0:case 11:case 14:case 15:_e||Ar(2,a,i),_e||Ar(4,a,i),Xi(e,i,a);break;case 1:_e||(di(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Gy(a,i,l)),Xi(e,i,a);break;case 21:Xi(e,i,a);break;case 22:_e=(l=_e)||a.memoizedState!==null,Xi(e,i,a),_e=l;break;default:Xi(e,i,a)}}function Jy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Cl(e)}catch(a){Zt(i,i.return,a)}}function TS(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Ky),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Ky),i;default:throw Error(s(435,e.tag))}}function ud(e,i){var a=TS(e);i.forEach(function(l){var h=xS.bind(null,e,l);a.has(l)||(a.add(l),l.then(h,h))})}function yn(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=e,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Nr(E.type)){se=E.stateNode,un=!1;break t}break;case 5:se=E.stateNode,un=!1;break t;case 3:case 4:se=E.stateNode.containerInfo,un=!0;break t}E=E.return}if(se===null)throw Error(s(160));Zy(d,v,h),se=null,un=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)t_(i,e),i=i.sibling}var $n=null;function t_(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:yn(i,e),_n(e),l&4&&(Ar(3,e,e.return),cl(3,e),Ar(5,e,e.return));break;case 1:yn(i,e),_n(e),l&512&&(_e||a===null||di(a,a.return)),l&64&&Ki&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=$n;if(yn(i,e),_n(e),l&512&&(_e||a===null||di(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ds]||d[Ce]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Ge(d,l,a),d[Ce]=e,ge(d),l=d;break t;case"link":var v=Y_("link","href",h).get(l+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}d=h.createElement(l),Ge(d,l,a),h.head.appendChild(d);break;case"meta":if(v=Y_("meta","content",h).get(l+(a.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}d=h.createElement(l),Ge(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[Ce]=e,ge(d),l=d}e.stateNode=l}else K_(h,e.type,e.stateNode);else e.stateNode=Q_(h,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?K_(h,e.type,e.stateNode):Q_(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&sd(e,e.memoizedProps,a.memoizedProps)}break;case 27:yn(i,e),_n(e),l&512&&(_e||a===null||di(a,a.return)),a!==null&&l&4&&sd(e,e.memoizedProps,a.memoizedProps);break;case 5:if(yn(i,e),_n(e),l&512&&(_e||a===null||di(a,a.return)),e.flags&32){h=e.stateNode;try{Cn(h,"")}catch(G){Zt(e,e.return,G)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,sd(e,h,a!==null?a.memoizedProps:h)),l&1024&&(ld=!0);break;case 6:if(yn(i,e),_n(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(G){Zt(e,e.return,G)}}break;case 3:if(Ac=null,h=$n,$n=bc(i.containerInfo),yn(i,e),$n=h,_n(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Cl(i.containerInfo)}catch(G){Zt(e,e.return,G)}ld&&(ld=!1,e_(e));break;case 4:l=$n,$n=bc(e.stateNode.containerInfo),yn(i,e),_n(e),$n=l;break;case 12:yn(i,e),_n(e);break;case 13:yn(i,e),_n(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(pd=Rn()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ud(e,l)));break;case 22:h=e.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,q=Ki,Y=_e;if(Ki=q||h,_e=Y||R,yn(i,e),_e=Y,Ki=q,_n(e),l&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||R||Ki||_e||Bs(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){R=a=i;try{if(d=R.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=R.stateNode;var W=R.memoizedProps.style,H=W!=null&&W.hasOwnProperty("display")?W.display:null;E.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(G){Zt(R,R.return,G)}}}else if(i.tag===6){if(a===null){R=i;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(G){Zt(R,R.return,G)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ud(e,a))));break;case 19:yn(i,e),_n(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ud(e,l)));break;case 30:break;case 21:break;default:yn(i,e),_n(e)}}function _n(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(Qy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=ad(e);uc(e,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(Cn(v,""),a.flags&=-33);var E=ad(e);uc(e,E,v);break;case 3:case 4:var R=a.stateNode.containerInfo,q=ad(e);od(e,q,R);break;default:throw Error(s(161))}}catch(Y){Zt(e,e.return,Y)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function e_(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;e_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function wr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Xy(e,i.alternate,i),i=i.sibling}function Bs(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Ar(4,i,i.return),Bs(i);break;case 1:di(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Gy(i,i.return,a),Bs(i);break;case 27:Tl(i.stateNode);case 26:case 5:di(i,i.return),Bs(i);break;case 22:i.memoizedState===null&&Bs(i);break;case 30:Bs(i);break;default:Bs(i)}e=e.sibling}}function Rr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=e,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Rr(h,d,a),cl(4,d);break;case 1:if(Rr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){Zt(l,l.return,q)}if(l=d,h=l.updateQueue,h!==null){var E=l.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)Dg(R[h],E)}catch(q){Zt(l,l.return,q)}}a&&v&64&&Fy(d),hl(d,d.return);break;case 27:Yy(d);case 26:case 5:Rr(h,d,a),a&&l===null&&v&4&&$y(d),hl(d,d.return);break;case 12:Rr(h,d,a);break;case 13:Rr(h,d,a),a&&v&4&&Jy(h,d);break;case 22:d.memoizedState===null&&Rr(h,d,a),hl(d,d.return);break;case 30:break;default:Rr(h,d,a)}i=i.sibling}}function cd(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Xo(a))}function hd(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Xo(e))}function mi(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)n_(e,i,a,l),i=i.sibling}function n_(e,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:mi(e,i,a,l),h&2048&&cl(9,i);break;case 1:mi(e,i,a,l);break;case 3:mi(e,i,a,l),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Xo(e)));break;case 12:if(h&2048){mi(e,i,a,l),e=i.stateNode;try{var d=i.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Zt(i,i.return,R)}}else mi(e,i,a,l);break;case 13:mi(e,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?mi(e,i,a,l):fl(e,i):d._visibility&2?mi(e,i,a,l):(d._visibility|=2,La(e,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&cd(v,i);break;case 24:mi(e,i,a,l),h&2048&&hd(i.alternate,i);break;default:mi(e,i,a,l)}}function La(e,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=e,v=i,E=a,R=l,q=v.flags;switch(v.tag){case 0:case 11:case 15:La(d,v,E,R,h),cl(8,v);break;case 23:break;case 22:var Y=v.stateNode;v.memoizedState!==null?Y._visibility&2?La(d,v,E,R,h):fl(d,v):(Y._visibility|=2,La(d,v,E,R,h)),h&&q&2048&&cd(v.alternate,v);break;case 24:La(d,v,E,R,h),h&&q&2048&&hd(v.alternate,v);break;default:La(d,v,E,R,h)}i=i.sibling}}function fl(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,h=l.flags;switch(l.tag){case 22:fl(a,l),h&2048&&cd(l.alternate,l);break;case 24:fl(a,l),h&2048&&hd(l.alternate,l);break;default:fl(a,l)}i=i.sibling}}var dl=8192;function Ua(e){if(e.subtreeFlags&dl)for(e=e.child;e!==null;)i_(e),e=e.sibling}function i_(e){switch(e.tag){case 26:Ua(e),e.flags&dl&&e.memoizedState!==null&&sA($n,e.memoizedState,e.memoizedProps);break;case 5:Ua(e);break;case 3:case 4:var i=$n;$n=bc(e.stateNode.containerInfo),Ua(e),$n=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=dl,dl=16777216,Ua(e),dl=i):Ua(e));break;default:Ua(e)}}function r_(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function ml(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ue=l,a_(l,e)}r_(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)s_(e),e=e.sibling}function s_(e){switch(e.tag){case 0:case 11:case 15:ml(e),e.flags&2048&&Ar(9,e,e.return);break;case 3:ml(e);break;case 12:ml(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,cc(e)):ml(e);break;default:ml(e)}}function cc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ue=l,a_(l,e)}r_(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Ar(8,i,i.return),cc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,cc(i));break;default:cc(i)}e=e.sibling}}function a_(e,i){for(;Ue!==null;){var a=Ue;switch(a.tag){case 0:case 11:case 15:Ar(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Xo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ue=l;else t:for(a=e;Ue!==null;){l=Ue;var h=l.sibling,d=l.return;if(Wy(l),l===a){Ue=null;break t}if(h!==null){h.return=d,Ue=h;break t}Ue=d}}}var ES={getCacheForType:function(e){var i=Xe(Oe),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},bS=typeof WeakMap=="function"?WeakMap:Map,$t=0,te=null,Ot=null,Bt=0,Qt=0,vn=null,Ir=!1,Ba=!1,fd=!1,Wi=0,fe=0,Cr=0,zs=0,dd=0,Ln=0,za=0,pl=null,cn=null,md=!1,pd=0,hc=1/0,fc=null,xr=null,Fe=0,Dr=null,ja=null,qa=0,gd=0,yd=null,o_=null,gl=0,_d=null;function Tn(){if(($t&2)!==0&&Bt!==0)return Bt&-Bt;if(Q.T!==null){var e=xa;return e!==0?e:wd()}return hr()}function l_(){Ln===0&&(Ln=(Bt&536870912)===0||qt?wo():536870912);var e=Pn.current;return e!==null&&(e.flags|=32),Ln}function En(e,i,a){(e===te&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)&&(Ha(e,0),Or(e,Bt,Ln,!1)),xi(e,a),(($t&2)===0||e!==te)&&(e===te&&(($t&2)===0&&(zs|=a),fe===4&&Or(e,Bt,Ln,!1)),pi(e))}function u_(e,i,a){if(($t&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&e.expiredLanes)===0||fs(e,i),h=l?wS(e,i):Ed(e,i,!0),d=l;do{if(h===0){Ba&&!l&&Or(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!SS(a)){h=Ed(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=e;h=pl;var R=E.current.memoizedState.isDehydrated;if(R&&(Ha(E,v).flags|=256),v=Ed(E,v,!1),v!==2){if(fd&&!R){E.errorRecoveryDisabledLanes|=d,zs|=d,h=4;break t}d=cn,cn=h,d!==null&&(cn===null?cn=d:cn.push.apply(cn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Ha(e,0),Or(e,i,0,!0);break}t:{switch(l=e,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Or(l,i,Ln,!Ir);break t;case 2:cn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=pd+300-Rn(),10<h)){if(Or(l,i,Ln,!Ir),aa(l,0,!0)!==0)break t;l.timeoutHandle=U_(c_.bind(null,l,a,cn,fc,md,i,Ln,zs,za,Ir,d,2,-0,0),h);break t}c_(l,a,cn,fc,md,i,Ln,zs,za,Ir,d,0,-0,0)}}break}while(!0);pi(e)}function c_(e,i,a,l,h,d,v,E,R,q,Y,W,H,G){if(e.timeoutHandle=-1,W=i.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(Sl={stylesheets:null,count:0,unsuspend:rA},i_(i),W=aA(),W!==null)){e.cancelPendingCommit=W(y_.bind(null,e,i,d,a,l,h,v,E,R,Y,1,H,G)),Or(e,d,v,!q);return}y_(e,i,d,a,l,h,v,E,R)}function SS(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!pn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Or(e,i,a,l){i&=~dd,i&=~zs,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var h=i;0<h;){var d=31-Ke(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&ti(e,a,i)}function dc(){return($t&6)===0?(yl(0),!1):!0}function vd(){if(Ot!==null){if(Qt===0)var e=Ot.return;else e=Ot,Hi=Ms=null,Pf(e),Va=null,ol=0,e=Ot;for(;e!==null;)Hy(e.alternate,e),e=e.return;Ot=null}}function Ha(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,jS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),vd(),te=e,Ot=a=zi(e.current,null),Bt=i,Qt=0,vn=null,Ir=!1,Ba=fs(e,i),fd=!1,za=Ln=dd=zs=Cr=fe=0,cn=pl=null,md=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var h=31-Ke(l),d=1<<h;i|=e[h],l&=~d}return Wi=i,Vu(),a}function h_(e,i){xt=null,Q.H=tc,i===Zo||i===Fu?(i=Cg(),Qt=3):i===wg?(i=Cg(),Qt=4):Qt=i===xy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vn=i,Ot===null&&(fe=1,sc(e,Nn(i,e.current)))}function f_(){var e=Q.H;return Q.H=tc,e===null?tc:e}function d_(){var e=Q.A;return Q.A=ES,e}function Td(){fe=4,Ir||(Bt&4194048)!==Bt&&Pn.current!==null||(Ba=!0),(Cr&134217727)===0&&(zs&134217727)===0||te===null||Or(te,Bt,Ln,!1)}function Ed(e,i,a){var l=$t;$t|=2;var h=f_(),d=d_();(te!==e||Bt!==i)&&(fc=null,Ha(e,i)),i=!1;var v=fe;t:do try{if(Qt!==0&&Ot!==null){var E=Ot,R=vn;switch(Qt){case 8:vd(),v=6;break t;case 3:case 2:case 9:case 6:Pn.current===null&&(i=!0);var q=Qt;if(Qt=0,vn=null,Fa(e,E,R,q),a&&Ba){v=0;break t}break;default:q=Qt,Qt=0,vn=null,Fa(e,E,R,q)}}AS(),v=fe;break}catch(Y){h_(e,Y)}while(!0);return i&&e.shellSuspendCounter++,Hi=Ms=null,$t=l,Q.H=h,Q.A=d,Ot===null&&(te=null,Bt=0,Vu()),v}function AS(){for(;Ot!==null;)m_(Ot)}function wS(e,i){var a=$t;$t|=2;var l=f_(),h=d_();te!==e||Bt!==i?(fc=null,hc=Rn()+500,Ha(e,i)):Ba=fs(e,i);t:do try{if(Qt!==0&&Ot!==null){i=Ot;var d=vn;e:switch(Qt){case 1:Qt=0,vn=null,Fa(e,i,d,1);break;case 2:case 9:if(Rg(d)){Qt=0,vn=null,p_(i);break}i=function(){Qt!==2&&Qt!==9||te!==e||(Qt=7),pi(e)},d.then(i,i);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:Rg(d)?(Qt=0,vn=null,p_(i)):(Qt=0,vn=null,Fa(e,i,d,7));break;case 5:var v=null;switch(Ot.tag){case 26:v=Ot.memoizedState;case 5:case 27:var E=Ot;if(!v||X_(v)){Qt=0,vn=null;var R=E.sibling;if(R!==null)Ot=R;else{var q=E.return;q!==null?(Ot=q,mc(q)):Ot=null}break e}}Qt=0,vn=null,Fa(e,i,d,5);break;case 6:Qt=0,vn=null,Fa(e,i,d,6);break;case 8:vd(),fe=6;break t;default:throw Error(s(462))}}RS();break}catch(Y){h_(e,Y)}while(!0);return Hi=Ms=null,Q.H=l,Q.A=h,$t=a,Ot!==null?0:(te=null,Bt=0,Vu(),fe)}function RS(){for(;Ot!==null&&!Eo();)m_(Ot)}function m_(e){var i=jy(e.alternate,e,Wi);e.memoizedProps=e.pendingProps,i===null?mc(e):Ot=i}function p_(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Vy(a,i,i.pendingProps,i.type,void 0,Bt);break;case 11:i=Vy(a,i,i.pendingProps,i.type.render,i.ref,Bt);break;case 5:Pf(i);default:Hy(a,i),i=Ot=gg(i,Wi),i=jy(a,i,Wi)}e.memoizedProps=e.pendingProps,i===null?mc(e):Ot=i}function Fa(e,i,a,l){Hi=Ms=null,Pf(i),Va=null,ol=0;var h=i.return;try{if(pS(e,h,i,a,Bt)){fe=1,sc(e,Nn(a,e.current)),Ot=null;return}}catch(d){if(h!==null)throw Ot=h,d;fe=1,sc(e,Nn(a,e.current)),Ot=null;return}i.flags&32768?(qt||l===1?e=!0:Ba||(Bt&536870912)!==0?e=!1:(Ir=e=!0,(l===2||l===9||l===3||l===6)&&(l=Pn.current,l!==null&&l.tag===13&&(l.flags|=16384))),g_(i,e)):mc(i)}function mc(e){var i=e;do{if((i.flags&32768)!==0){g_(i,Ir);return}e=i.return;var a=yS(i.alternate,i,Wi);if(a!==null){Ot=a;return}if(i=i.sibling,i!==null){Ot=i;return}Ot=i=e}while(i!==null);fe===0&&(fe=5)}function g_(e,i){do{var a=_S(e.alternate,e);if(a!==null){a.flags&=32767,Ot=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Ot=e;return}Ot=e=a}while(e!==null);fe=6,Ot=null}function y_(e,i,a,l,h,d,v,E,R){e.cancelPendingCommit=null;do pc();while(Fe!==0);if(($t&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=hf,Io(e,a,d,v,E,R),e===te&&(Ot=te=null,Bt=0),ja=i,Dr=e,qa=a,gd=d,yd=h,o_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,DS(ls,function(){return b_(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=at.p,at.p=2,v=$t,$t|=4;try{vS(e,i,a)}finally{$t=v,at.p=h,Q.T=l}}Fe=1,__(),v_(),T_()}}function __(){if(Fe===1){Fe=0;var e=Dr,i=ja,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=at.p;at.p=2;var h=$t;$t|=4;try{t_(i,e);var d=kd,v=ag(e.containerInfo),E=d.focusedElem,R=d.selectionRange;if(v!==E&&E&&E.ownerDocument&&sg(E.ownerDocument.documentElement,E)){if(R!==null&&af(E)){var q=R.start,Y=R.end;if(Y===void 0&&(Y=q),"selectionStart"in E)E.selectionStart=q,E.selectionEnd=Math.min(Y,E.value.length);else{var W=E.ownerDocument||document,H=W&&W.defaultView||window;if(H.getSelection){var G=H.getSelection(),St=E.textContent.length,vt=Math.min(R.start,St),Wt=R.end===void 0?vt:Math.min(R.end,St);!G.extend&&vt>Wt&&(v=Wt,Wt=vt,vt=v);var L=rg(E,vt),N=rg(E,Wt);if(L&&N&&(G.rangeCount!==1||G.anchorNode!==L.node||G.anchorOffset!==L.offset||G.focusNode!==N.node||G.focusOffset!==N.offset)){var j=W.createRange();j.setStart(L.node,L.offset),G.removeAllRanges(),vt>Wt?(G.addRange(j),G.extend(N.node,N.offset)):(j.setEnd(N.node,N.offset),G.addRange(j))}}}}for(W=[],G=E;G=G.parentNode;)G.nodeType===1&&W.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<W.length;E++){var K=W[E];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}Ic=!!Nd,kd=Nd=null}finally{$t=h,at.p=l,Q.T=a}}e.current=i,Fe=2}}function v_(){if(Fe===2){Fe=0;var e=Dr,i=ja,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=at.p;at.p=2;var h=$t;$t|=4;try{Xy(e,i.alternate,i)}finally{$t=h,at.p=l,Q.T=a}}Fe=3}}function T_(){if(Fe===4||Fe===3){Fe=0,cu();var e=Dr,i=ja,a=qa,l=o_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Fe=5:(Fe=0,ja=Dr=null,E_(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(xr=null),oa(a),i=i.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ce,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Q.T,h=at.p,at.p=2,Q.T=null;try{for(var d=e.onRecoverableError,v=0;v<l.length;v++){var E=l[v];d(E.value,{componentStack:E.stack})}}finally{Q.T=i,at.p=h}}(qa&3)!==0&&pc(),pi(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===_d?gl++:(gl=0,_d=e):gl=0,yl(0)}}function E_(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Xo(i)))}function pc(e){return __(),v_(),T_(),b_()}function b_(){if(Fe!==5)return!1;var e=Dr,i=gd;gd=0;var a=oa(qa),l=Q.T,h=at.p;try{at.p=32>a?32:a,Q.T=null,a=yd,yd=null;var d=Dr,v=qa;if(Fe=0,ja=Dr=null,qa=0,($t&6)!==0)throw Error(s(331));var E=$t;if($t|=4,s_(d.current),n_(d,d.current,v,a),$t=E,yl(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ce,d)}catch{}return!0}finally{at.p=h,Q.T=l,E_(e,i)}}function S_(e,i,a){i=Nn(a,i),i=Xf(e.stateNode,i,2),e=Tr(e,i,2),e!==null&&(xi(e,2),pi(e))}function Zt(e,i,a){if(e.tag===3)S_(e,e,a);else for(;i!==null;){if(i.tag===3){S_(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(xr===null||!xr.has(l))){e=Nn(a,e),a=Iy(2),l=Tr(i,a,2),l!==null&&(Cy(a,l,i,e),xi(l,2),pi(l));break}}i=i.return}}function bd(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new bS;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(fd=!0,h.add(a),e=IS.bind(null,e,i,a),i.then(e,e))}function IS(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,te===e&&(Bt&a)===a&&(fe===4||fe===3&&(Bt&62914560)===Bt&&300>Rn()-pd?($t&2)===0&&Ha(e,0):dd|=a,za===Bt&&(za=0)),pi(e)}function A_(e,i){i===0&&(i=Ro()),e=wa(e,i),e!==null&&(xi(e,i),pi(e))}function CS(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),A_(e,a)}function xS(e,i){var a=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),A_(e,a)}function DS(e,i){return as(e,i)}var gc=null,Ga=null,Sd=!1,yc=!1,Ad=!1,js=0;function pi(e){e!==Ga&&e.next===null&&(Ga===null?gc=Ga=e:Ga=Ga.next=e),yc=!0,Sd||(Sd=!0,NS())}function yl(e,i){if(!Ad&&yc){Ad=!0;do for(var a=!1,l=gc;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,E=l.pingedLanes;d=(1<<31-Ke(42|e)+1)-1,d&=h&~(v&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,C_(l,d))}else d=Bt,d=aa(l,l===te?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||fs(l,d)||(a=!0,C_(l,d));l=l.next}while(a);Ad=!1}}function OS(){w_()}function w_(){yc=Sd=!1;var e=0;js!==0&&(zS()&&(e=js),js=0);for(var i=Rn(),a=null,l=gc;l!==null;){var h=l.next,d=R_(l,i);d===0?(l.next=null,a===null?gc=h:a.next=h,h===null&&(Ga=a)):(a=l,(e!==0||(d&3)!==0)&&(yc=!0)),l=h}yl(e)}function R_(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-Ke(d),E=1<<v,R=h[v];R===-1?((E&a)===0||(E&l)!==0)&&(h[v]=Ao(E,i)):R<=i&&(e.expiredLanes|=E),d&=~E}if(i=te,a=Bt,a=aa(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&os(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||fs(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&os(l),oa(a)){case 2:case 8:a=ra;break;case 32:a=ls;break;case 268435456:a=sa;break;default:a=ls}return l=I_.bind(null,e),a=as(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&os(l),e.callbackPriority=2,e.callbackNode=null,2}function I_(e,i){if(Fe!==0&&Fe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(pc()&&e.callbackNode!==a)return null;var l=Bt;return l=aa(e,e===te?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(u_(e,l,i),R_(e,Rn()),e.callbackNode!=null&&e.callbackNode===a?I_.bind(null,e):null)}function C_(e,i){if(pc())return null;u_(e,i,!0)}function NS(){qS(function(){($t&6)!==0?as(bo,OS):w_()})}function wd(){return js===0&&(js=wo()),js}function x_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:da(""+e)}function D_(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function kS(e,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=x_((h[Ee]||null).action),v=l.submitter;v&&(i=(i=v[Ee]||null)?x_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var E=new ma("action","action",null,l,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(js!==0){var R=v?D_(h,v):new FormData(h);Gf(a,{pending:!0,data:R,method:h.method,action:d},null,R)}}else typeof d=="function"&&(E.preventDefault(),R=v?D_(h,v):new FormData(h),Gf(a,{pending:!0,data:R,method:h.method,action:d},d,R))},currentTarget:h}]})}}for(var Rd=0;Rd<cf.length;Rd++){var Id=cf[Rd],MS=Id.toLowerCase(),VS=Id[0].toUpperCase()+Id.slice(1);Gn(MS,"on"+VS)}Gn(ug,"onAnimationEnd"),Gn(cg,"onAnimationIteration"),Gn(hg,"onAnimationStart"),Gn("dblclick","onDoubleClick"),Gn("focusin","onFocus"),Gn("focusout","onBlur"),Gn(Zb,"onTransitionRun"),Gn(Jb,"onTransitionStart"),Gn(tS,"onTransitionCancel"),Gn(fg,"onTransitionEnd"),Oi("onMouseEnter",["mouseout","mouseover"]),Oi("onMouseLeave",["mouseout","mouseover"]),Oi("onPointerEnter",["pointerout","pointerover"]),Oi("onPointerLeave",["pointerout","pointerover"]),Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function O_(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var E=l[v],R=E.instance,q=E.currentTarget;if(E=E.listener,R!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=q;try{d(h)}catch(Y){rc(Y)}h.currentTarget=null,d=R}else for(v=0;v<l.length;v++){if(E=l[v],R=E.instance,q=E.currentTarget,E=E.listener,R!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=q;try{d(h)}catch(Y){rc(Y)}h.currentTarget=null,d=R}}}}function Nt(e,i){var a=i[xo];a===void 0&&(a=i[xo]=new Set);var l=e+"__bubble";a.has(l)||(N_(i,e,2,!1),a.add(l))}function Cd(e,i,a){var l=0;i&&(l|=4),N_(a,e,l,i)}var _c="_reactListening"+Math.random().toString(36).slice(2);function xd(e){if(!e[_c]){e[_c]=!0,Do.forEach(function(a){a!=="selectionchange"&&(PS.has(a)||Cd(a,!1,e),Cd(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[_c]||(i[_c]=!0,Cd("selectionchange",!1,i))}}function N_(e,i,a,l){switch(nv(i)){case 2:var h=uA;break;case 8:h=cA;break;default:h=Hd}a=h.bind(null,i,a,e),h=void 0,!Dn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function Dd(e,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var E=l.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=l.return;v!==null;){var R=v.tag;if((R===3||R===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=Di(E),v===null)return;if(R=v.tag,R===5||R===6||R===26||R===27){l=d=v;continue t}E=E.parentNode}}l=l.return}Tu(function(){var q=d,Y=xn(a),W=[];t:{var H=dg.get(e);if(H!==void 0){var G=ma,St=e;switch(e){case"keypress":if(ai(a)===0)break t;case"keydown":case"keyup":G=Ta;break;case"focusin":St="focus",G=ya;break;case"focusout":St="blur",G=ya;break;case"beforeblur":case"afterblur":G=ya;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=On;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=ef;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Cu;break;case ug:case cg:case hg:G=_a;break;case fg:G=Du;break;case"scroll":case"scrollend":G=Eu;break;case"wheel":G=Ea;break;case"copy":case"cut":case"paste":G=va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=qo;break;case"toggle":case"beforetoggle":G=Nu}var vt=(i&4)!==0,Wt=!vt&&(e==="scroll"||e==="scrollend"),L=vt?H!==null?H+"Capture":null:H;vt=[];for(var N=q,j;N!==null;){var K=N;if(j=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||j===null||L===null||(K=Ts(N,L),K!=null&&vt.push(vl(N,K,j))),Wt)break;N=N.return}0<vt.length&&(H=new G(H,St,null,a,Y),W.push({event:H,listeners:vt}))}}if((i&7)===0){t:{if(H=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",H&&a!==Mi&&(St=a.relatedTarget||a.fromElement)&&(Di(St)||St[In]))break t;if((G||H)&&(H=Y.window===Y?Y:(H=Y.ownerDocument)?H.defaultView||H.parentWindow:window,G?(St=a.relatedTarget||a.toElement,G=q,St=St?Di(St):null,St!==null&&(Wt=u(St),vt=St.tag,St!==Wt||vt!==5&&vt!==27&&vt!==6)&&(St=null)):(G=null,St=q),G!==St)){if(vt=On,K="onMouseLeave",L="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(vt=qo,K="onPointerLeave",L="onPointerEnter",N="pointer"),Wt=G==null?H:ni(G),j=St==null?H:ni(St),H=new vt(K,N+"leave",G,a,Y),H.target=Wt,H.relatedTarget=j,K=null,Di(Y)===q&&(vt=new vt(L,N+"enter",St,a,Y),vt.target=j,vt.relatedTarget=Wt,K=vt),Wt=K,G&&St)e:{for(vt=G,L=St,N=0,j=vt;j;j=$a(j))N++;for(j=0,K=L;K;K=$a(K))j++;for(;0<N-j;)vt=$a(vt),N--;for(;0<j-N;)L=$a(L),j--;for(;N--;){if(vt===L||L!==null&&vt===L.alternate)break e;vt=$a(vt),L=$a(L)}vt=null}else vt=null;G!==null&&k_(W,H,G,vt,!1),St!==null&&Wt!==null&&k_(W,Wt,St,vt,!0)}}t:{if(H=q?ni(q):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var ht=Zp;else if(De(H))if(Jp)ht=Kb;else{ht=Qb;var Dt=$b}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?q&&Vo(q.elementType)&&(ht=Zp):ht=Yb;if(ht&&(ht=ht(e,q))){Bi(W,ht,a,Y);break t}Dt&&Dt(e,H,q),e==="focusout"&&q&&H.type==="number"&&q.memoizedProps.value!=null&&pr(H,"number",H.value)}switch(Dt=q?ni(q):window,e){case"focusin":(De(Dt)||Dt.contentEditable==="true")&&(ba=Dt,of=q,Go=null);break;case"focusout":Go=of=ba=null;break;case"mousedown":lf=!0;break;case"contextmenu":case"mouseup":case"dragend":lf=!1,og(W,a,Y);break;case"selectionchange":if(Wb)break;case"keydown":case"keyup":og(W,a,Y)}var mt;if(ui)t:{switch(e){case"compositionstart":var Tt="onCompositionStart";break t;case"compositionend":Tt="onCompositionEnd";break t;case"compositionupdate":Tt="onCompositionUpdate";break t}Tt=void 0}else Lt?$(e,a)&&(Tt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Tt="onCompositionStart");Tt&&(_&&a.locale!=="ko"&&(Lt||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&Lt&&(mt=Lo()):(si=Y,gr="value"in si?si.value:si.textContent,Lt=!0)),Dt=vc(q,Tt),0<Dt.length&&(Tt=new zo(Tt,e,null,a,Y),W.push({event:Tt,listeners:Dt}),mt?Tt.data=mt:(mt=rt(a),mt!==null&&(Tt.data=mt)))),(mt=p?xe(e,a):Ut(e,a))&&(Tt=vc(q,"onBeforeInput"),0<Tt.length&&(Dt=new zo("onBeforeInput","beforeinput",null,a,Y),W.push({event:Dt,listeners:Tt}),Dt.data=mt)),kS(W,e,q,a,Y)}O_(W,i)})}function vl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function vc(e,i){for(var a=i+"Capture",l=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Ts(e,a),h!=null&&l.unshift(vl(e,h,d)),h=Ts(e,i),h!=null&&l.push(vl(e,h,d))),e.tag===3)return l;e=e.return}return[]}function $a(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function k_(e,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var E=a,R=E.alternate,q=E.stateNode;if(E=E.tag,R!==null&&R===l)break;E!==5&&E!==26&&E!==27||q===null||(R=q,h?(q=Ts(a,d),q!=null&&v.unshift(vl(a,q,R))):h||(q=Ts(a,d),q!=null&&v.push(vl(a,q,R)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var LS=/\r\n?/g,US=/\u0000|\uFFFD/g;function M_(e){return(typeof e=="string"?e:""+e).replace(LS,`
`).replace(US,"")}function V_(e,i){return i=M_(i),M_(e)===i}function Tc(){}function Xt(e,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Cn(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Cn(e,""+l);break;case"className":ii(e,"class",l);break;case"tabIndex":ii(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ii(e,a,l);break;case"style":Mo(e,l,d);break;case"data":if(i!=="object"){ii(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=da(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Xt(e,i,"name",h.name,h,null),Xt(e,i,"formEncType",h.formEncType,h,null),Xt(e,i,"formMethod",h.formMethod,h,null),Xt(e,i,"formTarget",h.formTarget,h,null)):(Xt(e,i,"encType",h.encType,h,null),Xt(e,i,"method",h.method,h,null),Xt(e,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=da(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Tc);break;case"onScroll":l!=null&&Nt("scroll",e);break;case"onScrollEnd":l!=null&&Nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=da(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Nt("beforetoggle",e),Nt("toggle",e),mr(e,"popover",l);break;case"xlinkActuate":je(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":je(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":je(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":je(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":je(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":je(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":je(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":je(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":je(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":mr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Jh.get(a)||a,mr(e,a,l))}}function Od(e,i,a,l,h,d){switch(a){case"style":Mo(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Cn(e,l):(typeof l=="number"||typeof l=="bigint")&&Cn(e,""+l);break;case"onScroll":l!=null&&Nt("scroll",e);break;case"onScrollEnd":l!=null&&Nt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Tc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!la.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=e[Ee]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,h);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):mr(e,a,l)}}}function Ge(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",e),Nt("load",e);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,d,v,a,null)}}h&&Xt(e,i,"srcSet",a.srcSet,a,null),l&&Xt(e,i,"src",a.src,a,null);return;case"input":Nt("invalid",e);var E=d=v=h=null,R=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var Y=a[l];if(Y!=null)switch(l){case"name":h=Y;break;case"type":v=Y;break;case"checked":R=Y;break;case"defaultChecked":q=Y;break;case"value":d=Y;break;case"defaultValue":E=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Xt(e,i,l,Y,a,null)}}ys(e,d,E,R,q,v,h,!1),fa(e);return;case"select":Nt("invalid",e),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":l=E;default:Xt(e,i,h,E,a,null)}i=d,a=v,e.multiple=!!l,i!=null?ki(e,!!l,i,!1):a!=null&&ki(e,!!l,a,!0);return;case"textarea":Nt("invalid",e),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":l=E;break;case"defaultValue":h=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Xt(e,i,v,E,a,null)}_s(e,l,h,d),fa(e);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(l=a[R],l!=null))switch(R){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Xt(e,i,R,l,a,null)}return;case"dialog":Nt("beforetoggle",e),Nt("toggle",e),Nt("cancel",e),Nt("close",e);break;case"iframe":case"object":Nt("load",e);break;case"video":case"audio":for(l=0;l<_l.length;l++)Nt(_l[l],e);break;case"image":Nt("error",e),Nt("load",e);break;case"details":Nt("toggle",e);break;case"embed":case"source":case"link":Nt("error",e),Nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,q,l,a,null)}return;default:if(Vo(i)){for(Y in a)a.hasOwnProperty(Y)&&(l=a[Y],l!==void 0&&Od(e,i,Y,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Xt(e,i,E,l,a,null))}function BS(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,E=null,R=null,q=null,Y=null;for(G in a){var W=a[G];if(a.hasOwnProperty(G)&&W!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":R=W;default:l.hasOwnProperty(G)||Xt(e,i,G,null,l,W)}}for(var H in l){var G=l[H];if(W=a[H],l.hasOwnProperty(H)&&(G!=null||W!=null))switch(H){case"type":d=G;break;case"name":h=G;break;case"checked":q=G;break;case"defaultChecked":Y=G;break;case"value":v=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:G!==W&&Xt(e,i,H,G,l,W)}}mn(e,v,E,R,q,Y,d,h);return;case"select":G=v=E=H=null;for(d in a)if(R=a[d],a.hasOwnProperty(d)&&R!=null)switch(d){case"value":break;case"multiple":G=R;default:l.hasOwnProperty(d)||Xt(e,i,d,null,l,R)}for(h in l)if(d=l[h],R=a[h],l.hasOwnProperty(h)&&(d!=null||R!=null))switch(h){case"value":H=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==R&&Xt(e,i,h,d,l,R)}i=E,a=v,l=G,H!=null?ki(e,!!a,H,!1):!!l!=!!a&&(i!=null?ki(e,!!a,i,!0):ki(e,!!a,a?[]:"",!1));return;case"textarea":G=H=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Xt(e,i,E,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":H=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Xt(e,i,v,h,l,d)}Yt(e,H,G);return;case"option":for(var St in a)if(H=a[St],a.hasOwnProperty(St)&&H!=null&&!l.hasOwnProperty(St))switch(St){case"selected":e.selected=!1;break;default:Xt(e,i,St,null,l,H)}for(R in l)if(H=l[R],G=a[R],l.hasOwnProperty(R)&&H!==G&&(H!=null||G!=null))switch(R){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Xt(e,i,R,H,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in a)H=a[vt],a.hasOwnProperty(vt)&&H!=null&&!l.hasOwnProperty(vt)&&Xt(e,i,vt,null,l,H);for(q in l)if(H=l[q],G=a[q],l.hasOwnProperty(q)&&H!==G&&(H!=null||G!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:Xt(e,i,q,H,l,G)}return;default:if(Vo(i)){for(var Wt in a)H=a[Wt],a.hasOwnProperty(Wt)&&H!==void 0&&!l.hasOwnProperty(Wt)&&Od(e,i,Wt,void 0,l,H);for(Y in l)H=l[Y],G=a[Y],!l.hasOwnProperty(Y)||H===G||H===void 0&&G===void 0||Od(e,i,Y,H,l,G);return}}for(var L in a)H=a[L],a.hasOwnProperty(L)&&H!=null&&!l.hasOwnProperty(L)&&Xt(e,i,L,null,l,H);for(W in l)H=l[W],G=a[W],!l.hasOwnProperty(W)||H===G||H==null&&G==null||Xt(e,i,W,H,l,G)}var Nd=null,kd=null;function Ec(e){return e.nodeType===9?e:e.ownerDocument}function P_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L_(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Md(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Vd=null;function zS(){var e=window.event;return e&&e.type==="popstate"?e===Vd?!1:(Vd=e,!0):(Vd=null,!1)}var U_=typeof setTimeout=="function"?setTimeout:void 0,jS=typeof clearTimeout=="function"?clearTimeout:void 0,B_=typeof Promise=="function"?Promise:void 0,qS=typeof queueMicrotask=="function"?queueMicrotask:typeof B_<"u"?function(e){return B_.resolve(null).then(e).catch(HS)}:U_;function HS(e){setTimeout(function(){throw e})}function Nr(e){return e==="head"}function z_(e,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var v=e.ownerDocument;if(a&1&&Tl(v.documentElement),a&2&&Tl(v.body),a&4)for(a=v.head,Tl(a),v=a.firstChild;v;){var E=v.nextSibling,R=v.nodeName;v[ds]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){e.removeChild(d),Cl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Cl(i)}function Pd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Pd(a),dr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function FS(e,i,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ds])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Qn(e.nextSibling),e===null)break}return null}function GS(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Qn(e.nextSibling),e===null))return null;return e}function Ld(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function $S(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Qn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Ud=null;function j_(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function q_(e,i,a){switch(i=Ec(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Tl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);dr(e)}var Un=new Map,H_=new Set;function bc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Zi=at.d;at.d={f:QS,r:YS,D:KS,C:XS,L:WS,m:ZS,X:tA,S:JS,M:eA};function QS(){var e=Zi.f(),i=dc();return e||i}function YS(e){var i=ei(e);i!==null&&i.tag===5&&i.type==="form"?uy(i):Zi.r(e)}var Qa=typeof document>"u"?null:document;function F_(e,i,a){var l=Qa;if(l&&typeof i=="string"&&i){var h=be(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),H_.has(h)||(H_.add(h),e={rel:e,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Ge(i,"link",e),ge(i),l.head.appendChild(i)))}}function KS(e){Zi.D(e),F_("dns-prefetch",e,null)}function XS(e,i){Zi.C(e,i),F_("preconnect",e,i)}function WS(e,i,a){Zi.L(e,i,a);var l=Qa;if(l&&e&&i){var h='link[rel="preload"][as="'+be(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+be(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+be(a.imageSizes)+'"]')):h+='[href="'+be(e)+'"]';var d=h;switch(i){case"style":d=Ya(e);break;case"script":d=Ka(e)}Un.has(d)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Un.set(d,e),l.querySelector(h)!==null||i==="style"&&l.querySelector(El(d))||i==="script"&&l.querySelector(bl(d))||(i=l.createElement("link"),Ge(i,"link",e),ge(i),l.head.appendChild(i)))}}function ZS(e,i){Zi.m(e,i);var a=Qa;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+be(l)+'"][href="'+be(e)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ka(e)}if(!Un.has(d)&&(e=T({rel:"modulepreload",href:e},i),Un.set(d,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(bl(d)))return}l=a.createElement("link"),Ge(l,"link",e),ge(l),a.head.appendChild(l)}}}function JS(e,i,a){Zi.S(e,i,a);var l=Qa;if(l&&e){var h=nn(l).hoistableStyles,d=Ya(e);i=i||"default";var v=h.get(d);if(!v){var E={loading:0,preload:null};if(v=l.querySelector(El(d)))E.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Un.get(d))&&Bd(e,a);var R=v=l.createElement("link");ge(R),Ge(R,"link",e),R._p=new Promise(function(q,Y){R.onload=q,R.onerror=Y}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Sc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(d,v)}}}function tA(e,i){Zi.X(e,i);var a=Qa;if(a&&e){var l=nn(a).hoistableScripts,h=Ka(e),d=l.get(h);d||(d=a.querySelector(bl(h)),d||(e=T({src:e,async:!0},i),(i=Un.get(h))&&zd(e,i),d=a.createElement("script"),ge(d),Ge(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function eA(e,i){Zi.M(e,i);var a=Qa;if(a&&e){var l=nn(a).hoistableScripts,h=Ka(e),d=l.get(h);d||(d=a.querySelector(bl(h)),d||(e=T({src:e,async:!0,type:"module"},i),(i=Un.get(h))&&zd(e,i),d=a.createElement("script"),ge(d),Ge(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function G_(e,i,a,l){var h=(h=bt.current)?bc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ya(a.href),a=nn(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ya(a.href);var d=nn(h).hoistableStyles,v=d.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=h.querySelector(El(e)))&&!d._p&&(v.instance=d,v.state.loading=5),Un.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Un.set(e,a),d||nA(h,e,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ka(a),a=nn(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ya(e){return'href="'+be(e)+'"'}function El(e){return'link[rel="stylesheet"]['+e+"]"}function $_(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function nA(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Ge(i,"link",a),ge(i),e.head.appendChild(i))}function Ka(e){return'[src="'+be(e)+'"]'}function bl(e){return"script[async]"+e}function Q_(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+be(a.href)+'"]');if(l)return i.instance=l,ge(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ge(l),Ge(l,"style",h),Sc(l,a.precedence,e),i.instance=l;case"stylesheet":h=Ya(a.href);var d=e.querySelector(El(h));if(d)return i.state.loading|=4,i.instance=d,ge(d),d;l=$_(a),(h=Un.get(h))&&Bd(l,h),d=(e.ownerDocument||e).createElement("link"),ge(d);var v=d;return v._p=new Promise(function(E,R){v.onload=E,v.onerror=R}),Ge(d,"link",l),i.state.loading|=4,Sc(d,a.precedence,e),i.instance=d;case"script":return d=Ka(a.src),(h=e.querySelector(bl(d)))?(i.instance=h,ge(h),h):(l=a,(h=Un.get(d))&&(l=T({},a),zd(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),ge(h),Ge(h,"link",l),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Sc(l,a.precedence,e));return i.instance}function Sc(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var E=l[v];if(E.dataset.precedence===i)d=E;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Bd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function zd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Ac=null;function Y_(e,i,a){if(Ac===null){var l=new Map,h=Ac=new Map;h.set(a,l)}else h=Ac,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[ds]||d[Ce]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=e+v;var E=l.get(v);E?E.push(d):l.set(v,[d])}}return l}function K_(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function iA(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function X_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Sl=null;function rA(){}function sA(e,i,a){if(Sl===null)throw Error(s(475));var l=Sl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ya(a.href),d=e.querySelector(El(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=wc.bind(l),e.then(l,l)),i.state.loading|=4,i.instance=d,ge(d);return}d=e.ownerDocument||e,a=$_(a),(h=Un.get(h))&&Bd(a,h),d=d.createElement("link"),ge(d);var v=d;v._p=new Promise(function(E,R){v.onload=E,v.onerror=R}),Ge(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=wc.bind(l),e.addEventListener("load",i),e.addEventListener("error",i))}}function aA(){if(Sl===null)throw Error(s(475));var e=Sl;return e.stylesheets&&e.count===0&&jd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&jd(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function wc(){if(this.count--,this.count===0){if(this.stylesheets)jd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Rc=null;function jd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Rc=new Map,i.forEach(oA,e),Rc=null,wc.call(e))}function oA(e,i){if(!(i.state.loading&4)){var a=Rc.get(e);if(a)var l=a.get(null);else{a=new Map,Rc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=wc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var Al={$$typeof:nt,Provider:null,Consumer:null,_currentValue:dt,_currentValue2:dt,_threadCount:0};function lA(e,i,a,l,h,d,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.hiddenUpdates=Ci(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function W_(e,i,a,l,h,d,v,E,R,q,Y,W){return e=new lA(e,i,a,v,E,R,q,W),i=1,d===!0&&(i|=24),d=gn(3,null,null,i),e.current=d,d.stateNode=e,i=bf(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Rf(d),e}function Z_(e){return e?(e=Ra,e):Ra}function J_(e,i,a,l,h,d){h=Z_(h),l.context===null?l.context=h:l.pendingContext=h,l=vr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Tr(e,l,i),a!==null&&(En(a,e,i),tl(a,e,i))}function tv(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function qd(e,i){tv(e,i),(e=e.alternate)&&tv(e,i)}function ev(e){if(e.tag===13){var i=wa(e,67108864);i!==null&&En(i,e,67108864),qd(e,67108864)}}var Ic=!0;function uA(e,i,a,l){var h=Q.T;Q.T=null;var d=at.p;try{at.p=2,Hd(e,i,a,l)}finally{at.p=d,Q.T=h}}function cA(e,i,a,l){var h=Q.T;Q.T=null;var d=at.p;try{at.p=8,Hd(e,i,a,l)}finally{at.p=d,Q.T=h}}function Hd(e,i,a,l){if(Ic){var h=Fd(l);if(h===null)Dd(e,i,l,Cc,a),iv(e,l);else if(fA(h,e,i,a,l))l.stopPropagation();else if(iv(e,l),i&4&&-1<hA.indexOf(e)){for(;h!==null;){var d=ei(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=qn(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var R=1<<31-Ke(v);E.entanglements[1]|=R,v&=~R}pi(d),($t&6)===0&&(hc=Rn()+500,yl(0))}}break;case 13:E=wa(d,2),E!==null&&En(E,d,2),dc(),qd(d,2)}if(d=Fd(l),d===null&&Dd(e,i,l,Cc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Dd(e,i,l,null,a)}}function Fd(e){return e=xn(e),Gd(e)}var Cc=null;function Gd(e){if(Cc=null,e=Di(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=f(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Cc=e,null}function nv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qh()){case bo:return 2;case ra:return 8;case ls:case Yh:return 32;case sa:return 268435456;default:return 32}default:return 32}}var $d=!1,kr=null,Mr=null,Vr=null,wl=new Map,Rl=new Map,Pr=[],hA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iv(e,i){switch(e){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":wl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(i.pointerId)}}function Il(e,i,a,l,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=ei(i),i!==null&&ev(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function fA(e,i,a,l,h){switch(i){case"focusin":return kr=Il(kr,e,i,a,l,h),!0;case"dragenter":return Mr=Il(Mr,e,i,a,l,h),!0;case"mouseover":return Vr=Il(Vr,e,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return wl.set(d,Il(wl.get(d)||null,e,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Rl.set(d,Il(Rl.get(d)||null,e,i,a,l,h)),!0}return!1}function rv(e){var i=Di(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){e.blockedOn=i,du(e.priority,function(){if(a.tag===13){var l=Tn();l=cr(l);var h=wa(a,l);h!==null&&En(h,a,l),qd(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Fd(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Mi=l,a.target.dispatchEvent(l),Mi=null}else return i=ei(a),i!==null&&ev(i),e.blockedOn=a,!1;i.shift()}return!0}function sv(e,i,a){xc(e)&&a.delete(i)}function dA(){$d=!1,kr!==null&&xc(kr)&&(kr=null),Mr!==null&&xc(Mr)&&(Mr=null),Vr!==null&&xc(Vr)&&(Vr=null),wl.forEach(sv),Rl.forEach(sv)}function Dc(e,i){e.blockedOn===i&&(e.blockedOn=null,$d||($d=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,dA)))}var Oc=null;function av(e){Oc!==e&&(Oc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Oc===e&&(Oc=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],h=e[i+2];if(typeof l!="function"){if(Gd(l||a)===null)continue;break}var d=ei(a);d!==null&&(e.splice(i,3),i-=3,Gf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Cl(e){function i(R){return Dc(R,e)}kr!==null&&Dc(kr,e),Mr!==null&&Dc(Mr,e),Vr!==null&&Dc(Vr,e),wl.forEach(i),Rl.forEach(i);for(var a=0;a<Pr.length;a++){var l=Pr[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Pr.length&&(a=Pr[0],a.blockedOn===null);)rv(a),a.blockedOn===null&&Pr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Ee]||null;if(typeof d=="function")v||av(a);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Ee]||null)E=v.formAction;else if(Gd(h)!==null)continue}else E=v.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),av(a)}}}function Qd(e){this._internalRoot=e}Nc.prototype.render=Qd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Tn();J_(a,l,e,i,null,null)},Nc.prototype.unmount=Qd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;J_(e.current,2,null,e,null,null),dc(),i[In]=null}};function Nc(e){this._internalRoot=e}Nc.prototype.unstable_scheduleHydration=function(e){if(e){var i=hr();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Pr.length&&i!==0&&i<Pr[a].priority;a++);Pr.splice(a,0,e),a===0&&rv(e)}};var ov=t.version;if(ov!=="19.1.1")throw Error(s(527,ov,"19.1.1"));at.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=y(i),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var mA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kc.isDisabled&&kc.supportsFiber)try{ce=kc.inject(mA),Gt=kc}catch{}}return Dl.createRoot=function(e,i){if(!o(e))throw Error(s(299));var a=!1,l="",h=Sy,d=Ay,v=wy,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=W_(e,1,!1,null,null,a,l,h,d,v,E,null),e[In]=i.current,xd(e),new Qd(i)},Dl.hydrateRoot=function(e,i,a){if(!o(e))throw Error(s(299));var l=!1,h="",d=Sy,v=Ay,E=wy,R=null,q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks),a.formState!==void 0&&(q=a.formState)),i=W_(e,1,!0,i,a??null,l,h,d,v,E,R,q),i.context=Z_(null),a=i.current,l=Tn(),l=cr(l),h=vr(l),h.callback=null,Tr(a,h,l),a=l,i.current.lanes=a,xi(i,a),pi(i),e[In]=i.current,xd(e),new Nc(i)},Dl.version="19.1.1",Dl}var yv;function AA(){if(yv)return Xd.exports;yv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Xd.exports=SA(),Xd.exports}var wA=AA();const RA=iT(wA),IA=()=>{};var _v={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},CA=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];t[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],m=r[n++],y=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;t[s++]=String.fromCharCode(55296+(y>>10)),t[s++]=String.fromCharCode(56320+(y&1023))}else{const u=r[n++],f=r[n++];t[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},sT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,y=o+2<r.length,g=y?r[o+2]:0,T=u>>2,S=(u&3)<<4|m>>4;let A=(m&15)<<2|g>>6,V=g&63;y||(V=64,f||(A=64)),s.push(n[T],n[S],n[A],n[V])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(rT(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):CA(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const S=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||g==null||S==null)throw new xA;const A=u<<2|m>>4;if(s.push(A),g!==64){const V=m<<4&240|g>>2;if(s.push(V),S!==64){const z=g<<6&192|S;s.push(z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class xA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DA=function(r){const t=rT(r);return sT.encodeByteArray(t,!0)},nh=function(r){return DA(r).replace(/\./g,"")},aT=function(r){try{return sT.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=()=>OA().__FIREBASE_DEFAULTS__,kA=()=>{if(typeof process>"u"||typeof _v>"u")return;const r=_v.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},MA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&aT(r[1]);return t&&JSON.parse(t)},Eh=()=>{try{return IA()||NA()||kA()||MA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},oT=r=>Eh()?.emulatorHosts?.[r],Xm=r=>{const t=oT(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},lT=()=>Eh()?.config,uT=r=>Eh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bh(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[nh(JSON.stringify(n)),nh(JSON.stringify(f)),""].join(".")}const Pl={};function PA(){const r={prod:[],emulator:[]};for(const t of Object.keys(Pl))Pl[t]?r.emulator.push(t):r.prod.push(t);return r}function LA(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let vv=!1;function Sh(r,t){if(typeof window>"u"||typeof document>"u"||!lr(window.location.host)||Pl[r]===t||Pl[r]||vv)return;Pl[r]=t;function n(A){return`__firebase__banner__${A}`}const s="__firebase__banner",u=PA().prod.length>0;function f(){const A=document.getElementById(s);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function y(A,V){A.setAttribute("width","24"),A.setAttribute("id",V),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function g(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{vv=!0,f()},A}function T(A,V){A.setAttribute("id",V),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function S(){const A=LA(s),V=n("text"),z=document.getElementById(V)||document.createElement("span"),F=n("learnmore"),U=document.getElementById(F)||document.createElement("a"),tt=n("preprendIcon"),et=document.getElementById(tt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const nt=A.element;m(nt),T(U,F);const yt=g();y(et,tt),nt.append(et,z,U,yt),document.body.appendChild(nt)}u?(z.innerText="Preview backend disconnected.",et.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(et.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function BA(){const r=Eh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function qA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HA(){const r=en();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function FA(){return!BA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GA(){try{return typeof indexedDB=="object"}catch{return!1}}function $A(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="FirebaseError";class Ri extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=QA,Object.setPrototypeOf(this,Ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zl.prototype.create)}}class Zl{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?YA(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Ri(o,m,s)}}function YA(r,t){return r.replace(KA,(n,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const KA=/\{\$([^}]+)}/g;function XA(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Ys(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=t[o];if(Tv(u)&&Tv(f)){if(!Ys(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Tv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function WA(r,t){const n=new ZA(r,t);return n.subscribe.bind(n)}class ZA{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let o;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");JA(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:s},o.next===void 0&&(o.next=tm),o.error===void 0&&(o.error=tm),o.complete===void 0&&(o.complete=tm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JA(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function tm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(r){return r&&r._delegate?r._delegate:r}class ir{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new VA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(n1(t))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(t=qs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=qs){return this.instances.has(t)}getOptions(t=qs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(t),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&t(u,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:e1(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=qs){return this.component?this.component.multipleInstances?t:qs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function e1(r){return r===qs?void 0:r}function n1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new t1(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Mt||(Mt={}));const r1={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},s1=Mt.INFO,a1={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},o1=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),o=a1[t];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Wm{constructor(t){this.name=t,this._logLevel=s1,this._logHandler=o1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Mt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?r1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...t),this._logHandler(this,Mt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...t),this._logHandler(this,Mt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...t),this._logHandler(this,Mt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...t),this._logHandler(this,Mt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...t),this._logHandler(this,Mt.ERROR,...t)}}const l1=(r,t)=>t.some(n=>r instanceof n);let Ev,bv;function u1(){return Ev||(Ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c1(){return bv||(bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hT=new WeakMap,_m=new WeakMap,fT=new WeakMap,em=new WeakMap,Zm=new WeakMap;function h1(r){const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(Gr(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&hT.set(n,r)}).catch(()=>{}),Zm.set(t,r),t}function f1(r){if(_m.has(r))return;const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});_m.set(r,t)}let vm={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return _m.get(r);if(t==="objectStoreNames")return r.objectStoreNames||fT.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function d1(r){vm=r(vm)}function m1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(nm(this),t,...n);return fT.set(s,t.sort?t.sort():[t]),Gr(s)}:c1().includes(r)?function(...t){return r.apply(nm(this),t),Gr(hT.get(this))}:function(...t){return Gr(r.apply(nm(this),t))}}function p1(r){return typeof r=="function"?m1(r):(r instanceof IDBTransaction&&f1(r),l1(r,u1())?new Proxy(r,vm):r)}function Gr(r){if(r instanceof IDBRequest)return h1(r);if(em.has(r))return em.get(r);const t=p1(r);return t!==r&&(em.set(r,t),Zm.set(t,r)),t}const nm=r=>Zm.get(r);function g1(r,t,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,t),m=Gr(f);return s&&f.addEventListener("upgradeneeded",y=>{s(Gr(f.result),y.oldVersion,y.newVersion,Gr(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const y1=["get","getKey","getAll","getAllKeys","count"],_1=["put","add","delete","clear"],im=new Map;function Sv(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(im.get(t))return im.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,o=_1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||y1.includes(n)))return;const u=async function(f,...m){const y=this.transaction(f,o?"readwrite":"readonly");let g=y.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&y.done]))[0]};return im.set(t,u),u}d1(r=>({...r,get:(t,n,s)=>Sv(t,n)||r.get(t,n,s),has:(t,n)=>!!Sv(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(T1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function T1(r){return r.getComponent()?.type==="VERSION"}const Tm="@firebase/app",Av="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new Wm("@firebase/app"),E1="@firebase/app-compat",b1="@firebase/analytics-compat",S1="@firebase/analytics",A1="@firebase/app-check-compat",w1="@firebase/app-check",R1="@firebase/auth",I1="@firebase/auth-compat",C1="@firebase/database",x1="@firebase/data-connect",D1="@firebase/database-compat",O1="@firebase/functions",N1="@firebase/functions-compat",k1="@firebase/installations",M1="@firebase/installations-compat",V1="@firebase/messaging",P1="@firebase/messaging-compat",L1="@firebase/performance",U1="@firebase/performance-compat",B1="@firebase/remote-config",z1="@firebase/remote-config-compat",j1="@firebase/storage",q1="@firebase/storage-compat",H1="@firebase/firestore",F1="@firebase/ai",G1="@firebase/firestore-compat",$1="firebase",Q1="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="[DEFAULT]",Y1={[Tm]:"fire-core",[E1]:"fire-core-compat",[S1]:"fire-analytics",[b1]:"fire-analytics-compat",[w1]:"fire-app-check",[A1]:"fire-app-check-compat",[R1]:"fire-auth",[I1]:"fire-auth-compat",[C1]:"fire-rtdb",[x1]:"fire-data-connect",[D1]:"fire-rtdb-compat",[O1]:"fire-fn",[N1]:"fire-fn-compat",[k1]:"fire-iid",[M1]:"fire-iid-compat",[V1]:"fire-fcm",[P1]:"fire-fcm-compat",[L1]:"fire-perf",[U1]:"fire-perf-compat",[B1]:"fire-rc",[z1]:"fire-rc-compat",[j1]:"fire-gcs",[q1]:"fire-gcs-compat",[H1]:"fire-fst",[G1]:"fire-fst-compat",[F1]:"fire-vertex","fire-js":"fire-js",[$1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Map,K1=new Map,bm=new Map;function wv(r,t){try{r.container.addComponent(t)}catch(n){rr.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Xr(r){const t=r.name;if(bm.has(t))return rr.debug(`There were multiple attempts to register component ${t}.`),!1;bm.set(t,r);for(const n of ih.values())wv(n,r);for(const n of K1.values())wv(n,r);return!0}function tu(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function Sn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new Zl("app","Firebase",X1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=Q1;function dT(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:Em,automaticDataCollectionEnabled:!0,...t},o=s.name;if(typeof o!="string"||!o)throw $r.create("bad-app-name",{appName:String(o)});if(n||(n=lT()),!n)throw $r.create("no-options");const u=ih.get(o);if(u){if(Ys(n,u.options)&&Ys(s,u.config))return u;throw $r.create("duplicate-app",{appName:o})}const f=new i1(o);for(const y of bm.values())f.addComponent(y);const m=new W1(n,s,f);return ih.set(o,m),m}function Ah(r=Em){const t=ih.get(r);if(!t&&r===Em&&lT())return dT();if(!t)throw $r.create("no-app",{appName:r});return t}function zn(r,t,n){let s=Y1[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${t}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),rr.warn(f.join(" "));return}Xr(new ir(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="firebase-heartbeat-database",J1=1,Hl="firebase-heartbeat-store";let rm=null;function mT(){return rm||(rm=g1(Z1,J1,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(r=>{throw $r.create("idb-open",{originalErrorMessage:r.message})})),rm}async function tw(r){try{const n=(await mT()).transaction(Hl),s=await n.objectStore(Hl).get(pT(r));return await n.done,s}catch(t){if(t instanceof Ri)rr.warn(t.message);else{const n=$r.create("idb-get",{originalErrorMessage:t?.message});rr.warn(n.message)}}}async function Rv(r,t){try{const s=(await mT()).transaction(Hl,"readwrite");await s.objectStore(Hl).put(t,pT(r)),await s.done}catch(n){if(n instanceof Ri)rr.warn(n.message);else{const s=$r.create("idb-set",{originalErrorMessage:n?.message});rr.warn(s.message)}}}function pT(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=1024,nw=30;class iw{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sw(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Iv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>nw){const o=aw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){rr.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Iv(),{heartbeatsToSend:n,unsentEntries:s}=rw(this._heartbeatsCache.heartbeats),o=nh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return rr.warn(t),""}}}function Iv(){return new Date().toISOString().substring(0,10)}function rw(r,t=ew){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Cv(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Cv(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class sw{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GA()?$A().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Rv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Rv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Cv(r){return nh(JSON.stringify({version:2,heartbeats:r})).length}function aw(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(r){Xr(new ir("platform-logger",t=>new v1(t),"PRIVATE")),Xr(new ir("heartbeat",t=>new iw(t),"PRIVATE")),zn(Tm,Av,r),zn(Tm,Av,"esm2020"),zn("fire-js","")}ow("");function gT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lw=gT,yT=new Zl("auth","Firebase",gT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Wm("@firebase/auth");function uw(r,...t){rh.logLevel<=Mt.WARN&&rh.warn(`Auth (${Js}): ${r}`,...t)}function $c(r,...t){rh.logLevel<=Mt.ERROR&&rh.error(`Auth (${Js}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(r,...t){throw tp(r,...t)}function Xn(r,...t){return tp(r,...t)}function Jm(r,t,n){const s={...lw(),[t]:n};return new Zl("auth","Firebase",s).create(t,{appName:r.name})}function Gs(r){return Jm(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cw(r,t,n){const s=n;if(!(t instanceof s))throw s.name!==t.constructor.name&&Ai(r,"argument-error"),Jm(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tp(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return yT.create(r,...t)}function At(r,t,...n){if(!r)throw tp(t,...n)}function tr(r){const t="INTERNAL ASSERTION FAILED: "+r;throw $c(t),new Error(t)}function sr(r,t){r||tr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(){return typeof self<"u"&&self.location?.href||""}function hw(){return xv()==="http:"||xv()==="https:"}function xv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hw()||jA()||"connection"in navigator)?navigator.onLine:!0}function dw(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(t,n){this.shortDelay=t,this.longDelay=n,sr(n>t,"Short delay should be less than long delay!"),this.isMobile=UA()||qA()}get(){return fw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(r,t){sr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gw=new eu(3e4,6e4);function np(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function po(r,t,n,s,o={}){return vT(r,o,async()=>{let u={},f={};s&&(t==="GET"?f=s:u={body:JSON.stringify(s)});const m=Jl({key:r.config.apiKey,...f}).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const g={method:t,headers:y,...u};return zA()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&lr(r.emulatorConfig.host)&&(g.credentials="include"),_T.fetch()(await TT(r,r.config.apiHost,n,m),g)})}async function vT(r,t,n){r._canInitEmulator=!1;const s={...mw,...t};try{const o=new _w(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Mc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[y,g]=m.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mc(r,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw Mc(r,"email-already-in-use",f);if(y==="USER_DISABLED")throw Mc(r,"user-disabled",f);const T=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Jm(r,T,g);Ai(r,T)}}catch(o){if(o instanceof Ri)throw o;Ai(r,"network-request-failed",{message:String(o)})}}async function yw(r,t,n,s,o={}){const u=await po(r,t,n,s,o);return"mfaPendingCredential"in u&&Ai(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function TT(r,t,n,s){const o=`${t}${n}?${s}`,u=r,f=u.config.emulator?ep(r.config,o):`${r.config.apiScheme}://${o}`;return pw.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class _w{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Xn(this.auth,"network-request-failed")),gw.get())})}}function Mc(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Xn(r,t,s);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vw(r,t){return po(r,"POST","/v1/accounts:delete",t)}async function sh(r,t){return po(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Tw(r,t=!1){const n=ae(r),s=await n.getIdToken(t),o=ip(s);At(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:Ll(sm(o.auth_time)),issuedAtTime:Ll(sm(o.iat)),expirationTime:Ll(sm(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function sm(r){return Number(r)*1e3}function ip(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return $c("JWT malformed, contained fewer than 3 sections"),null;try{const o=aT(n);return o?JSON.parse(o):($c("Failed to decode base64 JWT payload"),null)}catch(o){return $c("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Dv(r){const t=ip(r);return At(t,"internal-error"),At(typeof t.exp<"u","internal-error"),At(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Ri&&Ew(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Ew({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ll(this.lastLoginAt),this.creationTime=Ll(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ah(r){const t=r.auth,n=await r.getIdToken(),s=await Fl(r,sh(t,{idToken:n}));At(s?.users.length,t,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?ET(o.providerUserInfo):[],f=Aw(r.providerData,u),m=r.isAnonymous,y=!(r.email&&o.passwordHash)&&!f?.length,g=m?y:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Am(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(r,T)}async function Sw(r){const t=ae(r);await ah(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Aw(r,t){return[...r.filter(s=>!t.some(o=>o.providerId===s.providerId)),...t]}function ET(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ww(r,t){const n=await vT(r,{},async()=>{const s=Jl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await TT(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:m,body:s};return r.emulatorConfig&&lr(r.emulatorConfig.host)&&(y.credentials="include"),_T.fetch()(f,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Rw(r,t){return po(r,"POST","/v2/accounts:revokeToken",np(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){At(t.idToken,"internal-error"),At(typeof t.idToken<"u","internal-error"),At(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Dv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){At(t.length!==0,"internal-error");const n=Dv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(At(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await ww(t,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new no;return s&&(At(typeof s=="string","internal-error",{appName:t}),f.refreshToken=s),o&&(At(typeof o=="string","internal-error",{appName:t}),f.accessToken=o),u&&(At(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new no,this.toJSON())}_performRefresh(){return tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(r,t){At(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Kn{constructor({uid:t,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new bw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Am(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const n=await Fl(this,this.stsTokenManager.getToken(this.auth,t));return At(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Tw(this,t)}reload(){return Sw(this)}_assign(t){this!==t&&(At(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Kn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await ah(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sn(this.auth.app))return Promise.reject(Gs(this.auth));const t=await this.getIdToken();return await Fl(this,vw(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,y=n._redirectEventId??void 0,g=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:S,emailVerified:A,isAnonymous:V,providerData:z,stsTokenManager:F}=n;At(S&&F,t,"internal-error");const U=no.fromJSON(this.name,F);At(typeof S=="string",t,"internal-error"),Ur(s,t.name),Ur(o,t.name),At(typeof A=="boolean",t,"internal-error"),At(typeof V=="boolean",t,"internal-error"),Ur(u,t.name),Ur(f,t.name),Ur(m,t.name),Ur(y,t.name),Ur(g,t.name),Ur(T,t.name);const tt=new Kn({uid:S,auth:t,email:o,emailVerified:A,displayName:s,isAnonymous:V,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:U,createdAt:g,lastLoginAt:T});return z&&Array.isArray(z)&&(tt.providerData=z.map(et=>({...et}))),y&&(tt._redirectEventId=y),tt}static async _fromIdTokenResponse(t,n,s=!1){const o=new no;o.updateFromServerResponse(n);const u=new Kn({uid:n.localId,auth:t,stsTokenManager:o,isAnonymous:s});return await ah(u),u}static async _fromGetAccountInfoResponse(t,n,s){const o=n.users[0];At(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?ET(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new no;m.updateFromIdToken(s);const y=new Kn({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Am(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(y,g),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=new Map;function er(r){sr(r instanceof Function,"Expected a class definition");let t=Ov.get(r);return t?(sr(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,Ov.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}bT.type="NONE";const Nv=bT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(r,t,n){return`firebase:${r}:${t}:${n}`}class io{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Qc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Qc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await sh(this.auth,{idToken:t}).catch(()=>{});return n?Kn._fromGetAccountInfoResponse(this.auth,n,t):null}return Kn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new io(er(Nv),t,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||er(Nv);const f=Qc(s,t.config.apiKey,t.name);let m=null;for(const g of n)try{const T=await g._get(f);if(T){let S;if(typeof T=="string"){const A=await sh(t,{idToken:T}).catch(()=>{});if(!A)break;S=await Kn._fromGetAccountInfoResponse(t,A,T)}else S=Kn._fromJSON(t,T);g!==u&&(m=S),u=g;break}}catch{}const y=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new io(u,t,s):(u=y[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new io(u,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(RT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ST(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(CT(t))return"Blackberry";if(xT(t))return"Webos";if(AT(t))return"Safari";if((t.includes("chrome/")||wT(t))&&!t.includes("edge/"))return"Chrome";if(IT(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function ST(r=en()){return/firefox\//i.test(r)}function AT(r=en()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function wT(r=en()){return/crios\//i.test(r)}function RT(r=en()){return/iemobile/i.test(r)}function IT(r=en()){return/android/i.test(r)}function CT(r=en()){return/blackberry/i.test(r)}function xT(r=en()){return/webos/i.test(r)}function rp(r=en()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Iw(r=en()){return rp(r)&&!!window.navigator?.standalone}function Cw(){return HA()&&document.documentMode===10}function DT(r=en()){return rp(r)||IT(r)||xT(r)||CT(r)||/windows phone/i.test(r)||RT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(r,t=[]){let n;switch(r){case"Browser":n=kv(en());break;case"Worker":n=`${kv(en())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Js}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=u=>new Promise((f,m)=>{try{const y=t(u);f(y)}catch(y){m(y)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dw(r,t={}){return po(r,"GET","/v2/passwordPolicy",np(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=6;class Nw{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Ow,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),o&&(n.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<t.length;o++)s=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(t,n,s,o){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mv(this),this.idTokenSubscription=new Mv(this),this.beforeStateQueue=new xw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=er(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await io.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await sh(this,{idToken:t}),s=await Kn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Sn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await ah(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=dw()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Sn(this.app))return Promise.reject(Gs(this));const n=t?ae(t):null;return n&&At(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&At(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Sn(this.app)?Promise.reject(Gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Sn(this.app)?Promise.reject(Gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(er(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Dw(this),n=new Nw(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Zl("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Rw(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&er(t)||this._popupRedirectResolver;At(n,this,"argument-error"),this.redirectPersistenceManager=await io.create(this,[er(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const y=t.addObserver(n,s,o);return()=>{f=!0,y()}}else{const y=t.addObserver(n);return()=>{f=!0,y()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=OT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&uw(`Error while retrieving App Check token: ${t.error}`),t?.token}}function wh(r){return ae(r)}class Mv{constructor(t){this.auth=t,this.observer=null,this.addObserver=WA(n=>this.observer=n)}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mw(r){sp=r}function Vw(r){return sp.loadJS(r)}function Pw(){return sp.gapiScript}function Lw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(r,t){const n=tu(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Ys(u,t??{}))return o;Ai(o,"already-initialized")}return n.initialize({options:t})}function Bw(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(er);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function zw(r,t,n){const s=wh(r);At(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const o=!1,u=NT(t),{host:f,port:m}=jw(t),y=m===null?"":`:${m}`,g={url:`${u}//${f}${y}/`},T=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){At(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),At(Ys(g,s.config.emulator)&&Ys(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,lr(f)?(bh(`${u}//${f}${y}`),Sh("Auth",!0)):qw()}function NT(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function jw(r){const t=NT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:Vv(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:Vv(f)}}}function Vv(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function qw(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return tr("not implemented")}_getIdTokenResponse(t){return tr("not implemented")}_linkToIdToken(t,n){return tr("not implemented")}_getReauthenticationResolver(t){return tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(r,t){return yw(r,"POST","/v1/accounts:signInWithIdp",np(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="http://localhost";class Ks extends kT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ks(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ai("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new Ks(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return ro(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,ro(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,ro(t,n)}buildRequest(){const t={requestUri:Hw,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Jl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends ap{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends nu{constructor(){super("facebook.com")}static credential(t){return Ks._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Br.credentialFromTaggedObject(t)}static credentialFromError(t){return Br.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Br.credential(t.oauthAccessToken)}catch{return null}}}Br.FACEBOOK_SIGN_IN_METHOD="facebook.com";Br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends nu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ks._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Ji.credentialFromTaggedObject(t)}static credentialFromError(t){return Ji.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Ji.credential(n,s)}catch{return null}}}Ji.GOOGLE_SIGN_IN_METHOD="google.com";Ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends nu{constructor(){super("github.com")}static credential(t){return Ks._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zr.credentialFromTaggedObject(t)}static credentialFromError(t){return zr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zr.credential(t.oauthAccessToken)}catch{return null}}}zr.GITHUB_SIGN_IN_METHOD="github.com";zr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends nu{constructor(){super("twitter.com")}static credential(t,n){return Ks._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return jr.credentialFromTaggedObject(t)}static credentialFromError(t){return jr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return jr.credential(n,s)}catch{return null}}}jr.TWITTER_SIGN_IN_METHOD="twitter.com";jr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,o=!1){const u=await Kn._fromIdTokenResponse(t,s,o),f=Pv(s);return new oo({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const o=Pv(s);return new oo({user:t,providerId:o,_tokenResponse:s,operationType:n})}}function Pv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends Ri{constructor(t,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,oh.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,o){return new oh(t,n,s,o)}}function MT(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?oh._fromErrorAndOperation(r,u,t,s):u})}async function Fw(r,t,n=!1){const s=await Fl(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return oo._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gw(r,t,n=!1){const{auth:s}=r;if(Sn(s.app))return Promise.reject(Gs(s));const o="reauthenticate";try{const u=await Fl(r,MT(s,o,t,r),n);At(u.idToken,s,"internal-error");const f=ip(u.idToken);At(f,s,"internal-error");const{sub:m}=f;return At(r.uid===m,s,"user-mismatch"),oo._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Ai(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $w(r,t,n=!1){if(Sn(r.app))return Promise.reject(Gs(r));const s="signIn",o=await MT(r,s,t),u=await oo._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}function Qw(r,t,n,s){return ae(r).onIdTokenChanged(t,n,s)}function Yw(r,t,n){return ae(r).beforeAuthStateChanged(t,n)}function Kw(r,t,n,s){return ae(r).onAuthStateChanged(t,n,s)}function Xw(r){return ae(r).signOut()}const lh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lh,"1"),this.storage.removeItem(lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=1e3,Zw=10;class PT extends VT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&t(n,o,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,m,y)=>{this.notifyListeners(f,y)});return}const s=t.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);Cw()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Zw):o()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},Ww)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}PT.type="LOCAL";const Jw=PT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT extends VT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}LT.type="SESSION";const UT=LT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(o=>o.isListeningto(t));if(n)return n;const s=new Rh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async g=>g(n.origin,u)),y=await tR(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:y})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,y)=>{const g=op("",20);o.port1.start();const T=setTimeout(()=>{y(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(S){const A=S;if(A.data.eventId===g)switch(A.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(A.data.response);break;default:clearTimeout(T),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:g,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function nR(r){vi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function iR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rR(){return navigator?.serviceWorker?.controller||null}function sR(){return BT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="firebaseLocalStorageDb",aR=1,uh="firebaseLocalStorage",jT="fbase_key";class iu{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ih(r,t){return r.transaction([uh],t?"readwrite":"readonly").objectStore(uh)}function oR(){const r=indexedDB.deleteDatabase(zT);return new iu(r).toPromise()}function wm(){const r=indexedDB.open(zT,aR);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(uh,{keyPath:jT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(uh)?t(s):(s.close(),await oR(),t(await wm()))})})}async function Lv(r,t,n){const s=Ih(r,!0).put({[jT]:t,value:n});return new iu(s).toPromise()}async function lR(r,t){const n=Ih(r,!1).get(t),s=await new iu(n).toPromise();return s===void 0?null:s.value}function Uv(r,t){const n=Ih(r,!0).delete(t);return new iu(n).toPromise()}const uR=800,cR=3;class qT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wm(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>cR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rh._getInstance(sR()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await iR(),!this.activeServiceWorker)return;this.sender=new eR(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||rR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await wm();return await Lv(t,lh,"1"),await Uv(t,lh),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Lv(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>lR(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Uv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=Ih(o,!1).getAll();return new iu(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qT.type="LOCAL";const hR=qT;new eu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(r,t){return t?er(t):(At(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp extends kT{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ro(t,this._buildIdpRequest())}_linkToIdToken(t,n){return ro(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return ro(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function fR(r){return $w(r.auth,new lp(r),r.bypassAuthState)}function dR(r){const{auth:t,user:n}=r;return At(n,t,"internal-error"),Gw(n,new lp(r),r.bypassAuthState)}async function mR(r){const{auth:t,user:n}=r;return At(n,t,"internal-error"),Fw(n,new lp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(t,n,s,o,u=!1){this.auth=t,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=t;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(y))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return fR;case"linkViaPopup":case"linkViaRedirect":return mR;case"reauthViaPopup":case"reauthViaRedirect":return dR;default:Ai(this.auth,"internal-error")}}resolve(t){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=new eu(2e3,1e4);async function gR(r,t,n){if(Sn(r.app))return Promise.reject(Xn(r,"operation-not-supported-in-this-environment"));const s=wh(r);cw(r,t,ap);const o=HT(s,n);return new Hs(s,"signInViaPopup",t,o).executeNotNull()}class Hs extends FT{constructor(t,n,s,o,u){super(t,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Hs.currentPopupAction&&Hs.currentPopupAction.cancel(),Hs.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return At(t,this.auth,"internal-error"),t}async onExecution(){sr(this.filter.length===1,"Popup operations only handle one event");const t=op();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hs.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,pR.get())};t()}}Hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="pendingRedirect",Yc=new Map;class _R extends FT{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Yc.get(this.auth._key());if(!t){try{const s=await vR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Yc.set(this.auth._key(),t)}return this.bypassAuthState||Yc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vR(r,t){const n=bR(t),s=ER(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function TR(r,t){Yc.set(r._key(),t)}function ER(r){return er(r._redirectPersistence)}function bR(r){return Qc(yR,r.config.apiKey,r.name)}async function SR(r,t,n=!1){if(Sn(r.app))return Promise.reject(Gs(r));const s=wh(r),o=HT(s,t),f=await new _R(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=600*1e3;class wR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!RR(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!GT(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Xn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=AR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bv(t))}saveEventToCache(t){this.cachedEventUids.add(Bv(t)),this.lastProcessedEventTime=Date.now()}}function Bv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function GT({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function RR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(r,t={}){return po(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xR=/^https?/;async function DR(r){if(r.config.emulator)return;const{authorizedDomains:t}=await IR(r);for(const n of t)try{if(OR(n))return}catch{}Ai(r,"unauthorized-domain")}function OR(r){const t=Sm(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!xR.test(n))return!1;if(CR.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new eu(3e4,6e4);function zv(){const r=vi().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function kR(r){return new Promise((t,n)=>{function s(){zv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{zv(),n(Xn(r,"network-request-failed"))},timeout:NR.get()})}if(vi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(vi().gapi?.load)s();else{const o=Lw("iframefcb");return vi()[o]=()=>{gapi.load?s():n(Xn(r,"network-request-failed"))},Vw(`${Pw()}?onload=${o}`).catch(u=>n(u))}}).catch(t=>{throw Kc=null,t})}let Kc=null;function MR(r){return Kc=Kc||kR(r),Kc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new eu(5e3,15e3),PR="__/auth/iframe",LR="emulator/auth/iframe",UR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zR(r){const t=r.config;At(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?ep(t,LR):`https://${r.config.authDomain}/${PR}`,s={apiKey:t.apiKey,appName:r.name,v:Js},o=BR.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Jl(s).slice(1)}`}async function jR(r){const t=await MR(r),n=vi().gapi;return At(n,r,"internal-error"),t.open({where:document.body,url:zR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UR,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Xn(r,"network-request-failed"),m=vi().setTimeout(()=>{u(f)},VR.get());function y(){vi().clearTimeout(m),o(s)}s.ping(y).then(y,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HR=500,FR=600,GR="_blank",$R="http://localhost";class jv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QR(r,t,n,s=HR,o=FR){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const y={...qR,width:s.toString(),height:o.toString(),top:u,left:f},g=en().toLowerCase();n&&(m=wT(g)?GR:n),ST(g)&&(t=t||$R,y.scrollbars="yes");const T=Object.entries(y).reduce((A,[V,z])=>`${A}${V}=${z},`,"");if(Iw(g)&&m!=="_self")return YR(t||"",m),new jv(null);const S=window.open(t||"",m,T);At(S,r,"popup-blocked");try{S.focus()}catch{}return new jv(S)}function YR(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="__/auth/handler",XR="emulator/auth/handler",WR=encodeURIComponent("fac");async function qv(r,t,n,s,o,u){At(r.config.authDomain,r,"auth-domain-config-required"),At(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Js,eventId:o};if(t instanceof ap){t.setDefaultLanguage(r.languageCode),f.providerId=t.providerId||"",XA(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,S]of Object.entries({}))f[T]=S}if(t instanceof nu){const T=t.getScopes().filter(S=>S!=="");T.length>0&&(f.scopes=T.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const y=await r._getAppCheckToken(),g=y?`#${WR}=${encodeURIComponent(y)}`:"";return`${ZR(r)}?${Jl(m).slice(1)}${g}`}function ZR({config:r}){return r.emulator?ep(r,XR):`https://${r.authDomain}/${KR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="webStorageSupport";class JR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UT,this._completeRedirectFn=SR,this._overrideRedirectResult=TR}async _openPopup(t,n,s,o){sr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await qv(t,n,s,Sm(),o);return QR(t,u,op())}async _openRedirect(t,n,s,o){await this._originValidation(t);const u=await qv(t,n,s,Sm(),o);return nR(u),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(sr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await jR(t),s=new wR(t);return n.register("authEvent",o=>(At(o?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(am,{type:am},o=>{const u=o?.[0]?.[am];u!==void 0&&n(!!u),Ai(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DR(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return DT()||AT()||rp()}}const tI=JR;var Hv="@firebase/auth",Fv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iI(r){Xr(new ir("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;At(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OT(r)},g=new kw(s,o,u,y);return Bw(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Xr(new ir("auth-internal",t=>{const n=wh(t.getProvider("auth").getImmediate());return(s=>new eI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(Hv,Fv,nI(r)),zn(Hv,Fv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=300,sI=uT("authIdTokenMaxAge")||rI;let Gv=null;const aI=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>sI)return;const o=n?.token;Gv!==o&&(Gv=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function oI(r=Ah()){const t=tu(r,"auth");if(t.isInitialized())return t.getImmediate();const n=Uw(r,{popupRedirectResolver:tI,persistence:[hR,Jw,UT]}),s=uT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=aI(u.toString());Yw(n,f,()=>f(n.currentUser)),Qw(n,m=>f(m))}}const o=oT("auth");return o&&zw(n,`http://${o}`),n}function lI(){return document.getElementsByTagName("head")?.[0]??document}Mw({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=o=>{const u=Xn("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",lI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iI("Browser");var uI="firebase",cI="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(uI,cI,"app");var $v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qr,$T;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(k,w){function I(){}I.prototype=w.prototype,k.D=w.prototype,k.prototype=new I,k.prototype.constructor=k,k.C=function(M,O,P){for(var C=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)C[pe-2]=arguments[pe];return w.prototype[O].apply(M,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,w,I){I||(I=0);var M=Array(16);if(typeof w=="string")for(var O=0;16>O;++O)M[O]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(O=0;16>O;++O)M[O]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=k.g[0],I=k.g[1],O=k.g[2];var P=k.g[3],C=w+(P^I&(O^P))+M[0]+3614090360&4294967295;w=I+(C<<7&4294967295|C>>>25),C=P+(O^w&(I^O))+M[1]+3905402710&4294967295,P=w+(C<<12&4294967295|C>>>20),C=O+(I^P&(w^I))+M[2]+606105819&4294967295,O=P+(C<<17&4294967295|C>>>15),C=I+(w^O&(P^w))+M[3]+3250441966&4294967295,I=O+(C<<22&4294967295|C>>>10),C=w+(P^I&(O^P))+M[4]+4118548399&4294967295,w=I+(C<<7&4294967295|C>>>25),C=P+(O^w&(I^O))+M[5]+1200080426&4294967295,P=w+(C<<12&4294967295|C>>>20),C=O+(I^P&(w^I))+M[6]+2821735955&4294967295,O=P+(C<<17&4294967295|C>>>15),C=I+(w^O&(P^w))+M[7]+4249261313&4294967295,I=O+(C<<22&4294967295|C>>>10),C=w+(P^I&(O^P))+M[8]+1770035416&4294967295,w=I+(C<<7&4294967295|C>>>25),C=P+(O^w&(I^O))+M[9]+2336552879&4294967295,P=w+(C<<12&4294967295|C>>>20),C=O+(I^P&(w^I))+M[10]+4294925233&4294967295,O=P+(C<<17&4294967295|C>>>15),C=I+(w^O&(P^w))+M[11]+2304563134&4294967295,I=O+(C<<22&4294967295|C>>>10),C=w+(P^I&(O^P))+M[12]+1804603682&4294967295,w=I+(C<<7&4294967295|C>>>25),C=P+(O^w&(I^O))+M[13]+4254626195&4294967295,P=w+(C<<12&4294967295|C>>>20),C=O+(I^P&(w^I))+M[14]+2792965006&4294967295,O=P+(C<<17&4294967295|C>>>15),C=I+(w^O&(P^w))+M[15]+1236535329&4294967295,I=O+(C<<22&4294967295|C>>>10),C=w+(O^P&(I^O))+M[1]+4129170786&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^O&(w^I))+M[6]+3225465664&4294967295,P=w+(C<<9&4294967295|C>>>23),C=O+(w^I&(P^w))+M[11]+643717713&4294967295,O=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(O^P))+M[0]+3921069994&4294967295,I=O+(C<<20&4294967295|C>>>12),C=w+(O^P&(I^O))+M[5]+3593408605&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^O&(w^I))+M[10]+38016083&4294967295,P=w+(C<<9&4294967295|C>>>23),C=O+(w^I&(P^w))+M[15]+3634488961&4294967295,O=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(O^P))+M[4]+3889429448&4294967295,I=O+(C<<20&4294967295|C>>>12),C=w+(O^P&(I^O))+M[9]+568446438&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^O&(w^I))+M[14]+3275163606&4294967295,P=w+(C<<9&4294967295|C>>>23),C=O+(w^I&(P^w))+M[3]+4107603335&4294967295,O=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(O^P))+M[8]+1163531501&4294967295,I=O+(C<<20&4294967295|C>>>12),C=w+(O^P&(I^O))+M[13]+2850285829&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^O&(w^I))+M[2]+4243563512&4294967295,P=w+(C<<9&4294967295|C>>>23),C=O+(w^I&(P^w))+M[7]+1735328473&4294967295,O=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(O^P))+M[12]+2368359562&4294967295,I=O+(C<<20&4294967295|C>>>12),C=w+(I^O^P)+M[5]+4294588738&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^O)+M[8]+2272392833&4294967295,P=w+(C<<11&4294967295|C>>>21),C=O+(P^w^I)+M[11]+1839030562&4294967295,O=P+(C<<16&4294967295|C>>>16),C=I+(O^P^w)+M[14]+4259657740&4294967295,I=O+(C<<23&4294967295|C>>>9),C=w+(I^O^P)+M[1]+2763975236&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^O)+M[4]+1272893353&4294967295,P=w+(C<<11&4294967295|C>>>21),C=O+(P^w^I)+M[7]+4139469664&4294967295,O=P+(C<<16&4294967295|C>>>16),C=I+(O^P^w)+M[10]+3200236656&4294967295,I=O+(C<<23&4294967295|C>>>9),C=w+(I^O^P)+M[13]+681279174&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^O)+M[0]+3936430074&4294967295,P=w+(C<<11&4294967295|C>>>21),C=O+(P^w^I)+M[3]+3572445317&4294967295,O=P+(C<<16&4294967295|C>>>16),C=I+(O^P^w)+M[6]+76029189&4294967295,I=O+(C<<23&4294967295|C>>>9),C=w+(I^O^P)+M[9]+3654602809&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^O)+M[12]+3873151461&4294967295,P=w+(C<<11&4294967295|C>>>21),C=O+(P^w^I)+M[15]+530742520&4294967295,O=P+(C<<16&4294967295|C>>>16),C=I+(O^P^w)+M[2]+3299628645&4294967295,I=O+(C<<23&4294967295|C>>>9),C=w+(O^(I|~P))+M[0]+4096336452&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~O))+M[7]+1126891415&4294967295,P=w+(C<<10&4294967295|C>>>22),C=O+(w^(P|~I))+M[14]+2878612391&4294967295,O=P+(C<<15&4294967295|C>>>17),C=I+(P^(O|~w))+M[5]+4237533241&4294967295,I=O+(C<<21&4294967295|C>>>11),C=w+(O^(I|~P))+M[12]+1700485571&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~O))+M[3]+2399980690&4294967295,P=w+(C<<10&4294967295|C>>>22),C=O+(w^(P|~I))+M[10]+4293915773&4294967295,O=P+(C<<15&4294967295|C>>>17),C=I+(P^(O|~w))+M[1]+2240044497&4294967295,I=O+(C<<21&4294967295|C>>>11),C=w+(O^(I|~P))+M[8]+1873313359&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~O))+M[15]+4264355552&4294967295,P=w+(C<<10&4294967295|C>>>22),C=O+(w^(P|~I))+M[6]+2734768916&4294967295,O=P+(C<<15&4294967295|C>>>17),C=I+(P^(O|~w))+M[13]+1309151649&4294967295,I=O+(C<<21&4294967295|C>>>11),C=w+(O^(I|~P))+M[4]+4149444226&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~O))+M[11]+3174756917&4294967295,P=w+(C<<10&4294967295|C>>>22),C=O+(w^(P|~I))+M[2]+718787259&4294967295,O=P+(C<<15&4294967295|C>>>17),C=I+(P^(O|~w))+M[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+P&4294967295}s.prototype.u=function(k,w){w===void 0&&(w=k.length);for(var I=w-this.blockSize,M=this.B,O=this.h,P=0;P<w;){if(O==0)for(;P<=I;)o(this,k,P),P+=this.blockSize;if(typeof k=="string"){for(;P<w;)if(M[O++]=k.charCodeAt(P++),O==this.blockSize){o(this,M),O=0;break}}else for(;P<w;)if(M[O++]=k[P++],O==this.blockSize){o(this,M),O=0;break}}this.h=O,this.o+=w},s.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;var I=8*this.o;for(w=k.length-8;w<k.length;++w)k[w]=I&255,I/=256;for(this.u(k),k=Array(16),w=I=0;4>w;++w)for(var M=0;32>M;M+=8)k[I++]=this.g[w]>>>M&255;return k};function u(k,w){var I=m;return Object.prototype.hasOwnProperty.call(I,k)?I[k]:I[k]=w(k)}function f(k,w){this.h=w;for(var I=[],M=!0,O=k.length-1;0<=O;O--){var P=k[O]|0;M&&P==w||(I[O]=P,M=!1)}this.g=I}var m={};function y(k){return-128<=k&&128>k?u(k,function(w){return new f([w|0],0>w?-1:0)}):new f([k|0],0>k?-1:0)}function g(k){if(isNaN(k)||!isFinite(k))return S;if(0>k)return U(g(-k));for(var w=[],I=1,M=0;k>=I;M++)w[M]=k/I|0,I*=4294967296;return new f(w,0)}function T(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return U(T(k.substring(1),w));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=g(Math.pow(w,8)),M=S,O=0;O<k.length;O+=8){var P=Math.min(8,k.length-O),C=parseInt(k.substring(O,O+P),w);8>P?(P=g(Math.pow(w,P)),M=M.j(P).add(g(C))):(M=M.j(I),M=M.add(g(C)))}return M}var S=y(0),A=y(1),V=y(16777216);r=f.prototype,r.m=function(){if(F(this))return-U(this).m();for(var k=0,w=1,I=0;I<this.g.length;I++){var M=this.i(I);k+=(0<=M?M:4294967296+M)*w,w*=4294967296}return k},r.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(z(this))return"0";if(F(this))return"-"+U(this).toString(k);for(var w=g(Math.pow(k,6)),I=this,M="";;){var O=yt(I,w).g;I=tt(I,O.j(w));var P=((0<I.g.length?I.g[0]:I.h)>>>0).toString(k);if(I=O,z(I))return P+M;for(;6>P.length;)P="0"+P;M=P+M}},r.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function z(k){if(k.h!=0)return!1;for(var w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function F(k){return k.h==-1}r.l=function(k){return k=tt(this,k),F(k)?-1:z(k)?0:1};function U(k){for(var w=k.g.length,I=[],M=0;M<w;M++)I[M]=~k.g[M];return new f(I,~k.h).add(A)}r.abs=function(){return F(this)?U(this):this},r.add=function(k){for(var w=Math.max(this.g.length,k.g.length),I=[],M=0,O=0;O<=w;O++){var P=M+(this.i(O)&65535)+(k.i(O)&65535),C=(P>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);M=C>>>16,P&=65535,C&=65535,I[O]=C<<16|P}return new f(I,I[I.length-1]&-2147483648?-1:0)};function tt(k,w){return k.add(U(w))}r.j=function(k){if(z(this)||z(k))return S;if(F(this))return F(k)?U(this).j(U(k)):U(U(this).j(k));if(F(k))return U(this.j(U(k)));if(0>this.l(V)&&0>k.l(V))return g(this.m()*k.m());for(var w=this.g.length+k.g.length,I=[],M=0;M<2*w;M++)I[M]=0;for(M=0;M<this.g.length;M++)for(var O=0;O<k.g.length;O++){var P=this.i(M)>>>16,C=this.i(M)&65535,pe=k.i(O)>>>16,ne=k.i(O)&65535;I[2*M+2*O]+=C*ne,et(I,2*M+2*O),I[2*M+2*O+1]+=P*ne,et(I,2*M+2*O+1),I[2*M+2*O+1]+=C*pe,et(I,2*M+2*O+1),I[2*M+2*O+2]+=P*pe,et(I,2*M+2*O+2)}for(M=0;M<w;M++)I[M]=I[2*M+1]<<16|I[2*M];for(M=w;M<2*w;M++)I[M]=0;return new f(I,0)};function et(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function nt(k,w){this.g=k,this.h=w}function yt(k,w){if(z(w))throw Error("division by zero");if(z(k))return new nt(S,S);if(F(k))return w=yt(U(k),w),new nt(U(w.g),U(w.h));if(F(w))return w=yt(k,U(w)),new nt(U(w.g),w.h);if(30<k.g.length){if(F(k)||F(w))throw Error("slowDivide_ only works with positive integers.");for(var I=A,M=w;0>=M.l(k);)I=ft(I),M=ft(M);var O=_t(I,1),P=_t(M,1);for(M=_t(M,2),I=_t(I,2);!z(M);){var C=P.add(M);0>=C.l(k)&&(O=O.add(I),P=C),M=_t(M,1),I=_t(I,1)}return w=tt(k,O.j(w)),new nt(O,w)}for(O=S;0<=k.l(w);){for(I=Math.max(1,Math.floor(k.m()/w.m())),M=Math.ceil(Math.log(I)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),P=g(I),C=P.j(w);F(C)||0<C.l(k);)I-=M,P=g(I),C=P.j(w);z(P)&&(P=A),O=O.add(P),k=tt(k,C)}return new nt(O,k)}r.A=function(k){return yt(this,k).h},r.and=function(k){for(var w=Math.max(this.g.length,k.g.length),I=[],M=0;M<w;M++)I[M]=this.i(M)&k.i(M);return new f(I,this.h&k.h)},r.or=function(k){for(var w=Math.max(this.g.length,k.g.length),I=[],M=0;M<w;M++)I[M]=this.i(M)|k.i(M);return new f(I,this.h|k.h)},r.xor=function(k){for(var w=Math.max(this.g.length,k.g.length),I=[],M=0;M<w;M++)I[M]=this.i(M)^k.i(M);return new f(I,this.h^k.h)};function ft(k){for(var w=k.g.length+1,I=[],M=0;M<w;M++)I[M]=k.i(M)<<1|k.i(M-1)>>>31;return new f(I,k.h)}function _t(k,w){var I=w>>5;w%=32;for(var M=k.g.length-I,O=[],P=0;P<M;P++)O[P]=0<w?k.i(P+I)>>>w|k.i(P+I+1)<<32-w:k.i(P+I);return new f(O,k.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,$T=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=T,Qr=f}).apply(typeof $v<"u"?$v:typeof self<"u"?self:typeof window<"u"?window:{});var Vc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QT,Nl,YT,Xc,Rm,KT,XT,WT;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,_){return c==Array.prototype||c==Object.prototype||(c[p]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vc=="object"&&Vc];for(var p=0;p<c.length;++p){var _=c[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,p){if(p)t:{var _=s;c=c.split(".");for(var b=0;b<c.length-1;b++){var B=c[b];if(!(B in _))break t;_=_[B]}c=c[c.length-1],b=_[c],p=p(b),p!=b&&p!=null&&t(_,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var _=0,b=!1,B={next:function(){if(!b&&_<c.length){var $=_++;return{value:p($,c[$]),done:!1}}return b=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function y(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function g(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function T(c,p,_){return c.call.apply(c.bind,arguments)}function S(c,p,_){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,b),c.apply(p,B)}}return function(){return c.apply(p,arguments)}}function A(c,p,_){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:S,A.apply(null,arguments)}function V(c,p){var _=Array.prototype.slice.call(arguments,1);return function(){var b=_.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function z(c,p){function _(){}_.prototype=p.prototype,c.aa=p.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(b,B,$){for(var rt=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)rt[Lt-2]=arguments[Lt];return p.prototype[B].apply(b,rt)}}function F(c){const p=c.length;if(0<p){const _=Array(p);for(let b=0;b<p;b++)_[b]=c[b];return _}return[]}function U(c,p){for(let _=1;_<arguments.length;_++){const b=arguments[_];if(y(b)){const B=c.length||0,$=b.length||0;c.length=B+$;for(let rt=0;rt<$;rt++)c[B+rt]=b[rt]}else c.push(b)}}class tt{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function et(c){return/^[\s\xa0]*$/.test(c)}function nt(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function yt(c){return yt[" "](c),c}yt[" "]=function(){};var ft=nt().indexOf("Gecko")!=-1&&!(nt().toLowerCase().indexOf("webkit")!=-1&&nt().indexOf("Edge")==-1)&&!(nt().indexOf("Trident")!=-1||nt().indexOf("MSIE")!=-1)&&nt().indexOf("Edge")==-1;function _t(c,p,_){for(const b in c)p.call(_,c[b],b,c)}function k(c,p){for(const _ in c)p.call(void 0,c[_],_,c)}function w(c){const p={};for(const _ in c)p[_]=c[_];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(c,p){let _,b;for(let B=1;B<arguments.length;B++){b=arguments[B];for(_ in b)c[_]=b[_];for(let $=0;$<I.length;$++)_=I[$],Object.prototype.hasOwnProperty.call(b,_)&&(c[_]=b[_])}}function O(c){var p=1;c=c.split(":");const _=[];for(;0<p&&c.length;)_.push(c.shift()),p--;return c.length&&_.push(c.join(":")),_}function P(c){m.setTimeout(()=>{throw c},0)}function C(){var c=kt;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class pe{constructor(){this.h=this.g=null}add(p,_){const b=ne.get();b.set(p,_),this.h?this.h.next=b:this.g=b,this.h=b}}var ne=new tt(()=>new Q,c=>c.reset());class Q{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let at,dt=!1,kt=new pe,D=()=>{const c=m.Promise.resolve(void 0);at=()=>{c.then(J)}};var J=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(_){P(_)}var p=ne;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}dt=!1};function ot(){this.s=this.s,this.C=this.C}ot.prototype.s=!1,ot.prototype.ma=function(){this.s||(this.s=!0,this.N())},ot.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function it(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var pt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,p),m.removeEventListener("test",_,p)}catch{}return c}();function Ct(c,p){if(it.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(ft){t:{try{yt(p.nodeName);var B=!0;break t}catch{}B=!1}B||(p=null)}}else _=="mouseover"?p=c.fromElement:_=="mouseout"&&(p=c.toElement);this.relatedTarget=p,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:bt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ct.aa.h.call(this)}}z(Ct,it);var bt={2:"touch",3:"pen",4:"mouse"};Ct.prototype.h=function(){Ct.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),Jt=0;function Jn(c,p,_,b,B){this.listener=c,this.proxy=null,this.src=p,this.type=_,this.capture=!!b,this.ha=B,this.key=++Jt,this.da=this.fa=!1}function ur(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ii(c){this.src=c,this.g={},this.h=0}Ii.prototype.add=function(c,p,_,b,B){var $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);var rt=as(c,p,b,B);return-1<rt?(p=c[rt],_||(p.fa=!1)):(p=new Jn(p,this.src,$,!!b,B),p.fa=_,c.push(p)),p};function ss(c,p){var _=p.type;if(_ in c.g){var b=c.g[_],B=Array.prototype.indexOf.call(b,p,void 0),$;($=0<=B)&&Array.prototype.splice.call(b,B,1),$&&(ur(p),c.g[_].length==0&&(delete c.g[_],c.h--))}}function as(c,p,_,b){for(var B=0;B<c.length;++B){var $=c[B];if(!$.da&&$.listener==p&&$.capture==!!_&&$.ha==b)return B}return-1}var os="closure_lm_"+(1e6*Math.random()|0),Eo={};function cu(c,p,_,b,B){if(Array.isArray(p)){for(var $=0;$<p.length;$++)cu(c,p[$],_,b,B);return null}return _=hu(_),c&&c[Me]?c.K(p,_,g(b)?!!b.capture:!1,B):Rn(c,p,_,!1,b,B)}function Rn(c,p,_,b,B,$){if(!p)throw Error("Invalid event type");var rt=g(B)?!!B.capture:!!B,Lt=sa(c);if(Lt||(c[os]=Lt=new Ii(c)),_=Lt.add(p,_,b,rt,$),_.proxy)return _;if(b=Qh(),_.proxy=b,b.src=c,b.listener=_,c.addEventListener)pt||(B=rt),B===void 0&&(B=!1),c.addEventListener(p.toString(),b,B);else if(c.attachEvent)c.attachEvent(ls(p.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Qh(){function c(_){return p.call(c.src,c.listener,_)}const p=Yh;return c}function bo(c,p,_,b,B){if(Array.isArray(p))for(var $=0;$<p.length;$++)bo(c,p[$],_,b,B);else b=g(b)?!!b.capture:!!b,_=hu(_),c&&c[Me]?(c=c.i,p=String(p).toString(),p in c.g&&($=c.g[p],_=as($,_,b,B),-1<_&&(ur($[_]),Array.prototype.splice.call($,_,1),$.length==0&&(delete c.g[p],c.h--)))):c&&(c=sa(c))&&(p=c.g[p.toString()],c=-1,p&&(c=as(p,_,b,B)),(_=-1<c?p[c]:null)&&ra(_))}function ra(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Me])ss(p.i,c);else{var _=c.type,b=c.proxy;p.removeEventListener?p.removeEventListener(_,b,c.capture):p.detachEvent?p.detachEvent(ls(_),b):p.addListener&&p.removeListener&&p.removeListener(b),(_=sa(p))?(ss(_,c),_.h==0&&(_.src=null,p[os]=null)):ur(c)}}}function ls(c){return c in Eo?Eo[c]:Eo[c]="on"+c}function Yh(c,p){if(c.da)c=!0;else{p=new Ct(p,this);var _=c.listener,b=c.ha||c.src;c.fa&&ra(c),c=_.call(b,p)}return c}function sa(c){return c=c[os],c instanceof Ii?c:null}var So="__closure_events_fn_"+(1e9*Math.random()>>>0);function hu(c){return typeof c=="function"?c:(c[So]||(c[So]=function(p){return c.handleEvent(p)}),c[So])}function ce(){ot.call(this),this.i=new Ii(this),this.M=this,this.F=null}z(ce,ot),ce.prototype[Me]=!0,ce.prototype.removeEventListener=function(c,p,_,b){bo(this,c,p,_,b)};function Gt(c,p){var _,b=c.F;if(b)for(_=[];b;b=b.F)_.push(b);if(c=c.M,b=p.type||p,typeof p=="string")p=new it(p,c);else if(p instanceof it)p.target=p.target||c;else{var B=p;p=new it(b,c),M(p,B)}if(B=!0,_)for(var $=_.length-1;0<=$;$--){var rt=p.g=_[$];B=dn(rt,b,!0,p)&&B}if(rt=p.g=c,B=dn(rt,b,!0,p)&&B,B=dn(rt,b,!1,p)&&B,_)for($=0;$<_.length;$++)rt=p.g=_[$],B=dn(rt,b,!1,p)&&B}ce.prototype.N=function(){if(ce.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var _=c.g[p],b=0;b<_.length;b++)ur(_[b]);delete c.g[p],c.h--}}this.F=null},ce.prototype.K=function(c,p,_,b){return this.i.add(String(c),p,!1,_,b)},ce.prototype.L=function(c,p,_,b){return this.i.add(String(c),p,!0,_,b)};function dn(c,p,_,b){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var B=!0,$=0;$<p.length;++$){var rt=p[$];if(rt&&!rt.da&&rt.capture==_){var Lt=rt.listener,xe=rt.ha||rt.src;rt.fa&&ss(c.i,rt),B=Lt.call(xe,b)!==!1&&B}}return B&&!b.defaultPrevented}function Ke(c,p,_){if(typeof c=="function")_&&(c=A(c,_));else if(c&&typeof c.handleEvent=="function")c=A(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function fu(c){c.g=Ke(()=>{c.g=null,c.i&&(c.i=!1,fu(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class Kh extends ot{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:fu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function us(c){ot.call(this),this.h=c,this.g={}}z(us,ot);var cs=[];function hs(c){_t(c.g,function(p,_){this.g.hasOwnProperty(_)&&ra(p)},c),c.g={}}us.prototype.N=function(){us.aa.N.call(this),hs(this)},us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qn=m.JSON.stringify,aa=m.JSON.parse,fs=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Ao(){}Ao.prototype.h=null;function wo(c){return c.h||(c.h=c.i())}function Ro(){}var Ci={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xi(){it.call(this,"d")}z(xi,it);function Io(){it.call(this,"c")}z(Io,it);var ti={},Co=null;function cr(){return Co=Co||new ce}ti.La="serverreachability";function oa(c){it.call(this,ti.La,c)}z(oa,it);function hr(c){const p=cr();Gt(p,new oa(p))}ti.STAT_EVENT="statevent";function du(c,p){it.call(this,ti.STAT_EVENT,c),this.stat=p}z(du,it);function re(c){const p=cr();Gt(p,new du(p,c))}ti.Ma="timingevent";function Ce(c,p){it.call(this,ti.Ma,c),this.size=p}z(Ce,it);function Ee(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function In(){this.g=!0}In.prototype.xa=function(){this.g=!1};function xo(c,p,_,b,B,$){c.info(function(){if(c.g)if($)for(var rt="",Lt=$.split("&"),xe=0;xe<Lt.length;xe++){var Ut=Lt[xe].split("=");if(1<Ut.length){var Pe=Ut[0];Ut=Ut[1];var De=Pe.split("_");rt=2<=De.length&&De[1]=="type"?rt+(Pe+"="+Ut+"&"):rt+(Pe+"=redacted&")}}else rt=null;else rt=$;return"XMLHTTP REQ ("+b+") [attempt "+B+"]: "+p+`
`+_+`
`+rt})}function Xh(c,p,_,b,B,$,rt){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+B+"]: "+p+`
`+_+`
`+$+" "+rt})}function fr(c,p,_,b){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+ds(c,_)+(b?" "+b:"")})}function mu(c,p){c.info(function(){return"TIMEOUT: "+p})}In.prototype.info=function(){};function ds(c,p){if(!c.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var b=_[c];if(!(2>b.length)){var B=b[1];if(Array.isArray(B)&&!(1>B.length)){var $=B[0];if($!="noop"&&$!="stop"&&$!="close")for(var rt=1;rt<B.length;rt++)B[rt]=""}}}}return qn(_)}catch{return p}}var dr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Di={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ei;function ni(){}z(ni,Ao),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},ei=new ni;function nn(c,p,_,b){this.j=c,this.i=p,this.l=_,this.R=b||1,this.U=new us(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ge}function ge(){this.i=null,this.g="",this.h=!1}var Do={},la={};function Hn(c,p,_){c.L=1,c.v=_s(mn(p)),c.m=_,c.P=!0,Oi(c,null)}function Oi(c,p){c.F=Date.now(),ms(c),c.A=mn(c.v);var _=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),Po(_.i,"t",b),c.C=0,_=c.j.J,c.h=new ge,c.g=Du(c.j,_?p:null,!c.m),0<c.O&&(c.M=new Kh(A(c.Y,c,c.g),c.O)),p=c.U,_=c.g,b=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(cs[0]=B.toString()),B=cs);for(var $=0;$<B.length;$++){var rt=cu(_,B[$],b||p.handleEvent,!1,p.h||p);if(!rt)break;p.g[rt.key]=rt}p=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),hr(),xo(c.i,c.u,c.A,c.l,c.R,c.m)}nn.prototype.ca=function(c){c=c.target;const p=this.M;p&&On(c)==3?p.j():this.Y(c)},nn.prototype.Y=function(c){try{if(c==this.g)t:{const De=On(this.g);var p=this.g.Ba();const Bi=this.g.Z();if(!(3>De)&&(De!=3||this.g&&(this.h.h||this.g.oa()||bu(this.g)))){this.J||De!=4||p==7||(p==8||0>=Bi?hr(3):hr(2)),mr(this);var _=this.g.Z();this.X=_;e:if(pu(this)){var b=bu(this.g);c="";var B=b.length,$=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){je(this),ii(this);var rt="";break e}this.h.i=new m.TextDecoder}for(p=0;p<B;p++)this.h.h=!0,c+=this.h.i.decode(b[p],{stream:!($&&p==B-1)});b.length=0,this.h.g+=c,this.C=0,rt=this.h.g}else rt=this.g.oa();if(this.o=_==200,Xh(this.i,this.u,this.A,this.l,this.R,De,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Lt,xe=this.g;if((Lt=xe.g?xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!et(Lt)){var Ut=Lt;break e}}Ut=null}if(_=Ut)fr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ps(this,_);else{this.o=!1,this.s=3,re(12),je(this),ii(this);break t}}if(this.P){_=!0;let qe;for(;!this.J&&this.C<rt.length;)if(qe=gu(this,rt),qe==la){De==4&&(this.s=4,re(14),_=!1),fr(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==Do){this.s=4,re(15),fr(this.i,this.l,rt,"[Invalid Chunk]"),_=!1;break}else fr(this.i,this.l,qe,null),ps(this,qe);if(pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||rt.length!=0||this.h.h||(this.s=1,re(16),_=!1),this.o=this.o&&_,!_)fr(this.i,this.l,rt,"[Invalid Chunked Response]"),je(this),ii(this);else if(0<rt.length&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.ba&&!Pe.M&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+rt.length),Rs(Pe),Pe.M=!0,re(11))}}else fr(this.i,this.l,rt,null),ps(this,rt);De==4&&je(this),this.o&&!this.J&&(De==4?Iu(this.j,this):(this.o=!1,ms(this)))}else ef(this.g),_==400&&0<rt.indexOf("Unknown SID")?(this.s=3,re(12)):(this.s=0,re(13)),je(this),ii(this)}}}catch{}finally{}};function pu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function gu(c,p){var _=c.C,b=p.indexOf(`
`,_);return b==-1?la:(_=Number(p.substring(_,b)),isNaN(_)?Do:(b+=1,b+_>p.length?la:(p=p.slice(b,b+_),c.C=b+_,p)))}nn.prototype.cancel=function(){this.J=!0,je(this)};function ms(c){c.S=Date.now()+c.I,yu(c,c.I)}function yu(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ee(A(c.ba,c),p)}function mr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}nn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(mu(this.i,this.A),this.L!=2&&(hr(),re(17)),je(this),this.s=2,ii(this)):yu(this,this.S-c)};function ii(c){c.j.G==0||c.J||Iu(c.j,c)}function je(c){mr(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,hs(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function ps(c,p){try{var _=c.j;if(_.G!=0&&(_.g==c||Oo(_.h,c))){if(!c.K&&Oo(_.h,c)&&_.G==3){try{var b=_.Da.g.parse(p)}catch{b=null}if(Array.isArray(b)&&b.length==3){var B=b;if(B[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Ta(_),_a(_);else break t;jo(_),re(18)}}else _.za=B[1],0<_.za-_.T&&37500>B[2]&&_.F&&_.v==0&&!_.C&&(_.C=Ee(A(_.Za,_),6e3));if(1>=ca(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ui(_,11)}else if((c.K||_.g==c)&&Ta(_),!et(p))for(B=_.Da.g.parse(p),p=0;p<B.length;p++){let Ut=B[p];if(_.T=Ut[0],Ut=Ut[1],_.G==2)if(Ut[0]=="c"){_.K=Ut[1],_.ia=Ut[2];const Pe=Ut[3];Pe!=null&&(_.la=Pe,_.j.info("VER="+_.la));const De=Ut[4];De!=null&&(_.Aa=De,_.j.info("SVER="+_.Aa));const Bi=Ut[5];Bi!=null&&typeof Bi=="number"&&0<Bi&&(b=1.5*Bi,_.L=b,_.j.info("backChannelRequestTimeoutMs_="+b)),b=_;const qe=c.g;if(qe){const ci=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ci){var $=b.h;$.g||ci.indexOf("spdy")==-1&&ci.indexOf("quic")==-1&&ci.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(ha($,$.h),$.h=null))}if(b.D){const Ho=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(b.ya=Ho,Yt(b.I,b.D,Ho))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),b=_;var rt=c;if(b.qa=xu(b,b.J?b.ia:null,b.W),rt.K){rn(b.h,rt);var Lt=rt,xe=b.L;xe&&(Lt.I=xe),Lt.B&&(mr(Lt),ms(Lt)),b.g=rt}else wu(b);0<_.i.length&&va(_)}else Ut[0]!="stop"&&Ut[0]!="close"||Ui(_,7);else _.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?Ui(_,7):Bo(_):Ut[0]!="noop"&&_.l&&_.l.ta(Ut),_.v=0)}}hr(4)}catch{}}var _u=class{constructor(c,p){this.g=c,this.map=p}};function Ni(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ua(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ca(c){return c.h?1:c.g?c.g.size:0}function Oo(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function ha(c,p){c.g?c.g.add(p):c.h=p}function rn(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Ni.prototype.cancel=function(){if(this.i=No(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function No(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const _ of c.g.values())p=p.concat(_.D);return p}return F(c.i)}function Wh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(y(c)){for(var p=[],_=c.length,b=0;b<_;b++)p.push(c[b]);return p}p=[],_=0;for(b in c)p[_++]=c[b];return p}function fa(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(y(c)||typeof c=="string"){var p=[];c=c.length;for(var _=0;_<c;_++)p.push(_);return p}p=[],_=0;for(const b in c)p[_++]=b;return p}}}function ko(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(y(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var _=fa(c),b=Wh(c),B=b.length,$=0;$<B;$++)p.call(void 0,b[$],_&&_[$],c)}var gs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zh(c,p){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var b=c[_].indexOf("="),B=null;if(0<=b){var $=c[_].substring(0,b);B=c[_].substring(b+1)}else $=c[_];p($,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function be(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof be){this.h=c.h,ys(this,c.j),this.o=c.o,this.g=c.g,pr(this,c.s),this.l=c.l;var p=c.i,_=new Mi;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),ki(this,_),this.m=c.m}else c&&(p=String(c).match(gs))?(this.h=!1,ys(this,p[1]||"",!0),this.o=Cn(p[2]||""),this.g=Cn(p[3]||"",!0),pr(this,p[4]),this.l=Cn(p[5]||"",!0),ki(this,p[6]||"",!0),this.m=Cn(p[7]||"")):(this.h=!1,this.i=new Mi(null,this.h))}be.prototype.toString=function(){var c=[],p=this.j;p&&c.push(vs(p,Mo,!0),":");var _=this.g;return(_||p=="file")&&(c.push("//"),(p=this.o)&&c.push(vs(p,Mo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(vs(_,_.charAt(0)=="/"?Jh:Vo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",vs(_,da)),c.join("")};function mn(c){return new be(c)}function ys(c,p,_){c.j=_?Cn(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function pr(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function ki(c,p,_){p instanceof Mi?(c.i=p,Tu(c.i,c.h)):(_||(p=vs(p,tf)),c.i=new Mi(p,c.h))}function Yt(c,p,_){c.i.set(p,_)}function _s(c){return Yt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Cn(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function vs(c,p,_){return typeof c=="string"?(c=encodeURI(c).replace(p,vu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function vu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Mo=/[#\/\?@]/g,Vo=/[#\?:]/g,Jh=/[#\?]/g,tf=/[#\?@]/g,da=/#/g;function Mi(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function xn(c){c.g||(c.g=new Map,c.h=0,c.i&&Zh(c.i,function(p,_){c.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}r=Mi.prototype,r.add=function(c,p){xn(this),this.i=null,c=ri(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(p),this.h+=1,this};function Vi(c,p){xn(c),p=ri(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Pi(c,p){return xn(c),p=ri(c,p),c.g.has(p)}r.forEach=function(c,p){xn(this),this.g.forEach(function(_,b){_.forEach(function(B){c.call(p,B,b,this)},this)},this)},r.na=function(){xn(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let b=0;b<p.length;b++){const B=c[b];for(let $=0;$<B.length;$++)_.push(p[b])}return _},r.V=function(c){xn(this);let p=[];if(typeof c=="string")Pi(this,c)&&(p=p.concat(this.g.get(ri(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)p=p.concat(c[_])}return p},r.set=function(c,p){return xn(this),this.i=null,c=ri(this,c),Pi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},r.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Po(c,p,_){Vi(c,p),0<_.length&&(c.i=null,c.g.set(ri(c,p),F(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var b=p[_];const $=encodeURIComponent(String(b)),rt=this.V(b);for(b=0;b<rt.length;b++){var B=$;rt[b]!==""&&(B+="="+encodeURIComponent(String(rt[b]))),c.push(B)}}return this.i=c.join("&")};function ri(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Tu(c,p){p&&!c.j&&(xn(c),c.i=null,c.g.forEach(function(_,b){var B=b.toLowerCase();b!=B&&(Vi(this,b),Po(this,B,_))},c)),c.j=p}function Ts(c,p){const _=new In;if(m.Image){const b=new Image;b.onload=V(Dn,_,"TestLoadImage: loaded",!0,p,b),b.onerror=V(Dn,_,"TestLoadImage: error",!1,p,b),b.onabort=V(Dn,_,"TestLoadImage: abort",!1,p,b),b.ontimeout=V(Dn,_,"TestLoadImage: timeout",!1,p,b),m.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else p(!1)}function Fn(c,p){const _=new In,b=new AbortController,B=setTimeout(()=>{b.abort(),Dn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:b.signal}).then($=>{clearTimeout(B),$.ok?Dn(_,"TestPingServer: ok",!0,p):Dn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(B),Dn(_,"TestPingServer: error",!1,p)})}function Dn(c,p,_,b,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),b(_)}catch{}}function Es(){this.g=new fs}function si(c,p,_){const b=_||"";try{ko(c,function(B,$){let rt=B;g(B)&&(rt=qn(B)),p.push(b+$+"="+encodeURIComponent(rt))})}catch(B){throw p.push(b+"type="+encodeURIComponent("_badmap")),B}}function gr(c){this.l=c.Ub||null,this.j=c.eb||!1}z(gr,Ao),gr.prototype.g=function(){return new Li(this.l,this.j)},gr.prototype.i=function(c){return function(){return c}}({});function Li(c,p){ce.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(Li,ce),r=Li.prototype,r.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,oi(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ai(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?ai(this):oi(this),this.readyState==3&&Lo(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,ai(this))},r.Qa=function(c){this.g&&(this.response=c,ai(this))},r.ga=function(){this.g&&ai(this)};function ai(c){c.readyState=4,c.l=null,c.j=null,c.v=null,oi(c)}r.setRequestHeader=function(c,p){this.u.append(c,p)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=p.next();return c.join(`\r
`)};function oi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Uo(c){let p="";return _t(c,function(_,b){p+=b,p+=":",p+=_,p+=`\r
`}),p}function Ve(c,p,_){t:{for(b in _){var b=!1;break t}b=!0}b||(_=Uo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Yt(c,p,_))}function Ht(c){ce.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(Ht,ce);var ma=/^https?$/i,bs=["POST","PUT"];r=Ht.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,p,_,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ei.g(),this.v=this.o?wo(this.o):wo(ei),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch($){Eu(this,$);return}if(c=_||"",_=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var B in b)_.set(B,b[B]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const $ of b.keys())_.set($,b.get($));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),B=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(bs,p,void 0))||b||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,rt]of _)this.g.setRequestHeader($,rt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ss(this),this.u=!0,this.g.send(c),this.u=!1}catch($){Eu(this,$)}};function Eu(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,pa(c),li(c)}function pa(c){c.A||(c.A=!0,Gt(c,"complete"),Gt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Gt(this,"complete"),Gt(this,"abort"),li(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),Ht.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ga(this):this.bb())},r.bb=function(){ga(this)};function ga(c){if(c.h&&typeof f<"u"&&(!c.v[1]||On(c)!=4||c.Z()!=2)){if(c.u&&On(c)==4)Ke(c.Ea,0,c);else if(Gt(c,"readystatechange"),On(c)==4){c.h=!1;try{const rt=c.Z();t:switch(rt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var _;if(!(_=p)){var b;if(b=rt===0){var B=String(c.D).match(gs)[1]||null;!B&&m.self&&m.self.location&&(B=m.self.location.protocol.slice(0,-1)),b=!ma.test(B?B.toLowerCase():"")}_=b}if(_)Gt(c,"complete"),Gt(c,"success");else{c.m=6;try{var $=2<On(c)?c.g.statusText:""}catch{$=""}c.l=$+" ["+c.Z()+"]",pa(c)}}finally{li(c)}}}}function li(c,p){if(c.g){Ss(c);const _=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Gt(c,"ready");try{_.onreadystatechange=b}catch{}}}function Ss(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function On(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),aa(p)}};function bu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ef(c){const p={};c=(c.g&&2<=On(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(et(c[b]))continue;var _=O(c[b]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=p[B]||[];p[B]=$,$.push(_)}k(p,function(b){return b.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function As(c,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||p}function ya(c){this.Aa=0,this.i=[],this.j=new In,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=As("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=As("baseRetryDelayMs",5e3,c),this.cb=As("retryDelaySeedMs",1e4,c),this.Wa=As("forwardChannelMaxRetries",2,c),this.wa=As("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ni(c&&c.concurrentRequestLimit),this.Da=new Es,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ya.prototype,r.la=8,r.G=1,r.connect=function(c,p,_,b){re(0),this.W=c,this.H=p||{},_&&b!==void 0&&(this.H.OSID=_,this.H.OAID=b),this.F=this.X,this.I=xu(this,null,this.W),va(this)};function Bo(c){if(Su(c),c.G==3){var p=c.U++,_=mn(c.I);if(Yt(_,"SID",c.K),Yt(_,"RID",p),Yt(_,"TYPE","terminate"),ws(c,_),p=new nn(c,c.j,p),p.L=2,p.v=_s(mn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=p.v,_=!0),_||(p.g=Du(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ms(p)}Cu(c)}function _a(c){c.g&&(Rs(c),c.g.cancel(),c.g=null)}function Su(c){_a(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ta(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function va(c){if(!ua(c.h)&&!c.s){c.s=!0;var p=c.Ga;at||D(),dt||(at(),dt=!0),kt.add(p,c),c.B=0}}function nf(c,p){return ca(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ee(A(c.Ga,c,p),qo(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new nn(this,this.j,c);let $=this.o;if(this.S&&($?($=w($),M($,this.S)):$=this.S),this.m!==null||this.O||(B.H=$,$=null),this.P)t:{for(var p=0,_=0;_<this.i.length;_++){e:{var b=this.i[_];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break e}b=void 0}if(b===void 0)break;if(p+=b,4096<p){p=_;break t}if(p===4096||_===this.i.length-1){p=_+1;break t}}p=1e3}else p=1e3;p=Au(this,B,p),_=mn(this.I),Yt(_,"RID",c),Yt(_,"CVER",22),this.D&&Yt(_,"X-HTTP-Session-Id",this.D),ws(this,_),$&&(this.O?p="headers="+encodeURIComponent(String(Uo($)))+"&"+p:this.m&&Ve(_,this.m,$)),ha(this.h,B),this.Ua&&Yt(_,"TYPE","init"),this.P?(Yt(_,"$req",p),Yt(_,"SID","null"),B.T=!0,Hn(B,_,null)):Hn(B,_,p),this.G=2}}else this.G==3&&(c?zo(this,c):this.i.length==0||ua(this.h)||zo(this))};function zo(c,p){var _;p?_=p.l:_=c.U++;const b=mn(c.I);Yt(b,"SID",c.K),Yt(b,"RID",_),Yt(b,"AID",c.T),ws(c,b),c.m&&c.o&&Ve(b,c.m,c.o),_=new nn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Au(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ha(c.h,_),Hn(_,b,p)}function ws(c,p){c.H&&_t(c.H,function(_,b){Yt(p,b,_)}),c.l&&ko({},function(_,b){Yt(p,b,_)})}function Au(c,p,_){_=Math.min(c.i.length,_);var b=c.l?A(c.l.Na,c.l,c):null;t:{var B=c.i;let $=-1;for(;;){const rt=["count="+_];$==-1?0<_?($=B[0].g,rt.push("ofs="+$)):$=0:rt.push("ofs="+$);let Lt=!0;for(let xe=0;xe<_;xe++){let Ut=B[xe].g;const Pe=B[xe].map;if(Ut-=$,0>Ut)$=Math.max(0,B[xe].g-100),Lt=!1;else try{si(Pe,rt,"req"+Ut+"_")}catch{b&&b(Pe)}}if(Lt){b=rt.join("&");break t}}}return c=c.i.splice(0,_),p.D=c,b}function wu(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;at||D(),dt||(at(),dt=!0),kt.add(p,c),c.v=0}}function jo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ee(A(c.Fa,c),qo(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Ru(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ee(A(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,re(10),_a(this),Ru(this))};function Rs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Ru(c){c.g=new nn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=mn(c.qa);Yt(p,"RID","rpc"),Yt(p,"SID",c.K),Yt(p,"AID",c.T),Yt(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Yt(p,"TO",c.ja),Yt(p,"TYPE","xmlhttp"),ws(c,p),c.m&&c.o&&Ve(p,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=_s(mn(p)),_.m=null,_.P=!0,Oi(_,c)}r.Za=function(){this.C!=null&&(this.C=null,_a(this),jo(this),re(19))};function Ta(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Iu(c,p){var _=null;if(c.g==p){Ta(c),Rs(c),c.g=null;var b=2}else if(Oo(c.h,p))_=p.D,rn(c.h,p),b=1;else return;if(c.G!=0){if(p.o)if(b==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var B=c.B;b=cr(),Gt(b,new Ce(b,_)),va(c)}else wu(c);else if(B=p.s,B==3||B==0&&0<p.X||!(b==1&&nf(c,p)||b==2&&jo(c)))switch(_&&0<_.length&&(p=c.h,p.i=p.i.concat(_)),B){case 1:Ui(c,5);break;case 4:Ui(c,10);break;case 3:Ui(c,6);break;default:Ui(c,2)}}}function qo(c,p){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*p}function Ui(c,p){if(c.j.info("Error code "+p),p==2){var _=A(c.fb,c),b=c.Xa;const B=!b;b=new be(b||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||ys(b,"https"),_s(b),B?Ts(b.toString(),_):Fn(b.toString(),_)}else re(2);c.G=0,c.l&&c.l.sa(p),Cu(c),Su(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),re(2)):(this.j.info("Failed to ping google.com"),re(1))};function Cu(c){if(c.G=0,c.ka=[],c.l){const p=No(c.h);(p.length!=0||c.i.length!=0)&&(U(c.ka,p),U(c.ka,c.i),c.h.i.length=0,F(c.i),c.i.length=0),c.l.ra()}}function xu(c,p,_){var b=_ instanceof be?mn(_):new be(_);if(b.g!="")p&&(b.g=p+"."+b.g),pr(b,b.s);else{var B=m.location;b=B.protocol,p=p?p+"."+B.hostname:B.hostname,B=+B.port;var $=new be(null);b&&ys($,b),p&&($.g=p),B&&pr($,B),_&&($.l=_),b=$}return _=c.D,p=c.ya,_&&p&&Yt(b,_,p),Yt(b,"VER",c.la),ws(c,b),b}function Du(c,p,_){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Ht(new gr({eb:_})):new Ht(c.pa),p.Ha(c.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ou(){}r=Ou.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ea(){}Ea.prototype.g=function(c,p){return new sn(c,p)};function sn(c,p){ce.call(this),this.g=new ya(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!et(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!et(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new ui(this)}z(sn,ce),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Bo(this.g)},sn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=qn(c),c=_);p.i.push(new _u(p.Ya++,c)),p.G==3&&va(p)},sn.prototype.N=function(){this.g.l=null,delete this.j,Bo(this.g),delete this.g,sn.aa.N.call(this)};function Nu(c){xi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const _ in p){c=_;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}z(Nu,xi);function ku(){Io.call(this),this.status=1}z(ku,Io);function ui(c){this.g=c}z(ui,Ou),ui.prototype.ua=function(){Gt(this.g,"a")},ui.prototype.ta=function(c){Gt(this.g,new Nu(c))},ui.prototype.sa=function(c){Gt(this.g,new ku)},ui.prototype.ra=function(){Gt(this.g,"b")},Ea.prototype.createWebChannel=Ea.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,WT=function(){return new Ea},XT=function(){return cr()},KT=ti,Rm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dr.NO_ERROR=0,dr.TIMEOUT=8,dr.HTTP_ERROR=6,Xc=dr,Di.COMPLETE="complete",YT=Di,Ro.EventType=Ci,Ci.OPEN="a",Ci.CLOSE="b",Ci.ERROR="c",Ci.MESSAGE="d",ce.prototype.listen=ce.prototype.K,Nl=Ro,Ht.prototype.listenOnce=Ht.prototype.L,Ht.prototype.getLastError=Ht.prototype.Ka,Ht.prototype.getLastErrorCode=Ht.prototype.Ba,Ht.prototype.getStatus=Ht.prototype.Z,Ht.prototype.getResponseJson=Ht.prototype.Oa,Ht.prototype.getResponseText=Ht.prototype.oa,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Ha,QT=Ht}).apply(typeof Vc<"u"?Vc:typeof self<"u"?self:typeof window<"u"?window:{});const Qv="@firebase/firestore",Yv="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new Wm("@firebase/firestore");function Xa(){return Xs.logLevel}function ut(r,...t){if(Xs.logLevel<=Mt.DEBUG){const n=t.map(up);Xs.debug(`Firestore (${go}): ${r}`,...n)}}function ar(r,...t){if(Xs.logLevel<=Mt.ERROR){const n=t.map(up);Xs.error(`Firestore (${go}): ${r}`,...n)}}function lo(r,...t){if(Xs.logLevel<=Mt.WARN){const n=t.map(up);Xs.warn(`Firestore (${go}): ${r}`,...n)}}function up(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,ZT(r,s,n)}function ZT(r,t,n){let s=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw ar(s),new Error(s)}function Ft(r,t,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||ZT(t,o,s)}function Rt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends Ri{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class hI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Je.UNAUTHENTICATED))}shutdown(){}}class fI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dI{constructor(t){this.t=t,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ft(this.o===void 0,42304);let s=this.i;const o=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let u=new nr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new nr,t.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const y=u;t.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},m=y=>{ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new nr)}},0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ft(typeof s.accessToken=="string",31837,{l:s}),new JT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ft(t===null||typeof t=="string",2055,{h:t}),new Je(t)}}class mI{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pI{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new mI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gI{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ft(this.o===void 0,3512);const s=u=>{u.error!=null&&ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,ut("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>s(u))};const o=u=>{ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Kv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ft(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Kv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=yI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=t.charAt(o[u]%62))}return s}}function Vt(r,t){return r<t?-1:r>t?1:0}function Im(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=t.charAt(s);if(o!==u)return om(o)===om(u)?Vt(o,u):om(o)?1:-1}return Vt(r.length,t.length)}const _I=55296,vI=57343;function om(r){const t=r.charCodeAt(0);return t>=_I&&t<=vI}function uo(r,t,n){return r.length===t.length&&r.every((s,o)=>n(s,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="__name__";class gi{constructor(t,n,s){n===void 0?n=0:n>t.length&&Et(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&Et(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return gi.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof gi?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let o=0;o<s;o++){const u=gi.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return Vt(t.length,n.length)}static compareSegments(t,n){const s=gi.isNumericId(t),o=gi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?gi.extractNumericId(t).compare(gi.extractNumericId(n)):Im(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Qr.fromString(t.substring(4,t.length-2))}}class ee extends gi{construct(t,n,s){return new ee(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new lt(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new ee(n)}static emptyPath(){return new ee([])}}const TI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends gi{construct(t,n,s){return new Qe(t,n,s)}static isValidIdentifier(t){return TI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xv}static keyField(){return new Qe([Xv])}static fromServerFormat(t){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new lt(X.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new lt(X.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new lt(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=y,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new lt(X.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.path=t}static fromPath(t){return new gt(ee.fromString(t))}static fromName(t){return new gt(ee.fromString(t).popFirst(5))}static empty(){return new gt(ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ee.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ee.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new gt(new ee(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(r,t,n){if(!n)throw new lt(X.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function EI(r,t,n,s){if(t===!0&&s===!0)throw new lt(X.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Wv(r){if(!gt.isDocumentKey(r))throw new lt(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Zv(r){if(gt.isDocumentKey(r))throw new lt(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function eE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Ch(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Et(12329,{type:typeof r})}function Wn(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new lt(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ch(r);throw new lt(X.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(r,t){const n={typeString:r};return t&&(n.value=t),n}function ru(r,t){if(!eE(r))throw new lt(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const o=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new lt(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=-62135596800,t0=1e6;class ie{static now(){return ie.fromMillis(Date.now())}static fromDate(t){return ie.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*t0);return new ie(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new lt(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new lt(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Jv)throw new lt(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new lt(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/t0}_compareTo(t){return this.seconds===t.seconds?Vt(this.nanoseconds,t.nanoseconds):Vt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ru(t,ie._jsonSchema))return new ie(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Jv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ie._jsonSchemaVersion="firestore/timestamp/1.0",ie._jsonSchema={type:Ie("string",ie._jsonSchemaVersion),seconds:Ie("number"),nanoseconds:Ie("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{static fromTimestamp(t){return new wt(t)}static min(){return new wt(new ie(0,0))}static max(){return new wt(new ie(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=-1;function bI(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=wt.fromTimestamp(s===1e9?new ie(n+1,0):new ie(n,s));return new Wr(o,gt.empty(),t)}function SI(r){return new Wr(r.readTime,r.key,Gl)}class Wr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Wr(wt.min(),gt.empty(),Gl)}static max(){return new Wr(wt.max(),gt.empty(),Gl)}}function AI(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=gt.comparator(r.documentKey,t.documentKey),n!==0?n:Vt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(r){if(r.code!==X.FAILED_PRECONDITION||r.message!==wI)throw r;ut("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Z((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Z.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Z.reject(n)}static resolve(t){return new Z((n,s)=>{n(t)})}static reject(t){return new Z((n,s)=>{s(t)})}static waitFor(t){return new Z((n,s)=>{let o=0,u=0,f=!1;t.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},y=>s(y))}),f=!0,u===o&&n()})}static or(t){let n=Z.resolve(!1);for(const s of t)n=n.next(o=>o?Z.resolve(o):s());return n}static forEach(t,n){const s=[];return t.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(t,n){return new Z((s,o)=>{const u=t.length,f=new Array(u);let m=0;for(let y=0;y<u;y++){const g=y;n(t[g]).next(T=>{f[g]=T,++m,m===u&&s(f)},T=>o(T))}})}static doWhile(t,n){return new Z((s,o)=>{const u=()=>{t()===!0?n().next(()=>{u()},o):s()};u()})}}function II(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _o(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}xh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp=-1;function Dh(r){return r==null}function ch(r){return r===0&&1/r==-1/0}function CI(r){return typeof r=="number"&&Number.isInteger(r)&&!ch(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="";function xI(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=e0(t)),t=DI(r.get(n),t);return e0(t)}function DI(r,t){let n=t;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case nE:n+="";break;default:n+=u}}return n}function e0(r){return r+nE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function is(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function iE(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t,n){this.comparator=t,this.root=n||$e.EMPTY}insert(t,n){return new ue(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,$e.BLACK,null,null))}remove(t){return new ue(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$e.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Pc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Pc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Pc(this.root,t,this.comparator,!0)}}class Pc{constructor(t,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?s(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class $e{constructor(t,n,s,o,u){this.key=t,this.value=n,this.color=s??$e.RED,this.left=o??$e.EMPTY,this.right=u??$e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,o,u){return new $e(t??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let o=this;const u=s(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return $e.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,$e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,$e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Et(27949);return t+(this.isRed()?0:1)}}$e.EMPTY=null,$e.RED=!0,$e.BLACK=!1;$e.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(t,n,s,o,u){return this}insert(t,n,s){return new $e(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t){this.comparator=t,this.data=new ue(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new i0(this.data.getIterator())}getIteratorFrom(t){return new i0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof ke)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ke(this.comparator);return n.data=t,n}}class i0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(t){this.fields=t,t.sort(Qe.comparator)}static empty(){return new An([])}unionWith(t){let n=new ke(Qe.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new An(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return uo(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new rE("Invalid base64 string: "+u):u}}(t);return new Ye(n)}static fromUint8Array(t){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(t);return new Ye(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Vt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ye.EMPTY_BYTE_STRING=new Ye("");const OI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zr(r){if(Ft(!!r,39018),typeof r=="string"){let t=0;const n=OI.exec(r);if(Ft(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ve(r.seconds),nanos:ve(r.nanos)}}function ve(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Jr(r){return typeof r=="string"?Ye.fromBase64String(r):Ye.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="server_timestamp",aE="__type__",oE="__previous_value__",lE="__local_write_time__";function fp(r){return(r?.mapValue?.fields||{})[aE]?.stringValue===sE}function Oh(r){const t=r.mapValue.fields[oE];return fp(t)?Oh(t):t}function $l(r){const t=Zr(r.mapValue.fields[lE].timestampValue);return new ie(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(t,n,s,o,u,f,m,y,g,T){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=T}}const hh="(default)";class Ql{constructor(t,n){this.projectId=t,this.database=n||hh}static empty(){return new Ql("","")}get isDefaultDatabase(){return this.database===hh}isEqual(t){return t instanceof Ql&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="__type__",kI="__max__",Lc={mapValue:{}},cE="__vector__",fh="value";function ts(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?fp(r)?4:VI(r)?9007199254740991:MI(r)?10:11:Et(28295,{value:r})}function wi(r,t){if(r===t)return!0;const n=ts(r);if(n!==ts(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return $l(r).isEqual($l(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Zr(o.timestampValue),m=Zr(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(o,u){return Jr(o.bytesValue).isEqual(Jr(u.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(o,u){return ve(o.geoPointValue.latitude)===ve(u.geoPointValue.latitude)&&ve(o.geoPointValue.longitude)===ve(u.geoPointValue.longitude)}(r,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return ve(o.integerValue)===ve(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=ve(o.doubleValue),m=ve(u.doubleValue);return f===m?ch(f)===ch(m):isNaN(f)&&isNaN(m)}return!1}(r,t);case 9:return uo(r.arrayValue.values||[],t.arrayValue.values||[],wi);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(n0(f)!==n0(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!wi(f[y],m[y])))return!1;return!0}(r,t);default:return Et(52216,{left:r})}}function Yl(r,t){return(r.values||[]).find(n=>wi(n,t))!==void 0}function co(r,t){if(r===t)return 0;const n=ts(r),s=ts(t);if(n!==s)return Vt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vt(r.booleanValue,t.booleanValue);case 2:return function(u,f){const m=ve(u.integerValue||u.doubleValue),y=ve(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(r,t);case 3:return r0(r.timestampValue,t.timestampValue);case 4:return r0($l(r),$l(t));case 5:return Im(r.stringValue,t.stringValue);case 6:return function(u,f){const m=Jr(u),y=Jr(f);return m.compareTo(y)}(r.bytesValue,t.bytesValue);case 7:return function(u,f){const m=u.split("/"),y=f.split("/");for(let g=0;g<m.length&&g<y.length;g++){const T=Vt(m[g],y[g]);if(T!==0)return T}return Vt(m.length,y.length)}(r.referenceValue,t.referenceValue);case 8:return function(u,f){const m=Vt(ve(u.latitude),ve(f.latitude));return m!==0?m:Vt(ve(u.longitude),ve(f.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return s0(r.arrayValue,t.arrayValue);case 10:return function(u,f){const m=u.fields||{},y=f.fields||{},g=m[fh]?.arrayValue,T=y[fh]?.arrayValue,S=Vt(g?.values?.length||0,T?.values?.length||0);return S!==0?S:s0(g,T)}(r.mapValue,t.mapValue);case 11:return function(u,f){if(u===Lc.mapValue&&f===Lc.mapValue)return 0;if(u===Lc.mapValue)return 1;if(f===Lc.mapValue)return-1;const m=u.fields||{},y=Object.keys(m),g=f.fields||{},T=Object.keys(g);y.sort(),T.sort();for(let S=0;S<y.length&&S<T.length;++S){const A=Im(y[S],T[S]);if(A!==0)return A;const V=co(m[y[S]],g[T[S]]);if(V!==0)return V}return Vt(y.length,T.length)}(r.mapValue,t.mapValue);default:throw Et(23264,{he:n})}}function r0(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Vt(r,t);const n=Zr(r),s=Zr(t),o=Vt(n.seconds,s.seconds);return o!==0?o:Vt(n.nanos,s.nanos)}function s0(r,t){const n=r.values||[],s=t.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=co(n[o],s[o]);if(u)return u}return Vt(n.length,s.length)}function ho(r){return Cm(r)}function Cm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=Zr(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Jr(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return gt.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Cm(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Cm(n.fields[f])}`;return o+"}"}(r.mapValue):Et(61005,{value:r})}function Wc(r){switch(ts(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Oh(r);return t?16+Wc(t):16;case 5:return 2*r.stringValue.length;case 6:return Jr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+Wc(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return is(s.fields,(u,f)=>{o+=u.length+Wc(f)}),o}(r.mapValue);default:throw Et(13486,{value:r})}}function a0(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function xm(r){return!!r&&"integerValue"in r}function dp(r){return!!r&&"arrayValue"in r}function o0(r){return!!r&&"nullValue"in r}function l0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Zc(r){return!!r&&"mapValue"in r}function MI(r){return(r?.mapValue?.fields||{})[uE]?.stringValue===cE}function Ul(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return is(r.mapValue.fields,(n,s)=>t.mapValue.fields[n]=Ul(s)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ul(r.arrayValue.values[n]);return t}return{...r}}function VI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===kI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.value=t}static empty(){return new fn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Zc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ul(n)}setAll(t){let n=Qe.emptyPath(),s={},o=[];t.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const y=this.getFieldsMap(n);this.applyChanges(y,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Ul(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(t){const n=this.field(t.popLast());Zc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return wi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=n.mapValue.fields[t.get(s)];Zc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,s){is(n,(o,u)=>t[o]=u);for(const o of s)delete t[o]}clone(){return new fn(Ul(this.value))}}function hE(r){const t=[];return is(r.fields,(n,s)=>{const o=new Qe([n]);if(Zc(s)){const u=hE(s.mapValue).fields;if(u.length===0)t.push(o);else for(const f of u)t.push(o.child(f))}else t.push(o)}),new An(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t,n,s,o,u,f,m){this.key=t,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(t){return new tn(t,0,wt.min(),wt.min(),wt.min(),fn.empty(),0)}static newFoundDocument(t,n,s,o){return new tn(t,1,n,wt.min(),s,o,0)}static newNoDocument(t,n){return new tn(t,2,n,wt.min(),wt.min(),fn.empty(),0)}static newUnknownDocument(t,n){return new tn(t,3,n,wt.min(),wt.min(),fn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof tn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(t,n){this.position=t,this.inclusive=n}}function u0(r,t,n){let s=0;for(let o=0;o<r.position.length;o++){const u=t[o],f=r.position[o];if(u.field.isKeyField()?s=gt.comparator(gt.fromName(f.referenceValue),n.key):s=co(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function c0(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!wi(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t,n="asc"){this.field=t,this.dir=n}}function PI(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{}class Re extends fE{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new UI(t,n,s):n==="array-contains"?new jI(t,s):n==="in"?new qI(t,s):n==="not-in"?new HI(t,s):n==="array-contains-any"?new FI(t,s):new Re(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new BI(t,s):new zI(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(co(n,this.value)):n!==null&&ts(this.value)===ts(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends fE{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Zn(t,n)}matches(t){return dE(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dE(r){return r.op==="and"}function mE(r){return LI(r)&&dE(r)}function LI(r){for(const t of r.filters)if(t instanceof Zn)return!1;return!0}function Dm(r){if(r instanceof Re)return r.field.canonicalString()+r.op.toString()+ho(r.value);if(mE(r))return r.filters.map(t=>Dm(t)).join(",");{const t=r.filters.map(n=>Dm(n)).join(",");return`${r.op}(${t})`}}function pE(r,t){return r instanceof Re?function(s,o){return o instanceof Re&&s.op===o.op&&s.field.isEqual(o.field)&&wi(s.value,o.value)}(r,t):r instanceof Zn?function(s,o){return o instanceof Zn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&pE(f,o.filters[m]),!0):!1}(r,t):void Et(19439)}function gE(r){return r instanceof Re?function(n){return`${n.field.canonicalString()} ${n.op} ${ho(n.value)}`}(r):r instanceof Zn?function(n){return n.op.toString()+" {"+n.getFilters().map(gE).join(" ,")+"}"}(r):"Filter"}class UI extends Re{constructor(t,n,s){super(t,n,s),this.key=gt.fromName(s.referenceValue)}matches(t){const n=gt.comparator(t.key,this.key);return this.matchesComparison(n)}}class BI extends Re{constructor(t,n){super(t,"in",n),this.keys=yE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class zI extends Re{constructor(t,n){super(t,"not-in",n),this.keys=yE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function yE(r,t){return(t.arrayValue?.values||[]).map(n=>gt.fromName(n.referenceValue))}class jI extends Re{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return dp(n)&&Yl(n.arrayValue,this.value)}}class qI extends Re{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Yl(this.value.arrayValue,n)}}class HI extends Re{constructor(t,n){super(t,"not-in",n)}matches(t){if(Yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yl(this.value.arrayValue,n)}}class FI extends Re{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!dp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Yl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(t,n=null,s=[],o=[],u=null,f=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function h0(r,t=null,n=[],s=[],o=null,u=null,f=null){return new GI(r,t,n,s,o,u,f)}function mp(r){const t=Rt(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>Dm(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Dh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>ho(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>ho(s)).join(",")),t.Te=n}return t.Te}function pp(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!PI(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!pE(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!c0(r.startAt,t.startAt)&&c0(r.endAt,t.endAt)}function Om(r){return gt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(t,n=null,s=[],o=[],u=null,f="F",m=null,y=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $I(r,t,n,s,o,u,f,m){return new vo(r,t,n,s,o,u,f,m)}function gp(r){return new vo(r)}function f0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function _E(r){return r.collectionGroup!==null}function Bl(r){const t=Rt(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new ke(Qe.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(t).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Kl(u,s))}),n.has(Qe.keyField().canonicalString())||t.Ie.push(new Kl(Qe.keyField(),s))}return t.Ie}function Ti(r){const t=Rt(r);return t.Ee||(t.Ee=QI(t,Bl(r))),t.Ee}function QI(r,t){if(r.limitType==="F")return h0(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Kl(o.field,u)});const n=r.endAt?new dh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new dh(r.startAt.position,r.startAt.inclusive):null;return h0(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function Nm(r,t){const n=r.filters.concat([t]);return new vo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function km(r,t,n){return new vo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function Nh(r,t){return pp(Ti(r),Ti(t))&&r.limitType===t.limitType}function vE(r){return`${mp(Ti(r))}|lt:${r.limitType}`}function Wa(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>gE(o)).join(", ")}]`),Dh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>ho(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>ho(o)).join(",")),`Target(${s})`}(Ti(r))}; limitType=${r.limitType})`}function kh(r,t){return t.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):gt.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,t)&&function(s,o){for(const u of Bl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,t)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,t)&&function(s,o){return!(s.startAt&&!function(f,m,y){const g=u0(f,m,y);return f.inclusive?g<=0:g<0}(s.startAt,Bl(s),o)||s.endAt&&!function(f,m,y){const g=u0(f,m,y);return f.inclusive?g>=0:g>0}(s.endAt,Bl(s),o))}(r,t)}function YI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function TE(r){return(t,n)=>{let s=!1;for(const o of Bl(r)){const u=KI(o,t,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function KI(r,t,n){const s=r.field.isKeyField()?gt.comparator(t.key,n.key):function(u,f,m){const y=f.data.field(u),g=m.data.field(u);return y!==null&&g!==null?co(y,g):Et(42886)}(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Et(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){is(this.inner,(n,s)=>{for(const[o,u]of s)t(o,u)})}isEmpty(){return iE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=new ue(gt.comparator);function or(){return XI}const EE=new ue(gt.comparator);function kl(...r){let t=EE;for(const n of r)t=t.insert(n.key,n);return t}function bE(r){let t=EE;return r.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function Fs(){return zl()}function SE(){return zl()}function zl(){return new ta(r=>r.toString(),(r,t)=>r.isEqual(t))}const WI=new ue(gt.comparator),ZI=new ke(gt.comparator);function Pt(...r){let t=ZI;for(const n of r)t=t.add(n);return t}const JI=new ke(Vt);function tC(){return JI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ch(t)?"-0":t}}function AE(r){return{integerValue:""+r}}function eC(r,t){return CI(t)?AE(t):yp(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this._=void 0}}function nC(r,t,n){return r instanceof mh?function(o,u){const f={fields:{[aE]:{stringValue:sE},[lE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&fp(u)&&(u=Oh(u)),u&&(f.fields[oE]=u),{mapValue:f}}(n,t):r instanceof Xl?RE(r,t):r instanceof Wl?IE(r,t):function(o,u){const f=wE(o,u),m=d0(f)+d0(o.Ae);return xm(f)&&xm(o.Ae)?AE(m):yp(o.serializer,m)}(r,t)}function iC(r,t,n){return r instanceof Xl?RE(r,t):r instanceof Wl?IE(r,t):n}function wE(r,t){return r instanceof ph?function(s){return xm(s)||function(u){return!!u&&"doubleValue"in u}(s)}(t)?t:{integerValue:0}:null}class mh extends Mh{}class Xl extends Mh{constructor(t){super(),this.elements=t}}function RE(r,t){const n=CE(t);for(const s of r.elements)n.some(o=>wi(o,s))||n.push(s);return{arrayValue:{values:n}}}class Wl extends Mh{constructor(t){super(),this.elements=t}}function IE(r,t){let n=CE(t);for(const s of r.elements)n=n.filter(o=>!wi(o,s));return{arrayValue:{values:n}}}class ph extends Mh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function d0(r){return ve(r.integerValue||r.doubleValue)}function CE(r){return dp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function rC(r,t){return r.field.isEqual(t.field)&&function(s,o){return s instanceof Xl&&o instanceof Xl||s instanceof Wl&&o instanceof Wl?uo(s.elements,o.elements,wi):s instanceof ph&&o instanceof ph?wi(s.Ae,o.Ae):s instanceof mh&&o instanceof mh}(r.transform,t.transform)}class sC{constructor(t,n){this.version=t,this.transformResults=n}}class jn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new jn}static exists(t){return new jn(void 0,t)}static updateTime(t){return new jn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Jc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Vh{}function xE(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new _p(r.key,jn.none()):new su(r.key,r.data,jn.none());{const n=r.data,s=fn.empty();let o=new ke(Qe.comparator);for(let u of t.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new rs(r.key,s,new An(o.toArray()),jn.none())}}function aC(r,t,n){r instanceof su?function(o,u,f){const m=o.value.clone(),y=p0(o.fieldTransforms,u,f.transformResults);m.setAll(y),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(r,t,n):r instanceof rs?function(o,u,f){if(!Jc(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=p0(o.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(DE(o)),y.setAll(m),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(r,t,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,t,n)}function jl(r,t,n,s){return r instanceof su?function(u,f,m,y){if(!Jc(u.precondition,f))return m;const g=u.value.clone(),T=g0(u.fieldTransforms,y,f);return g.setAll(T),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null}(r,t,n,s):r instanceof rs?function(u,f,m,y){if(!Jc(u.precondition,f))return m;const g=g0(u.fieldTransforms,y,f),T=f.data;return T.setAll(DE(u)),T.setAll(g),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(S=>S.field))}(r,t,n,s):function(u,f,m){return Jc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(r,t,n)}function oC(r,t){let n=null;for(const s of r.fieldTransforms){const o=t.data.field(s.field),u=wE(s.transform,o||null);u!=null&&(n===null&&(n=fn.empty()),n.set(s.field,u))}return n||null}function m0(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&uo(s,o,(u,f)=>rC(u,f))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class su extends Vh{constructor(t,n,s,o=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class rs extends Vh{constructor(t,n,s,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function DE(r){const t=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}}),t}function p0(r,t,n){const s=new Map;Ft(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,m=t.data.field(u.field);s.set(u.field,iC(f,m,n[o]))}return s}function g0(r,t,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,nC(u,f,t))}return s}class _p extends Vh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lC extends Vh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(t,n,s,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&aC(u,t,s[o])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=jl(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=jl(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=SE();return this.mutations.forEach(o=>{const u=t.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const y=xE(f,m);y!==null&&s.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(wt.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Pt())}isEqual(t){return this.batchId===t.batchId&&uo(this.mutations,t.mutations,(n,s)=>m0(n,s))&&uo(this.baseMutations,t.baseMutations,(n,s)=>m0(n,s))}}class vp{constructor(t,n,s,o){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(t,n,s){Ft(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let o=function(){return WI}();const u=t.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new vp(t,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,zt;function fC(r){switch(r){case X.OK:return Et(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Et(15467,{code:r})}}function OE(r){if(r===void 0)return ar("GRPC error has no .code"),X.UNKNOWN;switch(r){case we.OK:return X.OK;case we.CANCELLED:return X.CANCELLED;case we.UNKNOWN:return X.UNKNOWN;case we.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case we.INTERNAL:return X.INTERNAL;case we.UNAVAILABLE:return X.UNAVAILABLE;case we.UNAUTHENTICATED:return X.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case we.NOT_FOUND:return X.NOT_FOUND;case we.ALREADY_EXISTS:return X.ALREADY_EXISTS;case we.PERMISSION_DENIED:return X.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case we.ABORTED:return X.ABORTED;case we.OUT_OF_RANGE:return X.OUT_OF_RANGE;case we.UNIMPLEMENTED:return X.UNIMPLEMENTED;case we.DATA_LOSS:return X.DATA_LOSS;default:return Et(39323,{code:r})}}(zt=we||(we={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new Qr([4294967295,4294967295],0);function y0(r){const t=dC().encode(r),n=new $T;return n.update(t),new Uint8Array(n.digest())}function _0(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Qr([n,s],0),new Qr([o,u],0)]}class Tp{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ml(`Invalid padding: ${n}`);if(s<0)throw new Ml(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Ml(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Ml(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Qr.fromNumber(this.ge)}ye(t,n,s){let o=t.add(n.multiply(Qr.fromNumber(s)));return o.compare(mC)===1&&(o=new Qr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=y0(t),[s,o]=_0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(t,n,s){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new Tp(u,o,n);return s.forEach(m=>f.insert(m)),f}insert(t){if(this.ge===0)return;const n=y0(t),[s,o]=_0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(t,n,s,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const o=new Map;return o.set(t,au.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Ph(wt.min(),o,new ue(Vt),or(),Pt())}}class au{constructor(t,n,s,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new au(s,n,Pt(),Pt(),Pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(t,n,s,o){this.be=t,this.removedTargetIds=n,this.key=s,this.De=o}}class NE{constructor(t,n){this.targetId=t,this.Ce=n}}class kE{constructor(t,n,s=Ye.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=o}}class v0{constructor(){this.ve=0,this.Fe=T0(),this.Me=Ye.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Pt(),n=Pt(),s=Pt();return this.Fe.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Et(38017,{changeType:u})}}),new au(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=T0()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class pC{constructor(t){this.Ge=t,this.ze=new Map,this.je=or(),this.Je=Uc(),this.He=Uc(),this.Ye=new ue(Vt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:Et(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((s,o)=>{this.rt(o)&&n(o)})}st(t){const n=t.targetId,s=t.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Om(u))if(s===0){const f=new gt(u.path);this.et(n,f,tn.newNoDocument(f,wt.min()))}else Ft(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(t),y=m?this.ct(m,t,f):1;if(y!==0){this.it(n);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Jr(s).toUint8Array()}catch(y){if(y instanceof rE)return lo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Tp(f,o,u)}catch(y){return lo(y instanceof Ml?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(n,u,null),o++)}),o}Tt(t){const n=new Map;this.ze.forEach((u,f)=>{const m=this.ot(f);if(m){if(u.current&&Om(m.target)){const y=new gt(m.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,tn.newNoDocument(y,t))}u.Be&&(n.set(f,u.ke()),u.qe())}});let s=Pt();this.He.forEach((u,f)=>{let m=!0;f.forEachWhile(y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.je.forEach((u,f)=>f.setReadTime(t));const o=new Ph(t,n,this.Ye,this.je,s);return this.je=or(),this.Je=Uc(),this.He=Uc(),this.Ye=new ue(Vt),o}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new v0,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new ke(Vt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new ke(Vt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||ut("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new v0),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Uc(){return new ue(gt.comparator)}function T0(){return new ue(gt.comparator)}const gC={asc:"ASCENDING",desc:"DESCENDING"},yC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_C={and:"AND",or:"OR"};class vC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Mm(r,t){return r.useProto3Json||Dh(t)?t:{value:t}}function gh(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ME(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function TC(r,t){return gh(r,t.toTimestamp())}function Ei(r){return Ft(!!r,49232),wt.fromTimestamp(function(n){const s=Zr(n);return new ie(s.seconds,s.nanos)}(r))}function Ep(r,t){return Vm(r,t).canonicalString()}function Vm(r,t){const n=function(o){return new ee(["projects",o.projectId,"databases",o.database])}(r).child("documents");return t===void 0?n:n.child(t)}function VE(r){const t=ee.fromString(r);return Ft(zE(t),10190,{key:t.toString()}),t}function Pm(r,t){return Ep(r.databaseId,t.path)}function lm(r,t){const n=VE(t);if(n.get(1)!==r.databaseId.projectId)throw new lt(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new lt(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new gt(LE(n))}function PE(r,t){return Ep(r.databaseId,t)}function EC(r){const t=VE(r);return t.length===4?ee.emptyPath():LE(t)}function Lm(r){return new ee(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function LE(r){return Ft(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function E0(r,t,n){return{name:Pm(r,t),fields:n.value.mapValue.fields}}function bC(r,t){let n;if("targetChange"in t){t.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Et(39313,{state:g})}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(g,T){return g.useProto3Json?(Ft(T===void 0||typeof T=="string",58123),Ye.fromBase64String(T||"")):(Ft(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ye.fromUint8Array(T||new Uint8Array))}(r,t.targetChange.resumeToken),f=t.targetChange.cause,m=f&&function(g){const T=g.code===void 0?X.UNKNOWN:OE(g.code);return new lt(T,g.message||"")}(f);n=new kE(s,o,u,m||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=lm(r,s.document.name),u=Ei(s.document.updateTime),f=s.document.createTime?Ei(s.document.createTime):wt.min(),m=new fn({mapValue:{fields:s.document.fields}}),y=tn.newFoundDocument(o,u,f,m),g=s.targetIds||[],T=s.removedTargetIds||[];n=new th(g,T,y.key,y)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=lm(r,s.document),u=s.readTime?Ei(s.readTime):wt.min(),f=tn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new th([],m,f.key,f)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=lm(r,s.document),u=s.removedTargetIds||[];n=new th([],u,o,null)}else{if(!("filter"in t))return Et(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new hC(o,u),m=s.targetId;n=new NE(m,f)}}return n}function SC(r,t){let n;if(t instanceof su)n={update:E0(r,t.key,t.value)};else if(t instanceof _p)n={delete:Pm(r,t.key)};else if(t instanceof rs)n={update:E0(r,t.key,t.data),updateMask:NC(t.fieldMask)};else{if(!(t instanceof lC))return Et(16599,{Vt:t.type});n={verify:Pm(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof mh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Xl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Wl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof ph)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Et(20930,{transform:f.transform})}(0,s))),t.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:TC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Et(27497)}(r,t.precondition)),n}function AC(r,t){return r&&r.length>0?(Ft(t!==void 0,14353),r.map(n=>function(o,u){let f=o.updateTime?Ei(o.updateTime):Ei(u);return f.isEqual(wt.min())&&(f=Ei(u)),new sC(f,o.transformResults||[])}(n,t))):[]}function wC(r,t){return{documents:[PE(r,t.path)]}}function RC(r,t){const n={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=PE(r,o);const u=function(g){if(g.length!==0)return BE(Zn.create(g,"and"))}(t.filters);u&&(n.structuredQuery.where=u);const f=function(g){if(g.length!==0)return g.map(T=>function(A){return{field:Za(A.field),direction:xC(A.dir)}}(T))}(t.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Mm(r,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{ft:n,parent:o}}function IC(r){let t=EC(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ft(s===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:t=t.child(T.collectionId)}let u=[];n.where&&(u=function(S){const A=UE(S);return A instanceof Zn&&mE(A)?A.getFilters():[A]}(n.where));let f=[];n.orderBy&&(f=function(S){return S.map(A=>function(z){return new Kl(Ja(z.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(z.direction))}(A))}(n.orderBy));let m=null;n.limit&&(m=function(S){let A;return A=typeof S=="object"?S.value:S,Dh(A)?null:A}(n.limit));let y=null;n.startAt&&(y=function(S){const A=!!S.before,V=S.values||[];return new dh(V,A)}(n.startAt));let g=null;return n.endAt&&(g=function(S){const A=!S.before,V=S.values||[];return new dh(V,A)}(n.endAt)),$I(t,o,f,u,m,"F",y,g)}function CC(r,t){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:o})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function UE(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ja(n.unaryFilter.field);return Re.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Ja(n.unaryFilter.field);return Re.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ja(n.unaryFilter.field);return Re.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ja(n.unaryFilter.field);return Re.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}}(r):r.fieldFilter!==void 0?function(n){return Re.create(Ja(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return Zn.create(n.compositeFilter.filters.map(s=>UE(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Et(1026)}}(n.compositeFilter.op))}(r):Et(30097,{filter:r})}function xC(r){return gC[r]}function DC(r){return yC[r]}function OC(r){return _C[r]}function Za(r){return{fieldPath:r.canonicalString()}}function Ja(r){return Qe.fromServerFormat(r.fieldPath)}function BE(r){return r instanceof Re?function(n){if(n.op==="=="){if(l0(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NAN"}};if(o0(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(l0(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NOT_NAN"}};if(o0(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Za(n.field),op:DC(n.op),value:n.value}}}(r):r instanceof Zn?function(n){const s=n.getFilters().map(o=>BE(o));return s.length===1?s[0]:{compositeFilter:{op:OC(n.op),filters:s}}}(r):Et(54877,{filter:r})}function NC(r){const t=[];return r.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function zE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t,n,s,o,u=wt.min(),f=wt.min(),m=Ye.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(t){return new Hr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t){this.yt=t}}function MC(r){const t=IC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?km(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.Cn=new PC}addToCollectionParentIndex(t,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(t,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return Z.resolve()}deleteFieldIndex(t,n){return Z.resolve()}deleteAllFieldIndexes(t){return Z.resolve()}createTargetIndexes(t,n){return Z.resolve()}getDocumentsMatchingTarget(t,n){return Z.resolve(null)}getIndexType(t,n){return Z.resolve(0)}getFieldIndexes(t,n){return Z.resolve([])}getNextCollectionGroupToUpdate(t){return Z.resolve(null)}getMinOffset(t,n){return Z.resolve(Wr.min())}getMinOffsetFromCollectionGroup(t,n){return Z.resolve(Wr.min())}updateCollectionGroup(t,n,s){return Z.resolve()}updateIndexEntries(t,n){return Z.resolve()}}class PC{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n]||new ke(ee.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(t){return(this.index[t]||new ke(ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jE=41943040;class hn{static withCacheSize(t){return new hn(t,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(jE,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new fo(0)}static cr(){return new fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="LruGarbageCollector",LC=1048576;function A0([r,t],[n,s]){const o=Vt(r,n);return o===0?Vt(t,s):o}class UC{constructor(t){this.Ir=t,this.buffer=new ke(A0),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();A0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BC{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ut(S0,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_o(n)?ut(S0,"Ignoring IndexedDB error during garbage collection: ",n):await yo(n)}await this.Vr(3e5)})}}class zC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return Z.resolve(xh.ce);const s=new UC(n);return this.mr.forEachTarget(t,o=>s.Ar(o.sequenceNumber)).next(()=>this.mr.pr(t,o=>s.Ar(o))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(ut("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(b0)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(ut("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b0):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,o,u,f,m,y,g;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(ut("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(t,o))).next(S=>(s=S,m=Date.now(),this.removeTargets(t,s,n))).next(S=>(u=S,y=Date.now(),this.removeOrphanedDocuments(t,s))).next(S=>(g=Date.now(),Xa()<=Mt.DEBUG&&ut("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(y-m)+`ms
	Removed ${S} documents in `+(g-y)+`ms
Total Duration: ${g-T}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}function jC(r,t){return new zC(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.changes=new ta(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,tn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Z.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t,n,s,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(t,n))).next(o=>(s!==null&&jl(s.mutation,o,An.empty(),ie.now()),o))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Pt()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Pt()){const o=Fs();return this.populateOverlays(t,o,n).next(()=>this.computeViews(t,n,o,s).next(u=>{let f=kl();return u.forEach((m,y)=>{f=f.insert(m,y.overlayedDocument)}),f}))}getOverlayedDocuments(t,n){const s=Fs();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Pt()))}populateOverlays(t,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(t,n,s,o){let u=or();const f=zl(),m=function(){return zl()}();return n.forEach((y,g)=>{const T=s.get(g.key);o.has(g.key)&&(T===void 0||T.mutation instanceof rs)?u=u.insert(g.key,g):T!==void 0?(f.set(g.key,T.mutation.getFieldMask()),jl(T.mutation,g,T.mutation.getFieldMask(),ie.now())):f.set(g.key,An.empty())}),this.recalculateAndSaveOverlays(t,u).next(y=>(y.forEach((g,T)=>f.set(g,T)),n.forEach((g,T)=>m.set(g,new HC(T,f.get(g)??null))),m))}recalculateAndSaveOverlays(t,n){const s=zl();let o=new ue((f,m)=>f-m),u=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(f=>{for(const m of f)m.keys().forEach(y=>{const g=n.get(y);if(g===null)return;let T=s.get(y)||An.empty();T=m.applyToLocalView(g,T),s.set(y,T);const S=(o.get(m.batchId)||Pt()).add(y);o=o.insert(m.batchId,S)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),g=y.key,T=y.value,S=SE();T.forEach(A=>{if(!u.has(A)){const V=xE(n.get(A),s.get(A));V!==null&&S.set(A,V),u=u.add(A)}}),f.push(this.documentOverlayCache.saveOverlays(t,g,S))}return Z.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,o){return function(f){return gt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):_E(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,o):this.getDocumentsMatchingCollectionQuery(t,n,s,o)}getNextDocuments(t,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,o-u.size):Z.resolve(Fs());let m=Gl,y=u;return f.next(g=>Z.forEach(g,(T,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(T)?Z.resolve():this.remoteDocumentCache.getEntry(t,T).next(A=>{y=y.insert(T,A)}))).next(()=>this.populateOverlays(t,g,u)).next(()=>this.computeViews(t,y,g,Pt())).next(T=>({batchId:m,changes:bE(T)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new gt(n)).next(s=>{let o=kl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(t,n,s,o){const u=n.collectionGroup;let f=kl();return this.indexManager.getCollectionParents(t,u).next(m=>Z.forEach(m,y=>{const g=function(S,A){return new vo(A,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(t,g,s,o).next(T=>{T.forEach((S,A)=>{f=f.insert(S,A)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(t,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,u,o))).next(f=>{u.forEach((y,g)=>{const T=g.getKey();f.get(T)===null&&(f=f.insert(T,tn.newInvalidDocument(T)))});let m=kl();return f.forEach((y,g)=>{const T=u.get(y);T!==void 0&&jl(T.mutation,g,An.empty(),ie.now()),kh(n,g)&&(m=m.insert(y,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Ei(o.createTime)}}(n)),Z.resolve()}getNamedQuery(t,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(o){return{name:o.name,query:MC(o.bundledQuery),readTime:Ei(o.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.overlays=new ue(gt.comparator),this.qr=new Map}getOverlay(t,n){return Z.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Fs();return Z.forEach(n,o=>this.getOverlay(t,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((o,u)=>{this.St(t,n,u)}),Z.resolve()}removeOverlaysForBatchId(t,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.qr.delete(s)),Z.resolve()}getOverlaysForCollection(t,n,s){const o=Fs(),u=n.length+1,f=new gt(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,g=y.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&y.largestBatchId>s&&o.set(y.getKey(),y)}return Z.resolve(o)}getOverlaysForCollectionGroup(t,n,s,o){let u=new ue((g,T)=>g-T);const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let T=u.get(g.largestBatchId);T===null&&(T=Fs(),u=u.insert(g.largestBatchId,T)),T.set(g.getKey(),g)}}const m=Fs(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((g,T)=>m.set(g,T)),!(m.size()>=o)););return Z.resolve(m)}St(t,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new cC(n,s));let u=this.qr.get(n);u===void 0&&(u=Pt(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(t){return Z.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(){this.Qr=new ke(ze.$r),this.Ur=new ke(ze.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new ze(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.Gr(new ze(t,n))}zr(t,n){t.forEach(s=>this.removeReference(s,n))}jr(t){const n=new gt(new ee([])),s=new ze(n,t),o=new ze(n,t+1),u=[];return this.Ur.forEachInRange([s,o],f=>{this.Gr(f),u.push(f.key)}),u}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new gt(new ee([])),s=new ze(n,t),o=new ze(n,t+1);let u=Pt();return this.Ur.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(t){const n=new ze(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class ze{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return gt.comparator(t.key,n.key)||Vt(t.Yr,n.Yr)}static Kr(t,n){return Vt(t.Yr,n.Yr)||gt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ke(ze.$r)}checkEmpty(t){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new uC(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new ze(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return Z.resolve(f)}lookupMutationBatch(t,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return Z.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?hp:this.tr-1)}getAllMutationBatches(t){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new ze(n,0),o=new ze(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],f=>{const m=this.Xr(f.Yr);u.push(m)}),Z.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new ke(Vt);return n.forEach(o=>{const u=new ze(o,0),f=new ze(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],m=>{s=s.add(m.Yr)})}),Z.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,o=s.length+1;let u=s;gt.isDocumentKey(u)||(u=u.child(""));const f=new ze(new gt(u),0);let m=new ke(Vt);return this.Zr.forEachWhile(y=>{const g=y.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(y.Yr)),!0)},f),Z.resolve(this.ti(m))}ti(t){const n=[];return t.forEach(s=>{const o=this.Xr(s);o!==null&&n.push(o)}),n}removeMutationBatch(t,n){Ft(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Z.forEach(n.mutations,o=>{const u=new ze(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Zr=s})}ir(t){}containsKey(t,n){const s=new ze(n,0),o=this.Zr.firstAfterOrEqual(s);return Z.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,Z.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(t){this.ri=t,this.docs=function(){return new ue(gt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return Z.resolve(s?s.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(t,n){let s=or();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():tn.newInvalidDocument(o))}),Z.resolve(s)}getDocumentsMatchingQuery(t,n,s,o){let u=or();const f=n.path,m=new gt(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:g,value:{document:T}}=y.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||AI(SI(T),s)<=0||(o.has(T.key)||kh(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return Z.resolve(u)}getAllFromCollectionGroup(t,n,s,o){Et(9500)}ii(t,n){return Z.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new XC(this)}getSize(t){return Z.resolve(this.size)}}class XC extends qC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(s)}),Z.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(t){this.persistence=t,this.si=new ta(n=>mp(n),pp),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.oi=0,this._i=new bp,this.targetCount=0,this.ai=fo.ur()}forEachTarget(t,n){return this.si.forEach((s,o)=>n(o)),Z.resolve()}getLastRemoteSnapshotVersion(t){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Z.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),Z.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new fo(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(t,n){return this.Pr(n),Z.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(t,n,s){let o=0;const u=[];return this.si.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)}),Z.waitFor(u).next(()=>o)}getTargetCount(t){return Z.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return Z.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),Z.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(t,f))}),Z.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return Z.resolve(s)}containsKey(t,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(t,n){this.ui={},this.overlays={},this.ci=new xh(0),this.li=!1,this.li=!0,this.hi=new QC,this.referenceDelegate=t(this),this.Pi=new WC(this),this.indexManager=new VC,this.remoteDocumentCache=function(o){return new KC(o)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new kC(n),this.Ii=new GC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new $C,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new YC(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){ut("MemoryPersistence","Starting transaction:",t);const o=new ZC(this.ci.next());return this.referenceDelegate.Ei(),s(o).next(u=>this.referenceDelegate.di(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ai(t,n){return Z.or(Object.values(this.ui).map(s=>()=>s.containsKey(t,n)))}}class ZC extends RI{constructor(t){super(),this.currentSequenceNumber=t}}class Sp{constructor(t){this.persistence=t,this.Ri=new bp,this.Vi=null}static mi(t){return new Sp(t)}get fi(){if(this.Vi)return this.Vi;throw Et(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),Z.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(o=>{o.forEach(u=>this.fi.add(u.toString()))}).next(()=>s.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,s=>{const o=gt.fromPath(s);return this.gi(t,o).next(u=>{u||n.removeEntry(o,wt.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class yh{constructor(t,n){this.persistence=t,this.pi=new ta(s=>xI(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=jC(this,n)}static mi(t,n){return new yh(t,n)}Ei(){}di(t){return Z.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(o=>s+o))}wr(t){let n=0;return this.pr(t,s=>{n++}).next(()=>n)}pr(t,n){return Z.forEach(this.pi,(s,o)=>this.br(t,s,o).next(u=>u?Z.resolve():n(o)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,f=>this.br(t,f,n).next(m=>{m||(s++,u.removeEntry(f,wt.min()))})).next(()=>u.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),Z.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),Z.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),Z.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),Z.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Wc(t.data.value)),n}br(t,n,s){return Z.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.pi.get(n);return Z.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(t,n,s,o){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=o}static As(t,n){let s=Pt(),o=Pt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ap(t,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return FA()?8:II(en())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,o){const u={result:null};return this.ys(t,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ws(t,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new JC;return this.Ss(t,n,f).next(m=>{if(u.result=m,this.Vs)return this.bs(t,n,f,m.size)})}).next(()=>u.result)}bs(t,n,s,o){return s.documentReadCount<this.fs?(Xa()<=Mt.DEBUG&&ut("QueryEngine","SDK will not create cache indexes for query:",Wa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(Xa()<=Mt.DEBUG&&ut("QueryEngine","Query:",Wa(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Xa()<=Mt.DEBUG&&ut("QueryEngine","The SDK decides to create cache indexes for query:",Wa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ti(n))):Z.resolve())}ys(t,n){if(f0(n))return Z.resolve(null);let s=Ti(n);return this.indexManager.getIndexType(t,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=km(n,null,"F"),s=Ti(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(u=>{const f=Pt(...u);return this.ps.getDocuments(t,f).next(m=>this.indexManager.getMinOffset(t,s).next(y=>{const g=this.Ds(n,m);return this.Cs(n,g,f,y.readTime)?this.ys(t,km(n,null,"F")):this.vs(t,g,n,y)}))})))}ws(t,n,s,o){return f0(n)||o.isEqual(wt.min())?Z.resolve(null):this.ps.getDocuments(t,s).next(u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?Z.resolve(null):(Xa()<=Mt.DEBUG&&ut("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Wa(n)),this.vs(t,f,n,bI(o,Gl)).next(m=>m))})}Ds(t,n){let s=new ke(TE(t));return n.forEach((o,u)=>{kh(t,u)&&(s=s.add(u))}),s}Cs(t,n,s,o){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,n,s){return Xa()<=Mt.DEBUG&&ut("QueryEngine","Using full collection scan to execute query:",Wa(n)),this.ps.getDocumentsMatchingQuery(t,n,Wr.min(),s)}vs(t,n,s,o){return this.ps.getDocumentsMatchingQuery(t,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="LocalStore",ex=3e8;class nx{constructor(t,n,s,o){this.persistence=t,this.Fs=n,this.serializer=o,this.Ms=new ue(Vt),this.xs=new ta(u=>mp(u),pp),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new FC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function ix(r,t,n,s){return new nx(r,t,n,s)}async function HE(r,t){const n=Rt(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let y=Pt();for(const g of o){f.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}for(const g of u){m.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}return n.localDocuments.getDocuments(s,y).next(g=>({Ls:g,removedBatchIds:f,addedBatchIds:m}))})})}function rx(r,t){const n=Rt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=t.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return function(m,y,g,T){const S=g.batch,A=S.keys();let V=Z.resolve();return A.forEach(z=>{V=V.next(()=>T.getEntry(y,z)).next(F=>{const U=g.docVersions.get(z);Ft(U!==null,48541),F.version.compareTo(U)<0&&(S.applyToRemoteDocument(F,g),F.isValidDocument()&&(F.setReadTime(g.commitVersion),T.addEntry(F)))})}),V.next(()=>m.mutationQueue.removeMutationBatch(y,S))}(n,s,t,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let y=Pt();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(y=y.add(m.batch.mutations[g].key));return y}(t))).next(()=>n.localDocuments.getDocuments(s,o))})}function FE(r){const t=Rt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function sx(r,t){const n=Rt(r),s=t.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];t.targetChanges.forEach((T,S)=>{const A=o.get(S);if(!A)return;m.push(n.Pi.removeMatchingKeys(u,T.removedDocuments,S).next(()=>n.Pi.addMatchingKeys(u,T.addedDocuments,S)));let V=A.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(S)!==null?V=V.withResumeToken(Ye.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):T.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(T.resumeToken,s)),o=o.insert(S,V),function(F,U,tt){return F.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=ex?!0:tt.addedDocuments.size+tt.modifiedDocuments.size+tt.removedDocuments.size>0}(A,V,T)&&m.push(n.Pi.updateTargetData(u,V))});let y=or(),g=Pt();if(t.documentUpdates.forEach(T=>{t.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))}),m.push(ax(u,f,t.documentUpdates).next(T=>{y=T.ks,g=T.qs})),!s.isEqual(wt.min())){const T=n.Pi.getLastRemoteSnapshotVersion(u).next(S=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(T)}return Z.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,y,g)).next(()=>y)}).then(u=>(n.Ms=o,u))}function ax(r,t,n){let s=Pt(),o=Pt();return n.forEach(u=>s=s.add(u)),t.getEntries(r,s).next(u=>{let f=or();return n.forEach((m,y)=>{const g=u.get(m);y.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(wt.min())?(t.removeEntry(m,y.readTime),f=f.insert(m,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(y),f=f.insert(m,y)):ut(wp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",y.version)}),{ks:f,qs:o}})}function ox(r,t){const n=Rt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=hp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function lx(r,t){const n=Rt(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Pi.getTargetData(s,t).next(u=>u?(o=u,Z.resolve(o)):n.Pi.allocateTargetId(s).next(f=>(o=new Hr(t,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s})}async function Um(r,t,n){const s=Rt(r),o=s.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!_o(f))throw f;ut(wp,`Failed to update sequence numbers for target ${t}: ${f}`)}s.Ms=s.Ms.remove(t),s.xs.delete(o.target)}function w0(r,t,n){const s=Rt(r);let o=wt.min(),u=Pt();return s.persistence.runTransaction("Execute query","readwrite",f=>function(y,g,T){const S=Rt(y),A=S.xs.get(T);return A!==void 0?Z.resolve(S.Ms.get(A)):S.Pi.getTargetData(g,T)}(s,f,Ti(t)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next(y=>{u=y})}).next(()=>s.Fs.getDocumentsMatchingQuery(f,t,n?o:wt.min(),n?u:Pt())).next(m=>(ux(s,YI(t),m),{documents:m,Qs:u})))}function ux(r,t,n){let s=r.Os.get(t)||wt.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Os.set(t,s)}class R0{constructor(){this.activeTargetIds=tC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class cx{constructor(){this.Mo=new R0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new R0,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="ConnectivityMonitor";class C0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ut(I0,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ut(I0,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc=null;function Bm(){return Bc===null?Bc=function(){return 268435456+Math.round(2147483648*Math.random())}():Bc++,"0x"+Bc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="RestConnection",fx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dx{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===hh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(t,n,s,o,u){const f=Bm(),m=this.zo(t,n.toUriEncodedString());ut(um,`Sending RPC '${t}' ${f}:`,m,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,u);const{host:g}=new URL(m),T=lr(g);return this.Jo(t,m,y,s,T).then(S=>(ut(um,`Received RPC '${t}' ${f}: `,S),S),S=>{throw lo(um,`RPC '${t}' ${f} failed with error: `,S,"url: ",m,"request:",s),S})}Ho(t,n,s,o,u,f){return this.Go(t,n,s,o,u)}jo(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+go}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>t[u]=o),s&&s.headers.forEach((o,u)=>t[u]=o)}zo(t,n){const s=fx[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class px extends dx{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,o,u){const f=Bm();return new Promise((m,y)=>{const g=new QT;g.setWithCredentials(!0),g.listenOnce(YT.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Xc.NO_ERROR:const S=g.getResponseJson();ut(Ze,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(S)),m(S);break;case Xc.TIMEOUT:ut(Ze,`RPC '${t}' ${f} timed out`),y(new lt(X.DEADLINE_EXCEEDED,"Request time out"));break;case Xc.HTTP_ERROR:const A=g.getStatus();if(ut(Ze,`RPC '${t}' ${f} failed with status:`,A,"response text:",g.getResponseText()),A>0){let V=g.getResponseJson();Array.isArray(V)&&(V=V[0]);const z=V?.error;if(z&&z.status&&z.message){const F=function(tt){const et=tt.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(et)>=0?et:X.UNKNOWN}(z.status);y(new lt(F,z.message))}else y(new lt(X.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new lt(X.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{l_:t,streamId:f,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ut(Ze,`RPC '${t}' ${f} completed.`)}});const T=JSON.stringify(o);ut(Ze,`RPC '${t}' ${f} sending request:`,o),g.send(n,"POST",T,s,15)})}T_(t,n,s){const o=Bm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=WT(),m=XT(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const T=u.join("");ut(Ze,`Creating RPC '${t}' stream ${o}: ${T}`,y);const S=f.createWebChannel(T,y);this.I_(S);let A=!1,V=!1;const z=new mx({Yo:U=>{V?ut(Ze,`Not sending because RPC '${t}' stream ${o} is closed:`,U):(A||(ut(Ze,`Opening RPC '${t}' stream ${o} transport.`),S.open(),A=!0),ut(Ze,`RPC '${t}' stream ${o} sending:`,U),S.send(U))},Zo:()=>S.close()}),F=(U,tt,et)=>{U.listen(tt,nt=>{try{et(nt)}catch(yt){setTimeout(()=>{throw yt},0)}})};return F(S,Nl.EventType.OPEN,()=>{V||(ut(Ze,`RPC '${t}' stream ${o} transport opened.`),z.o_())}),F(S,Nl.EventType.CLOSE,()=>{V||(V=!0,ut(Ze,`RPC '${t}' stream ${o} transport closed`),z.a_(),this.E_(S))}),F(S,Nl.EventType.ERROR,U=>{V||(V=!0,lo(Ze,`RPC '${t}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),z.a_(new lt(X.UNAVAILABLE,"The operation could not be completed")))}),F(S,Nl.EventType.MESSAGE,U=>{if(!V){const tt=U.data[0];Ft(!!tt,16349);const et=tt,nt=et?.error||et[0]?.error;if(nt){ut(Ze,`RPC '${t}' stream ${o} received error:`,nt);const yt=nt.status;let ft=function(w){const I=we[w];if(I!==void 0)return OE(I)}(yt),_t=nt.message;ft===void 0&&(ft=X.INTERNAL,_t="Unknown error status: "+yt+" with message "+nt.message),V=!0,z.a_(new lt(ft,_t)),S.close()}else ut(Ze,`RPC '${t}' stream ${o} received:`,tt),z.u_(tt)}}),F(m,KT.STAT_EVENT,U=>{U.stat===Rm.PROXY?ut(Ze,`RPC '${t}' stream ${o} detected buffering proxy`):U.stat===Rm.NOPROXY&&ut(Ze,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{z.__()},0),z}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function cm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(r){return new vC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(t,n,s=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&ut("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="PersistentStream";class $E{constructor(t,n,s,o,u,f,m,y){this.Mi=t,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GE(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(ar(n.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.D_===n&&this.G_(s,o)},s=>{t(()=>{const o=new lt(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)})})}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{s(()=>this.z_(o))}),this.stream.onMessage(o=>{s(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return ut(x0,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(ut(x0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gx extends $E{constructor(t,n,s,o,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=bC(this.serializer,t),s=function(u){if(!("targetChange"in u))return wt.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?wt.min():f.readTime?Ei(f.readTime):wt.min()}(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=Lm(this.serializer),n.addTarget=function(u,f){let m;const y=f.target;if(m=Om(y)?{documents:wC(u,y)}:{query:RC(u,y).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=ME(u,f.resumeToken);const g=Mm(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(wt.min())>0){m.readTime=gh(u,f.snapshotVersion.toTimestamp());const g=Mm(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,t);const s=CC(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=Lm(this.serializer),n.removeTarget=t,this.q_(n)}}class yx extends $E{constructor(t,n,s,o,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Ft(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ft(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ft(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=AC(t.writeResults,t.commitTime),s=Ei(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=Lm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>SC(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{}class vx extends _x{constructor(t,n,s,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new lt(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Go(t,Vm(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new lt(X.UNKNOWN,u.toString())})}Ho(t,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Ho(t,Vm(n,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new lt(X.UNKNOWN,f.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Tx{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ar(n),this.aa=!1):ut("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="RemoteStore";class Ex{constructor(t,n,s,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo(f=>{s.enqueueAndForget(async()=>{ea(this)&&(ut(Ws,"Restarting streams for network reachability change."),await async function(y){const g=Rt(y);g.Ea.add(4),await ou(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Uh(g)}(this))})}),this.Ra=new Tx(s,o)}}async function Uh(r){if(ea(r))for(const t of r.da)await t(!0)}async function ou(r){for(const t of r.da)await t(!1)}function QE(r,t){const n=Rt(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),xp(n)?Cp(n):To(n).O_()&&Ip(n,t))}function Rp(r,t){const n=Rt(r),s=To(n);n.Ia.delete(t),s.O_()&&YE(n,t),n.Ia.size===0&&(s.O_()?s.L_():ea(n)&&n.Ra.set("Unknown"))}function Ip(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(wt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}To(r).Y_(t)}function YE(r,t){r.Va.Ue(t),To(r).Z_(t)}function Cp(r){r.Va=new pC({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),To(r).start(),r.Ra.ua()}function xp(r){return ea(r)&&!To(r).x_()&&r.Ia.size>0}function ea(r){return Rt(r).Ea.size===0}function KE(r){r.Va=void 0}async function bx(r){r.Ra.set("Online")}async function Sx(r){r.Ia.forEach((t,n)=>{Ip(r,t)})}async function Ax(r,t){KE(r),xp(r)?(r.Ra.ha(t),Cp(r)):r.Ra.set("Unknown")}async function wx(r,t,n){if(r.Ra.set("Online"),t instanceof kE&&t.state===2&&t.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))}(r,t)}catch(s){ut(Ws,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await _h(r,s)}else if(t instanceof th?r.Va.Ze(t):t instanceof NE?r.Va.st(t):r.Va.tt(t),!n.isEqual(wt.min()))try{const s=await FE(r.localStore);n.compareTo(s)>=0&&await function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const T=u.Ia.get(g);T&&u.Ia.set(g,T.withResumeToken(y.resumeToken,f))}}),m.targetMismatches.forEach((y,g)=>{const T=u.Ia.get(y);if(!T)return;u.Ia.set(y,T.withResumeToken(Ye.EMPTY_BYTE_STRING,T.snapshotVersion)),YE(u,y);const S=new Hr(T.target,y,g,T.sequenceNumber);Ip(u,S)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){ut(Ws,"Failed to raise snapshot:",s),await _h(r,s)}}async function _h(r,t,n){if(!_o(t))throw t;r.Ea.add(1),await ou(r),r.Ra.set("Offline"),n||(n=()=>FE(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ut(Ws,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Uh(r)})}function XE(r,t){return t().catch(n=>_h(r,n,t))}async function Bh(r){const t=Rt(r),n=es(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:hp;for(;Rx(t);)try{const o=await ox(t.localStore,s);if(o===null){t.Ta.length===0&&n.L_();break}s=o.batchId,Ix(t,o)}catch(o){await _h(t,o)}WE(t)&&ZE(t)}function Rx(r){return ea(r)&&r.Ta.length<10}function Ix(r,t){r.Ta.push(t);const n=es(r);n.O_()&&n.X_&&n.ea(t.mutations)}function WE(r){return ea(r)&&!es(r).x_()&&r.Ta.length>0}function ZE(r){es(r).start()}async function Cx(r){es(r).ra()}async function xx(r){const t=es(r);for(const n of r.Ta)t.ea(n.mutations)}async function Dx(r,t,n){const s=r.Ta.shift(),o=vp.from(s,t,n);await XE(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Bh(r)}async function Ox(r,t){t&&es(r).X_&&await async function(s,o){if(function(f){return fC(f)&&f!==X.ABORTED}(o.code)){const u=s.Ta.shift();es(s).B_(),await XE(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Bh(s)}}(r,t),WE(r)&&ZE(r)}async function D0(r,t){const n=Rt(r);n.asyncQueue.verifyOperationInProgress(),ut(Ws,"RemoteStore received new credentials");const s=ea(n);n.Ea.add(3),await ou(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Uh(n)}async function Nx(r,t){const n=Rt(r);t?(n.Ea.delete(2),await Uh(n)):t||(n.Ea.add(2),await ou(n),n.Ra.set("Unknown"))}function To(r){return r.ma||(r.ma=function(n,s,o){const u=Rt(n);return u.sa(),new gx(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Xo:bx.bind(null,r),t_:Sx.bind(null,r),r_:Ax.bind(null,r),H_:wx.bind(null,r)}),r.da.push(async t=>{t?(r.ma.B_(),xp(r)?Cp(r):r.Ra.set("Unknown")):(await r.ma.stop(),KE(r))})),r.ma}function es(r){return r.fa||(r.fa=function(n,s,o){const u=Rt(n);return u.sa(),new yx(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:Cx.bind(null,r),r_:Ox.bind(null,r),ta:xx.bind(null,r),na:Dx.bind(null,r)}),r.da.push(async t=>{t?(r.fa.B_(),await Bh(r)):(await r.fa.stop(),r.Ta.length>0&&(ut(Ws,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(t,n,s,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,o,u){const f=Date.now()+s,m=new Dp(t,n,f,o,u);return m.start(s),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(X.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Op(r,t){if(ar("AsyncQueue",`${t}: ${r}`),_o(r))return new lt(X.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{static emptySet(t){return new so(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||gt.comparator(n.key,s.key):(n,s)=>gt.comparator(n.key,s.key),this.keyedMap=kl(),this.sortedSet=new ue(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof so)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new so;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this.ga=new ue(gt.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Et(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,s)=>{t.push(s)}),t}}class mo{constructor(t,n,s,o,u,f,m,y,g){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(t,n,s,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new mo(t,n,so.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Nh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Mx{constructor(){this.queries=N0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Rt(n),u=o.queries;o.queries=N0(),u.forEach((f,m)=>{for(const y of m.Sa)y.onError(s)})})(this,new lt(X.ABORTED,"Firestore shutting down"))}}function N0(){return new ta(r=>vE(r),Nh)}async function JE(r,t){const n=Rt(r);let s=3;const o=t.query;let u=n.queries.get(o);u?!u.ba()&&t.Da()&&(s=2):(u=new kx,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Op(f,`Initialization of query '${Wa(t.query)}' failed`);return void t.onError(m)}n.queries.set(o,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&Np(n)}async function tb(r,t){const n=Rt(r),s=t.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(t);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Vx(r,t){const n=Rt(r);let s=!1;for(const o of t){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&Np(n)}function Px(r,t,n){const s=Rt(r),o=s.queries.get(t);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(t)}function Np(r){r.Ca.forEach(t=>{t.next()})}var zm,k0;(k0=zm||(zm={})).Ma="default",k0.Cache="cache";class eb{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new mo(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=mo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==zm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(t){this.key=t}}class ib{constructor(t){this.key=t}}class Lx{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pt(),this.mutatedKeys=Pt(),this.eu=TE(t),this.tu=new so(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new O0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((T,S)=>{const A=o.get(T),V=kh(this.query,S)?S:null,z=!!A&&this.mutatedKeys.has(A.key),F=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let U=!1;A&&V?A.data.isEqual(V.data)?z!==F&&(s.track({type:3,doc:V}),U=!0):this.su(A,V)||(s.track({type:2,doc:V}),U=!0,(y&&this.eu(V,y)>0||g&&this.eu(V,g)<0)&&(m=!0)):!A&&V?(s.track({type:0,doc:V}),U=!0):A&&!V&&(s.track({type:1,doc:A}),U=!0,(y||g)&&(m=!0)),U&&(V?(f=f.add(V),u=F?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),s.track({type:1,doc:T})}return{tu:f,iu:s,Cs:m,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort((T,S)=>function(V,z){const F=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{Rt:U})}};return F(V)-F(z)}(T.type,S.type)||this.eu(T.doc,S.doc)),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,g=y!==this.Za;return this.Za=y,f.length!==0||g?{snapshot:new mo(this.query,t.tu,u,f,t.mutatedKeys,y===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new O0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Pt(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return t.forEach(s=>{this.Xa.has(s)||n.push(new ib(s))}),this.Xa.forEach(s=>{t.has(s)||n.push(new nb(s))}),n}cu(t){this.Ya=t.Qs,this.Xa=Pt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return mo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const kp="SyncEngine";class Ux{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class Bx{constructor(t){this.key=t,this.hu=!1}}class zx{constructor(t,n,s,o,u,f){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ta(m=>vE(m),Nh),this.Iu=new Map,this.Eu=new Set,this.du=new ue(gt.comparator),this.Au=new Map,this.Ru=new bp,this.Vu={},this.mu=new Map,this.fu=fo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function jx(r,t,n=!0){const s=ub(r);let o;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await rb(s,t,n,!0),o}async function qx(r,t){const n=ub(r);await rb(n,t,!0,!1)}async function rb(r,t,n,s){const o=await lx(r.localStore,Ti(t)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await Hx(r,t,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&QE(r.remoteStore,o),m}async function Hx(r,t,n,s,o){r.pu=(S,A,V)=>async function(F,U,tt,et){let nt=U.view.ru(tt);nt.Cs&&(nt=await w0(F.localStore,U.query,!1).then(({documents:k})=>U.view.ru(k,nt)));const yt=et&&et.targetChanges.get(U.targetId),ft=et&&et.targetMismatches.get(U.targetId)!=null,_t=U.view.applyChanges(nt,F.isPrimaryClient,yt,ft);return V0(F,U.targetId,_t.au),_t.snapshot}(r,S,A,V);const u=await w0(r.localStore,t,!0),f=new Lx(t,u.Qs),m=f.ru(u.documents),y=au.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),g=f.applyChanges(m,r.isPrimaryClient,y);V0(r,n,g.au);const T=new Ux(t,n,f);return r.Tu.set(t,T),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),g.snapshot}async function Fx(r,t,n){const s=Rt(r),o=s.Tu.get(t),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter(f=>!Nh(f,t))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Um(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Rp(s.remoteStore,o.targetId),jm(s,o.targetId)}).catch(yo)):(jm(s,o.targetId),await Um(s.localStore,o.targetId,!0))}async function Gx(r,t){const n=Rt(r),s=n.Tu.get(t),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Rp(n.remoteStore,s.targetId))}async function $x(r,t,n){const s=Jx(r);try{const o=await function(f,m){const y=Rt(f),g=ie.now(),T=m.reduce((V,z)=>V.add(z.key),Pt());let S,A;return y.persistence.runTransaction("Locally write mutations","readwrite",V=>{let z=or(),F=Pt();return y.Ns.getEntries(V,T).next(U=>{z=U,z.forEach((tt,et)=>{et.isValidDocument()||(F=F.add(tt))})}).next(()=>y.localDocuments.getOverlayedDocuments(V,z)).next(U=>{S=U;const tt=[];for(const et of m){const nt=oC(et,S.get(et.key).overlayedDocument);nt!=null&&tt.push(new rs(et.key,nt,hE(nt.value.mapValue),jn.exists(!0)))}return y.mutationQueue.addMutationBatch(V,g,tt,m)}).next(U=>{A=U;const tt=U.applyToLocalDocumentSet(S,F);return y.documentOverlayCache.saveOverlays(V,U.batchId,tt)})}).then(()=>({batchId:A.batchId,changes:bE(S)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,y){let g=f.Vu[f.currentUser.toKey()];g||(g=new ue(Vt)),g=g.insert(m,y),f.Vu[f.currentUser.toKey()]=g}(s,o.batchId,n),await lu(s,o.changes),await Bh(s.remoteStore)}catch(o){const u=Op(o,"Failed to persist write");n.reject(u)}}async function sb(r,t){const n=Rt(r);try{const s=await sx(n.localStore,t);t.targetChanges.forEach((o,u)=>{const f=n.Au.get(u);f&&(Ft(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Ft(f.hu,14607):o.removedDocuments.size>0&&(Ft(f.hu,42227),f.hu=!1))}),await lu(n,s,t)}catch(s){await yo(s)}}function M0(r,t,n){const s=Rt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach((u,f)=>{const m=f.view.va(t);m.snapshot&&o.push(m.snapshot)}),function(f,m){const y=Rt(f);y.onlineState=m;let g=!1;y.queries.forEach((T,S)=>{for(const A of S.Sa)A.va(m)&&(g=!0)}),g&&Np(y)}(s.eventManager,t),o.length&&s.Pu.H_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function Qx(r,t,n){const s=Rt(r);s.sharedClientState.updateQueryState(t,"rejected",n);const o=s.Au.get(t),u=o&&o.key;if(u){let f=new ue(gt.comparator);f=f.insert(u,tn.newNoDocument(u,wt.min()));const m=Pt().add(u),y=new Ph(wt.min(),new Map,new ue(Vt),f,m);await sb(s,y),s.du=s.du.remove(u),s.Au.delete(t),Mp(s)}else await Um(s.localStore,t,!1).then(()=>jm(s,t,n)).catch(yo)}async function Yx(r,t){const n=Rt(r),s=t.batch.batchId;try{const o=await rx(n.localStore,t);ob(n,s,null),ab(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await lu(n,o)}catch(o){await yo(o)}}async function Kx(r,t,n){const s=Rt(r);try{const o=await function(f,m){const y=Rt(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let T;return y.mutationQueue.lookupMutationBatch(g,m).next(S=>(Ft(S!==null,37113),T=S.keys(),y.mutationQueue.removeMutationBatch(g,S))).next(()=>y.mutationQueue.performConsistencyCheck(g)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(g,T,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,T)).next(()=>y.localDocuments.getDocuments(g,T))})}(s.localStore,t);ob(s,t,n),ab(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await lu(s,o)}catch(o){await yo(o)}}function ab(r,t){(r.mu.get(t)||[]).forEach(n=>{n.resolve()}),r.mu.delete(t)}function ob(r,t,n){const s=Rt(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),s.Vu[s.currentUser.toKey()]=o}}function jm(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach(s=>{r.Ru.containsKey(s)||lb(r,s)})}function lb(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(Rp(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),Mp(r))}function V0(r,t,n){for(const s of n)s instanceof nb?(r.Ru.addReference(s.key,t),Xx(r,s)):s instanceof ib?(ut(kp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||lb(r,s.key)):Et(19791,{wu:s})}function Xx(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(ut(kp,"New document in limbo: "+n),r.Eu.add(s),Mp(r))}function Mp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new gt(ee.fromString(t)),s=r.fu.next();r.Au.set(s,new Bx(n)),r.du=r.du.insert(n,s),QE(r.remoteStore,new Hr(Ti(gp(n.path)),s,"TargetPurposeLimboResolution",xh.ce))}}async function lu(r,t,n){const s=Rt(r),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach((m,y)=>{f.push(s.pu(y,t,n).then(g=>{if((g||n)&&s.isPrimaryClient){const T=g?!g.fromCache:n?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(g){o.push(g);const T=Ap.As(y.targetId,g);u.push(T)}}))}),await Promise.all(f),s.Pu.H_(o),await async function(y,g){const T=Rt(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>Z.forEach(g,A=>Z.forEach(A.Es,V=>T.persistence.referenceDelegate.addReference(S,A.targetId,V)).next(()=>Z.forEach(A.ds,V=>T.persistence.referenceDelegate.removeReference(S,A.targetId,V)))))}catch(S){if(!_o(S))throw S;ut(wp,"Failed to update sequence numbers: "+S)}for(const S of g){const A=S.targetId;if(!S.fromCache){const V=T.Ms.get(A),z=V.snapshotVersion,F=V.withLastLimboFreeSnapshotVersion(z);T.Ms=T.Ms.insert(A,F)}}}(s.localStore,u))}async function Wx(r,t){const n=Rt(r);if(!n.currentUser.isEqual(t)){ut(kp,"User change. New user:",t.toKey());const s=await HE(n.localStore,t);n.currentUser=t,function(u,f){u.mu.forEach(m=>{m.forEach(y=>{y.reject(new lt(X.CANCELLED,f))})}),u.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await lu(n,s.Ls)}}function Zx(r,t){const n=Rt(r),s=n.Au.get(t);if(s&&s.hu)return Pt().add(s.key);{let o=Pt();const u=n.Iu.get(t);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function ub(r){const t=Rt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=sb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Qx.bind(null,t),t.Pu.H_=Vx.bind(null,t.eventManager),t.Pu.yu=Px.bind(null,t.eventManager),t}function Jx(r){const t=Rt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Yx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Kx.bind(null,t),t}class vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Lh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return ix(this.persistence,new tx,t.initialUser,this.serializer)}Cu(t){return new qE(Sp.mi,this.serializer)}Du(t){return new cx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vh.provider={build:()=>new vh};class t2 extends vh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Ft(this.persistence.referenceDelegate instanceof yh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new BC(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new qE(s=>yh.mi(s,n),this.serializer)}}class qm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>M0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Wx.bind(null,this.syncEngine),await Nx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Mx}()}createDatastore(t){const n=Lh(t.databaseInfo.databaseId),s=function(u){return new px(u)}(t.databaseInfo);return function(u,f,m,y){return new vx(u,f,m,y)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,o,u,f,m){return new Ex(s,o,u,f,m)}(this.localStore,this.datastore,t.asyncQueue,n=>M0(this.syncEngine,n,0),function(){return C0.v()?new C0:new hx}())}createSyncEngine(t,n){return function(o,u,f,m,y,g,T){const S=new zx(o,u,f,m,y,g);return T&&(S.gu=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=Rt(n);ut(Ws,"RemoteStore shutting down."),s.Ea.add(5),await ou(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}qm.provider={build:()=>new qm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):ar("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="FirestoreClient";class e2{constructor(t,n,s,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Je.UNAUTHENTICATED,this.clientId=cp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{ut(ns,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(ut(ns,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Op(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function hm(r,t){r.asyncQueue.verifyOperationInProgress(),ut(ns,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await HE(t.localStore,o),s=o)}),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t}async function P0(r,t){r.asyncQueue.verifyOperationInProgress();const n=await n2(r);ut(ns,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener(s=>D0(t.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>D0(t.remoteStore,o)),r._onlineComponents=t}async function n2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ut(ns,"Using user provided OfflineComponentProvider");try{await hm(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;lo("Error using user provided cache. Falling back to memory cache: "+n),await hm(r,new vh)}}else ut(ns,"Using default OfflineComponentProvider"),await hm(r,new t2(void 0));return r._offlineComponents}async function hb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ut(ns,"Using user provided OnlineComponentProvider"),await P0(r,r._uninitializedComponentsProvider._online)):(ut(ns,"Using default OnlineComponentProvider"),await P0(r,new qm))),r._onlineComponents}function i2(r){return hb(r).then(t=>t.syncEngine)}async function fb(r){const t=await hb(r),n=t.eventManager;return n.onListen=jx.bind(null,t.syncEngine),n.onUnlisten=Fx.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=qx.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Gx.bind(null,t.syncEngine),n}function r2(r,t,n={}){const s=new nr;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,y,g){const T=new cb({next:A=>{T.Nu(),f.enqueueAndForget(()=>tb(u,S));const V=A.docs.has(m);!V&&A.fromCache?g.reject(new lt(X.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&A.fromCache&&y&&y.source==="server"?g.reject(new lt(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(A)},error:A=>g.reject(A)}),S=new eb(gp(m.path),T,{includeMetadataChanges:!0,qa:!0});return JE(u,S)}(await fb(r),r.asyncQueue,t,n,s)),s.promise}function s2(r,t,n={}){const s=new nr;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,y,g){const T=new cb({next:A=>{T.Nu(),f.enqueueAndForget(()=>tb(u,S)),A.fromCache&&y.source==="server"?g.reject(new lt(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),S=new eb(m,T,{includeMetadataChanges:!0,qa:!0});return JE(u,S)}(await fb(r),r.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="firestore.googleapis.com",U0=!0;class B0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new lt(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mb,this.ssl=U0}else this.host=t.host,this.ssl=t.ssl??U0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=jE;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<LC)throw new lt(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}EI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=db(t.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new lt(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new lt(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new lt(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class zh{constructor(t,n,s,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new lt(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new hI;switch(s.type){case"firstParty":return new pI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new lt(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=L0.get(n);s&&(ut("ComponentProvider","Removing Datastore"),L0.delete(n),s.terminate())}(this),Promise.resolve()}}function a2(r,t,n,s={}){r=Wn(r,zh);const o=lr(t),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},m=`${t}:${n}`;o&&(bh(`https://${m}`),Sh("Firestore",!0)),u.host!==mb&&u.host!==m&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:m,ssl:o,emulatorOptions:s};if(!Ys(y,f)&&(r._setSettings(y),s.mockUserToken)){let g,T;if(typeof s.mockUserToken=="string")g=s.mockUserToken,T=Je.MOCK_USER;else{g=cT(s.mockUserToken,r._app?.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new lt(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Je(S)}r._authCredentials=new fI(new JT(g,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new na(this.firestore,t,this._query)}}class Te{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Te(this.firestore,t,this._key)}toJSON(){return{type:Te._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(ru(n,Te._jsonSchema))return new Te(t,s||null,new gt(ee.fromString(n.referencePath)))}}Te._jsonSchemaVersion="firestore/documentReference/1.0",Te._jsonSchema={type:Ie("string",Te._jsonSchemaVersion),referencePath:Ie("string")};class Yr extends na{constructor(t,n,s){super(t,n,gp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Te(this.firestore,null,new gt(t))}withConverter(t){return new Yr(this.firestore,t,this._path)}}function eo(r,t,...n){if(r=ae(r),tE("collection","path",t),r instanceof zh){const s=ee.fromString(t,...n);return Zv(s),new Yr(r,null,s)}{if(!(r instanceof Te||r instanceof Yr))throw new lt(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ee.fromString(t,...n));return Zv(s),new Yr(r.firestore,null,s)}}function Fr(r,t,...n){if(r=ae(r),arguments.length===1&&(t=cp.newId()),tE("doc","path",t),r instanceof zh){const s=ee.fromString(t,...n);return Wv(s),new Te(r,null,new gt(s))}{if(!(r instanceof Te||r instanceof Yr))throw new lt(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ee.fromString(t,...n));return Wv(s),new Te(r.firestore,r instanceof Yr?r.converter:null,new gt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="AsyncQueue";class j0{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GE(this,"async_queue_retry"),this._c=()=>{const s=cm();s&&ut(z0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=cm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=cm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new nr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!_o(t))throw t;ut(z0,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(s=>{throw this.nc=s,this.rc=!1,ar("INTERNAL UNHANDLED ERROR: ",q0(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const o=Dp.createAndSchedule(this,t,n,s,u=>this.hc(u));return this.tc.push(o),o}uc(){this.nc&&Et(47125,{Pc:q0(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function q0(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class ia extends zh{constructor(t,n,s,o){super(t,n,s,o),this.type="firestore",this._queue=new j0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new j0(t),this._firestoreClient=void 0,await t}}}function o2(r,t){const n=typeof r=="object"?r:Ah(),s=typeof r=="string"?r:hh,o=tu(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=Xm("firestore");u&&a2(o,...u)}return o}function Vp(r){if(r._terminated)throw new lt(X.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||l2(r),r._firestoreClient}function l2(r){const t=r._freezeSettings(),n=function(o,u,f,m){return new NI(o,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,db(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new e2(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Bn(Ye.fromBase64String(t))}catch(n){throw new lt(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Bn(Ye.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ru(t,Bn._jsonSchema))return Bn.fromBase64String(t.bytes)}}Bn._jsonSchemaVersion="firestore/bytes/1.0",Bn._jsonSchema={type:Ie("string",Bn._jsonSchemaVersion),bytes:Ie("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new lt(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new lt(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new lt(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Vt(this._lat,t._lat)||Vt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bi._jsonSchemaVersion}}static fromJSON(t){if(ru(t,bi._jsonSchema))return new bi(t.latitude,t.longitude)}}bi._jsonSchemaVersion="firestore/geoPoint/1.0",bi._jsonSchema={type:Ie("string",bi._jsonSchemaVersion),latitude:Ie("number"),longitude:Ie("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ru(t,Si._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Si(t.vectorValues);throw new lt(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Si._jsonSchemaVersion="firestore/vectorValue/1.0",Si._jsonSchema={type:Ie("string",Si._jsonSchemaVersion),vectorValues:Ie("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=/^__.*__$/;class c2{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new rs(t,this.data,this.fieldMask,n,this.fieldTransforms):new su(t,this.data,n,this.fieldTransforms)}}class pb{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new rs(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function gb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ac:r})}}class Lp{constructor(t,n,s,o,u,f){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Lp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Th(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(gb(this.Ac)&&u2.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class h2{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Lh(t)}Cc(t,n,s,o=!1){return new Lp({Ac:t,methodName:n,Dc:s,path:Qe.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qh(r){const t=r._freezeSettings(),n=Lh(r._databaseId);return new h2(r._databaseId,!!t.ignoreUndefinedProperties,n)}function yb(r,t,n,s,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,t,n,o);Up("Data must be an object, but it was:",f,s);const m=_b(s,f);let y,g;if(u.merge)y=new An(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const S of u.mergeFields){const A=Hm(t,S,n);if(!f.contains(A))throw new lt(X.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);Tb(T,A)||T.push(A)}y=new An(T),g=f.fieldTransforms.filter(S=>y.covers(S.field))}else y=null,g=f.fieldTransforms;return new c2(new fn(m),y,g)}class Hh extends Pp{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Hh}}function f2(r,t,n,s){const o=r.Cc(1,t,n);Up("Data must be an object, but it was:",o,s);const u=[],f=fn.empty();is(s,(y,g)=>{const T=Bp(t,y,n);g=ae(g);const S=o.yc(T);if(g instanceof Hh)u.push(T);else{const A=uu(g,S);A!=null&&(u.push(T),f.set(T,A))}});const m=new An(u);return new pb(f,m,o.fieldTransforms)}function d2(r,t,n,s,o,u){const f=r.Cc(1,t,n),m=[Hm(t,s,n)],y=[o];if(u.length%2!=0)throw new lt(X.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)m.push(Hm(t,u[A])),y.push(u[A+1]);const g=[],T=fn.empty();for(let A=m.length-1;A>=0;--A)if(!Tb(g,m[A])){const V=m[A];let z=y[A];z=ae(z);const F=f.yc(V);if(z instanceof Hh)g.push(V);else{const U=uu(z,F);U!=null&&(g.push(V),T.set(V,U))}}const S=new An(g);return new pb(T,S,f.fieldTransforms)}function m2(r,t,n,s=!1){return uu(n,r.Cc(s?4:3,t))}function uu(r,t){if(vb(r=ae(r)))return Up("Unsupported field value:",t,r),_b(r,t);if(r instanceof Pp)return function(s,o){if(!gb(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let y=uu(m,o.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}}(r,t)}return function(s,o){if((s=ae(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return eC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ie.fromDate(s);return{timestampValue:gh(o.serializer,u)}}if(s instanceof ie){const u=new ie(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:gh(o.serializer,u)}}if(s instanceof bi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Bn)return{bytesValue:ME(o.serializer,s._byteString)};if(s instanceof Te){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Ep(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Si)return function(f,m){return{mapValue:{fields:{[uE]:{stringValue:cE},[fh]:{arrayValue:{values:f.toArray().map(g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return yp(m.serializer,g)})}}}}}}(s,o);throw o.Sc(`Unsupported field value: ${Ch(s)}`)}(r,t)}function _b(r,t){const n={};return iE(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):is(r,(s,o)=>{const u=uu(o,t.mc(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function vb(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ie||r instanceof bi||r instanceof Bn||r instanceof Te||r instanceof Pp||r instanceof Si)}function Up(r,t,n){if(!vb(n)||!eE(n)){const s=Ch(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Hm(r,t,n){if((t=ae(t))instanceof jh)return t._internalPath;if(typeof t=="string")return Bp(r,t);throw Th("Field path arguments must be of type string or ",r,!1,void 0,n)}const p2=new RegExp("[~\\*/\\[\\]]");function Bp(r,t,n){if(t.search(p2)>=0)throw Th(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new jh(...t.split("."))._internalPath}catch{throw Th(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Th(r,t,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${s}`),f&&(y+=` in document ${o}`),y+=")"),new lt(X.INVALID_ARGUMENT,m+r+y)}function Tb(r,t){return r.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(t,n,s,o,u){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Te(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new g2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(zp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class g2 extends Eb{data(){return super.data()}}function zp(r,t){return typeof t=="string"?Bp(r,t):t instanceof jh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new lt(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jp{}class bb extends jp{}function _2(r,t,...n){let s=[];t instanceof jp&&s.push(t),s=s.concat(n),function(u){const f=u.filter(y=>y instanceof Hp).length,m=u.filter(y=>y instanceof qp).length;if(f>1||f>0&&m>0)throw new lt(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class qp extends bb{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new qp(t,n,s)}_apply(t){const n=this._parse(t);return Sb(t._query,n),new na(t.firestore,t.converter,Nm(t._query,n))}_parse(t){const n=qh(t.firestore);return function(u,f,m,y,g,T,S){let A;if(g.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new lt(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){F0(S,T);const z=[];for(const F of S)z.push(H0(y,u,F));A={arrayValue:{values:z}}}else A=H0(y,u,S)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||F0(S,T),A=m2(m,f,S,T==="in"||T==="not-in");return Re.create(g,T,A)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Hp extends jp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Hp(t,n)}_parse(t){const n=this._queryConstraints.map(s=>s._parse(t)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Zn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const y of m)Sb(f,y),f=Nm(f,y)}(t._query,n),new na(t.firestore,t.converter,Nm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fp extends bb{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Fp(t,n)}_apply(t){const n=function(o,u,f){if(o.startAt!==null)throw new lt(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new lt(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kl(u,f)}(t._query,this._field,this._direction);return new na(t.firestore,t.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new vo(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(t._query,n))}}function v2(r,t="asc"){const n=t,s=zp("orderBy",r);return Fp._create(s,n)}function H0(r,t,n){if(typeof(n=ae(n))=="string"){if(n==="")throw new lt(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_E(t)&&n.indexOf("/")!==-1)throw new lt(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(ee.fromString(n));if(!gt.isDocumentKey(s))throw new lt(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return a0(r,new gt(s))}if(n instanceof Te)return a0(r,n._key);throw new lt(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ch(n)}.`)}function F0(r,t){if(!Array.isArray(r)||r.length===0)throw new lt(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Sb(r,t){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new lt(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new lt(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class T2{convertValue(t,n="none"){switch(ts(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Jr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Et(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return is(t,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(t){const n=t.fields?.[fh].arrayValue?.values?.map(s=>ve(s.doubleValue));return new Si(n)}convertGeoPoint(t){return new bi(ve(t.latitude),ve(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Oh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp($l(t));default:return null}}convertTimestamp(t){const n=Zr(t);return new ie(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=ee.fromString(t);Ft(zE(s),9688,{name:t});const o=new Ql(s.get(1),s.get(3)),u=new gt(s.popFirst(5));return o.isEqual(n)||ar(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(r,t,n){let s;return s=r?r.toFirestore(t):t,s}class Vl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class $s extends Eb{constructor(t,n,s,o,u,f){super(t,n,s,o,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(zp("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=$s._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$s._jsonSchemaVersion="firestore/documentSnapshot/1.0",$s._jsonSchema={type:Ie("string",$s._jsonSchemaVersion),bundleSource:Ie("string","DocumentSnapshot"),bundleName:Ie("string"),bundle:Ie("string")};class eh extends $s{data(t={}){return super.data(t)}}class ao{constructor(t,n,s,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new Vl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new eh(this._firestore,this._userDataWriter,s.key,s,new Vl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new lt(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const y=new eh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Vl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const y=new eh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Vl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,T=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),T=f.indexOf(m.doc.key)),{type:E2(m.type),doc:y,oldIndex:g,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ao._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=cp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach(u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function E2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(r){r=Wn(r,Te);const t=Wn(r.firestore,ia);return r2(Vp(t),r._key).then(n=>A2(t,r,n))}ao._jsonSchemaVersion="firestore/querySnapshot/1.0",ao._jsonSchema={type:Ie("string",ao._jsonSchemaVersion),bundleSource:Ie("string","QuerySnapshot"),bundleName:Ie("string"),bundle:Ie("string")};class wb extends T2{constructor(t){super(),this.firestore=t}convertBytes(t){return new Bn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Te(this.firestore,null,n)}}function Fm(r){r=Wn(r,na);const t=Wn(r.firestore,ia),n=Vp(t),s=new wb(t);return y2(r._query),s2(n,r._query).then(o=>new ao(t,s,r,o))}function S2(r,t,n){r=Wn(r,Te);const s=Wn(r.firestore,ia),o=Ab(r.converter,t);return Fh(s,[yb(qh(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,jn.none())])}function fm(r,t,n,...s){r=Wn(r,Te);const o=Wn(r.firestore,ia),u=qh(o);let f;return f=typeof(t=ae(t))=="string"||t instanceof jh?d2(u,"updateDoc",r._key,t,n,s):f2(u,"updateDoc",r._key,t),Fh(o,[f.toMutation(r._key,jn.exists(!0))])}function Rb(r){return Fh(Wn(r.firestore,ia),[new _p(r._key,jn.none())])}function Gm(r,t){const n=Wn(r.firestore,ia),s=Fr(r),o=Ab(r.converter,t);return Fh(n,[yb(qh(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,jn.exists(!1))]).then(()=>s)}function Fh(r,t){return function(s,o){const u=new nr;return s.asyncQueue.enqueueAndForget(async()=>$x(await i2(s),o,u)),u.promise}(Vp(r),t)}function A2(r,t,n){const s=n.docs.get(t._key),o=new wb(r);return new $s(r,o,t._key,s,new Vl(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(o){go=o})(Js),Xr(new ir("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new ia(new dI(s.getProvider("auth-internal")),new gI(f,s.getProvider("app-check-internal")),function(g,T){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new lt(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ql(g.options.projectId,T)}(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),zn(Qv,Yv,t),zn(Qv,Yv,"esm2020")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(t,n,s,o){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Sn(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(u=>this.auth=u,()=>{}),this.messaging||s.get().then(u=>this.messaging=u,()=>{}),this.appCheck||o?.get().then(u=>this.appCheck=u,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(t){const n=await this.getAuthToken(),s=await this.getMessagingToken(),o=await this.getAppCheckToken(t);return{authToken:n,messagingToken:s,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="us-central1";class R2{constructor(t,n,s,o,u=$m,f=(...m)=>fetch(...m)){this.app=t,this.fetchImpl=f,this.emulatorOrigin=null,this.contextProvider=new w2(t,n,s,o),this.cancelAllRequests=new Promise(m=>{this.deleteService=()=>Promise.resolve(m())});try{const m=new URL(u);this.customDomain=m.origin+(m.pathname==="/"?"":m.pathname),this.region=$m}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(t){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${n}.cloudfunctions.net/${t}`}}function I2(r,t,n){const s=lr(t);r.emulatorOrigin=`http${s?"s":""}://${t}:${n}`,s&&(bh(r.emulatorOrigin),Sh("Functions",!0))}const G0="@firebase/functions",$0="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="auth-internal",x2="app-check-internal",D2="messaging-internal";function O2(r){const t=(n,{instanceIdentifier:s})=>{const o=n.getProvider("app").getImmediate(),u=n.getProvider(C2),f=n.getProvider(D2),m=n.getProvider(x2);return new R2(o,u,f,m,s)};Xr(new ir(Ib,t,"PUBLIC").setMultipleInstances(!0)),zn(G0,$0,r),zn(G0,$0,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(r=Ah(),t=$m){const s=tu(ae(r),Ib).getImmediate({identifier:t}),o=Xm("functions");return o&&k2(s,...o),s}function k2(r,t,n){I2(ae(r),t,n)}O2();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="firebasestorage.googleapis.com",xb="storageBucket",M2=120*1e3,V2=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me extends Ri{constructor(t,n,s=0){super(dm(t),`Firebase Storage: ${n} (${dm(t)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,me.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return dm(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var de;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(de||(de={}));function dm(r){return"storage/"+r}function Gp(){const r="An unknown error occurred, please check the error payload for server response.";return new me(de.UNKNOWN,r)}function P2(r){return new me(de.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function L2(r){return new me(de.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function U2(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new me(de.UNAUTHENTICATED,r)}function B2(){return new me(de.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function z2(r){return new me(de.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function j2(){return new me(de.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function q2(){return new me(de.CANCELED,"User canceled the upload/download.")}function H2(r){return new me(de.INVALID_URL,"Invalid URL '"+r+"'.")}function F2(r){return new me(de.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function G2(){return new me(de.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xb+"' property when initializing the app?")}function $2(){return new me(de.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Q2(){return new me(de.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Y2(r){return new me(de.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Qm(r){return new me(de.INVALID_ARGUMENT,r)}function Db(){return new me(de.APP_DELETED,"The Firebase app was deleted.")}function K2(r){return new me(de.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ql(r,t){return new me(de.INVALID_FORMAT,"String does not match format '"+r+"': "+t)}function Ol(r){throw new me(de.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let s;try{s=wn.makeFromUrl(t,n)}catch{return new wn(t,"")}if(s.path==="")return s;throw F2(t)}static makeFromUrl(t,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(yt){yt.path.charAt(yt.path.length-1)==="/"&&(yt.path_=yt.path_.slice(0,-1))}const f="(/(.*))?$",m=new RegExp("^gs://"+o+f,"i"),y={bucket:1,path:3};function g(yt){yt.path_=decodeURIComponent(yt.path)}const T="v[A-Za-z0-9_]+",S=n.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",V=new RegExp(`^https?://${S}/${T}/b/${o}/o${A}`,"i"),z={bucket:1,path:3},F=n===Cb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",tt=new RegExp(`^https?://${F}/${o}/${U}`,"i"),nt=[{regex:m,indices:y,postModify:u},{regex:V,indices:z,postModify:g},{regex:tt,indices:{bucket:1,path:2},postModify:g}];for(let yt=0;yt<nt.length;yt++){const ft=nt[yt],_t=ft.regex.exec(t);if(_t){const k=_t[ft.indices.bucket];let w=_t[ft.indices.path];w||(w=""),s=new wn(k,w),ft.postModify(s);break}}if(s==null)throw H2(t);return s}}class X2{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(r,t,n){let s=1,o=null,u=null,f=!1,m=0;function y(){return m===2}let g=!1;function T(...U){g||(g=!0,t.apply(null,U))}function S(U){o=setTimeout(()=>{o=null,r(V,y())},U)}function A(){u&&clearTimeout(u)}function V(U,...tt){if(g){A();return}if(U){A(),T.call(null,U,...tt);return}if(y()||f){A(),T.call(null,U,...tt);return}s<64&&(s*=2);let nt;m===1?(m=2,nt=0):nt=(s+Math.random())*1e3,S(nt)}let z=!1;function F(U){z||(z=!0,A(),!g&&(o!==null?(U||(m=2),clearTimeout(o),S(0)):U||(m=1)))}return S(0),u=setTimeout(()=>{f=!0,F(!0)},n),F}function Z2(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(r){return r!==void 0}function tD(r){return typeof r=="object"&&!Array.isArray(r)}function $p(r){return typeof r=="string"||r instanceof String}function Q0(r){return Qp()&&r instanceof Blob}function Qp(){return typeof Blob<"u"}function Y0(r,t,n,s){if(s<t)throw Qm(`Invalid value for '${r}'. Expected ${t} or greater.`);if(s>n)throw Qm(`Invalid value for '${r}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(r,t,n){let s=t;return n==null&&(s=`https://${t}`),`${n}://${s}/v0${r}`}function Ob(r){const t=encodeURIComponent;let n="?";for(const s in r)if(r.hasOwnProperty(s)){const o=t(s)+"="+t(r[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var Qs;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Qs||(Qs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(r,t){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,u=t.indexOf(r)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(t,n,s,o,u,f,m,y,g,T,S,A=!0,V=!1){this.url_=t,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=f,this.callback_=m,this.errorCallback_=y,this.timeout_=g,this.progressCallback_=T,this.connectionFactory_=S,this.retry=A,this.isUsingEmulator=V,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((z,F)=>{this.resolve_=z,this.reject_=F,this.start_()})}start_(){const t=(s,o)=>{if(o){s(!1,new zc(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const f=m=>{const y=m.loaded,g=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,g)};this.progressCallback_!==null&&u.addUploadProgressListener(f),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(f),this.pendingConnection_=null;const m=u.getErrorCode()===Qs.NO_ERROR,y=u.getStatus();if(!m||eD(y,this.additionalRetryCodes_)&&this.retry){const T=u.getErrorCode()===Qs.ABORT;s(!1,new zc(!1,null,T));return}const g=this.successCodes_.indexOf(y)!==-1;s(!0,new zc(g,u))})},n=(s,o)=>{const u=this.resolve_,f=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(m,m.getResponse());J2(y)?u(y):u()}catch(y){f(y)}else if(m!==null){const y=Gp();y.serverResponse=m.getErrorText(),this.errorCallback_?f(this.errorCallback_(m,y)):f(y)}else if(o.canceled){const y=this.appDelete_?Db():q2();f(y)}else{const y=j2();f(y)}};this.canceled_?n(!1,new zc(!1,null,!0)):this.backoffId_=W2(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Z2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zc{constructor(t,n,s){this.wasSuccessCode=t,this.connection=n,this.canceled=!!s}}function iD(r,t){t!==null&&t.length>0&&(r.Authorization="Firebase "+t)}function rD(r,t){r["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function sD(r,t){t&&(r["X-Firebase-GMPID"]=t)}function aD(r,t){t!==null&&(r["X-Firebase-AppCheck"]=t)}function oD(r,t,n,s,o,u,f=!0,m=!1){const y=Ob(r.urlParams),g=r.url+y,T=Object.assign({},r.headers);return sD(T,t),iD(T,n),rD(T,u),aD(T,s),new nD(g,r.method,T,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,f,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function uD(...r){const t=lD();if(t!==void 0){const n=new t;for(let s=0;s<r.length;s++)n.append(r[s]);return n.getBlob()}else{if(Qp())return new Blob(r);throw new me(de.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function cD(r,t,n){return r.webkitSlice?r.webkitSlice(t,n):r.mozSlice?r.mozSlice(t,n):r.slice?r.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(r){if(typeof atob>"u")throw Y2("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mm{constructor(t,n){this.data=t,this.contentType=n||null}}function fD(r,t){switch(r){case _i.RAW:return new mm(Nb(t));case _i.BASE64:case _i.BASE64URL:return new mm(kb(r,t));case _i.DATA_URL:return new mm(mD(t),pD(t))}throw Gp()}function Nb(r){const t=[];for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);if(s<=127)t.push(s);else if(s<=2047)t.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<r.length-1&&(r.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const u=s,f=r.charCodeAt(++n);s=65536|(u&1023)<<10|f&1023,t.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?t.push(239,191,189):t.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(t)}function dD(r){let t;try{t=decodeURIComponent(r)}catch{throw ql(_i.DATA_URL,"Malformed data URL.")}return Nb(t)}function kb(r,t){switch(r){case _i.BASE64:{const o=t.indexOf("-")!==-1,u=t.indexOf("_")!==-1;if(o||u)throw ql(r,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case _i.BASE64URL:{const o=t.indexOf("+")!==-1,u=t.indexOf("/")!==-1;if(o||u)throw ql(r,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=hD(t)}catch(o){throw o.message.includes("polyfill")?o:ql(r,"Invalid character found")}const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}class Mb{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw ql(_i.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=gD(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=t.substring(t.indexOf(",")+1)}}function mD(r){const t=new Mb(r);return t.base64?kb(_i.BASE64,t.rest):dD(t.rest)}function pD(r){return new Mb(r).contentType}function gD(r,t){return r.length>=t.length?r.substring(r.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(t,n){let s=0,o="";Q0(t)?(this.data_=t,s=t.size,o=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),s=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),s=t.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(t,n){if(Q0(this.data_)){const s=this.data_,o=cD(s,t,n);return o===null?null:new qr(o)}else{const s=new Uint8Array(this.data_.buffer,t,n-t);return new qr(s,!0)}}static getBlob(...t){if(Qp()){const n=t.map(s=>s instanceof qr?s.data_:s);return new qr(uD.apply(null,n))}else{const n=t.map(f=>$p(f)?fD(_i.RAW,f).data:f.data_);let s=0;n.forEach(f=>{s+=f.byteLength});const o=new Uint8Array(s);let u=0;return n.forEach(f=>{for(let m=0;m<f.length;m++)o[u++]=f[m]}),new qr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(r){let t;try{t=JSON.parse(r)}catch{return null}return tD(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(r){if(r.length===0)return null;const t=r.lastIndexOf("/");return t===-1?"":r.slice(0,t)}function _D(r,t){const n=t.split("/").filter(s=>s.length>0).join("/");return r.length===0?n:r+"/"+n}function Pb(r){const t=r.lastIndexOf("/",r.length-2);return t===-1?r:r.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(r,t){return t}class on{constructor(t,n,s,o){this.server=t,this.local=n||t,this.writable=!!s,this.xform=o||vD}}let jc=null;function TD(r){return!$p(r)||r.length<2?r:Pb(r)}function Lb(){if(jc)return jc;const r=[];r.push(new on("bucket")),r.push(new on("generation")),r.push(new on("metageneration")),r.push(new on("name","fullPath",!0));function t(u,f){return TD(f)}const n=new on("name");n.xform=t,r.push(n);function s(u,f){return f!==void 0?Number(f):f}const o=new on("size");return o.xform=s,r.push(o),r.push(new on("timeCreated")),r.push(new on("updated")),r.push(new on("md5Hash",null,!0)),r.push(new on("cacheControl",null,!0)),r.push(new on("contentDisposition",null,!0)),r.push(new on("contentEncoding",null,!0)),r.push(new on("contentLanguage",null,!0)),r.push(new on("contentType",null,!0)),r.push(new on("metadata","customMetadata",!0)),jc=r,jc}function ED(r,t){function n(){const s=r.bucket,o=r.fullPath,u=new wn(s,o);return t._makeStorageReference(u)}Object.defineProperty(r,"ref",{get:n})}function bD(r,t,n){const s={};s.type="file";const o=n.length;for(let u=0;u<o;u++){const f=n[u];s[f.local]=f.xform(s,t[f.server])}return ED(s,r),s}function Ub(r,t,n){const s=Vb(t);return s===null?null:bD(r,s,n)}function SD(r,t,n,s){const o=Vb(t);if(o===null||!$p(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const f=encodeURIComponent;return u.split(",").map(g=>{const T=r.bucket,S=r.fullPath,A="/b/"+f(T)+"/o/"+f(S),V=Gh(A,n,s),z=Ob({alt:"media",token:g});return V+z})[0]}function AD(r,t){const n={},s=t.length;for(let o=0;o<s;o++){const u=t[o];u.writable&&(n[u.server]=r[u.local])}return JSON.stringify(n)}class Yp{constructor(t,n,s,o){this.url=t,this.method=n,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(r){if(!r)throw Gp()}function wD(r,t){function n(s,o){const u=Ub(r,o,t);return Bb(u!==null),u}return n}function RD(r,t){function n(s,o){const u=Ub(r,o,t);return Bb(u!==null),SD(u,o,r.host,r._protocol)}return n}function zb(r){function t(n,s){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=B2():o=U2():n.getStatus()===402?o=L2(r.bucket):n.getStatus()===403?o=z2(r.path):o=s,o.status=n.getStatus(),o.serverResponse=s.serverResponse,o}return t}function jb(r){const t=zb(r);function n(s,o){let u=t(s,o);return s.getStatus()===404&&(u=P2(r.path)),u.serverResponse=o.serverResponse,u}return n}function ID(r,t,n){const s=t.fullServerUrl(),o=Gh(s,r.host,r._protocol),u="GET",f=r.maxOperationRetryTime,m=new Yp(o,u,RD(r,n),f);return m.errorHandler=jb(t),m}function CD(r,t){const n=t.fullServerUrl(),s=Gh(n,r.host,r._protocol),o="DELETE",u=r.maxOperationRetryTime;function f(y,g){}const m=new Yp(s,o,f,u);return m.successCodes=[200,204],m.errorHandler=jb(t),m}function xD(r,t){return r&&r.contentType||t&&t.type()||"application/octet-stream"}function DD(r,t,n){const s=Object.assign({},n);return s.fullPath=r.path,s.size=t.size(),s.contentType||(s.contentType=xD(null,t)),s}function OD(r,t,n,s,o){const u=t.bucketOnlyServerUrl(),f={"X-Goog-Upload-Protocol":"multipart"};function m(){let nt="";for(let yt=0;yt<2;yt++)nt=nt+Math.random().toString().slice(2);return nt}const y=m();f["Content-Type"]="multipart/related; boundary="+y;const g=DD(t,s,o),T=AD(g,n),S="--"+y+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+T+`\r
--`+y+`\r
Content-Type: `+g.contentType+`\r
\r
`,A=`\r
--`+y+"--",V=qr.getBlob(S,s,A);if(V===null)throw $2();const z={name:g.fullPath},F=Gh(u,r.host,r._protocol),U="POST",tt=r.maxUploadRetryTime,et=new Yp(F,U,wD(r,n),tt);return et.urlParams=z,et.headers=f,et.body=V.uploadData(),et.errorHandler=zb(t),et}class ND{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Qs.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Qs.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Qs.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,s,o,u){if(this.sent_)throw Ol("cannot .send() more than once");if(lr(t)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,t,!0),u!==void 0)for(const f in u)u.hasOwnProperty(f)&&this.xhr_.setRequestHeader(f,u[f].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ol("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ol("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ol("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ol("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class kD extends ND{initXhr(){this.xhr_.responseType="text"}}function Kp(){return new kD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t,n){this._service=t,n instanceof wn?this._location=n:this._location=wn.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Zs(t,n)}get root(){const t=new wn(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Pb(this._location.path)}get storage(){return this._service}get parent(){const t=yD(this._location.path);if(t===null)return null;const n=new wn(this._location.bucket,t);return new Zs(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw K2(t)}}function MD(r,t,n){r._throwIfRoot("uploadBytes");const s=OD(r.storage,r._location,Lb(),new qr(t,!0),n);return r.storage.makeRequestWithTokens(s,Kp).then(o=>({metadata:o,ref:r}))}function VD(r){r._throwIfRoot("getDownloadURL");const t=ID(r.storage,r._location,Lb());return r.storage.makeRequestWithTokens(t,Kp).then(n=>{if(n===null)throw Q2();return n})}function PD(r){r._throwIfRoot("deleteObject");const t=CD(r.storage,r._location);return r.storage.makeRequestWithTokens(t,Kp)}function LD(r,t){const n=_D(r._location.path,t),s=new wn(r._location.bucket,n);return new Zs(r.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(r){return/^[A-Za-z]+:\/\//.test(r)}function BD(r,t){return new Zs(r,t)}function qb(r,t){if(r instanceof Xp){const n=r;if(n._bucket==null)throw G2();const s=new Zs(n,n._bucket);return t!=null?qb(s,t):s}else return t!==void 0?LD(r,t):r}function zD(r,t){if(t&&UD(t)){if(r instanceof Xp)return BD(r,t);throw Qm("To use ref(service, url), the first argument must be a Storage instance.")}else return qb(r,t)}function K0(r,t){const n=t?.[xb];return n==null?null:wn.makeFromBucketSpec(n,r)}function jD(r,t,n,s={}){r.host=`${t}:${n}`;const o=lr(t);o&&(bh(`https://${r.host}/b`),Sh("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:u}=s;u&&(r._overrideAuthToken=typeof u=="string"?u:cT(u,r.app.options.projectId))}class Xp{constructor(t,n,s,o,u,f=!1){this.app=t,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=f,this._bucket=null,this._host=Cb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=M2,this._maxUploadRetryTime=V2,this._requests=new Set,o!=null?this._bucket=wn.makeFromBucketSpec(o,this._host):this._bucket=K0(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=wn.makeFromBucketSpec(this._url,t):this._bucket=K0(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Y0("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Y0("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Zs(this,t)}_makeRequest(t,n,s,o,u=!0){if(this._deleted)return new X2(Db());{const f=oD(t,this._appId,s,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(t,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,s,o).getPromise()}}const X0="@firebase/storage",W0="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="storage";function qD(r,t,n){return r=ae(r),MD(r,t,n)}function HD(r){return r=ae(r),VD(r)}function FD(r){return r=ae(r),PD(r)}function Z0(r,t){return r=ae(r),zD(r,t)}function GD(r=Ah(),t){r=ae(r);const s=tu(r,Hb).getImmediate({identifier:t}),o=Xm("storage");return o&&$D(s,...o),s}function $D(r,t,n,s={}){jD(r,t,n,s)}function QD(r,{instanceIdentifier:t}){const n=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new Xp(n,s,o,t,Js)}function YD(){Xr(new ir(Hb,QD,"PUBLIC").setMultipleInstances(!0)),zn(X0,W0,""),zn(X0,W0,"esm2020")}YD();const KD={apiKey:"AIzaSyAiJN6RqcyiETRswL-sW4QXVfC1InrspE8",authDomain:"isthishenry-99ba6.firebaseapp.com",projectId:"isthishenry-99ba6",storageBucket:"isthishenry-99ba6.firebasestorage.app",messagingSenderId:"699151675972",appId:"1:699151675972:web:dc34890ae46310d42c4211"},$h=dT(KD),yi=oI($h),Fb=new Ji;Fb.addScope("https://www.googleapis.com/auth/calendar.readonly");const bn=o2($h);N2($h);const J0=GD($h),st={desktop:"#b7b7b7",windowBg:"#c0c0c0",windowHeader:"#b7b7b7",text:"#000000",textLight:"#ffffff",borderLight:"#dfdfdf",borderDark:"#404040",button:"#c0c0c0"},le=({children:r,style:t={},disabled:n=!1,active:s=!1,...o})=>{const[u,f]=ct.useState(!1);return x.jsx("button",{disabled:n,onMouseDown:()=>f(!0),onMouseUp:()=>f(!1),onMouseLeave:()=>f(!1),style:{background:st.button,border:"2px solid",borderColor:u||s?`${st.borderDark} ${st.borderLight} ${st.borderLight} ${st.borderDark}`:`${st.borderLight} ${st.borderDark} ${st.borderDark} ${st.borderLight}`,padding:"4px 8px",fontFamily:"'Pixelify Sans', monospace",fontSize:"12px",cursor:"pointer",userSelect:"none",color:n?"#808080":st.text,...t},...o,children:r})},XD=({title:r,children:t,onClose:n,style:s={}})=>x.jsxs("div",{style:{background:st.windowBg,border:"2px solid",borderColor:`${st.borderLight} ${st.borderDark} ${st.borderDark} ${st.borderLight}`,height:"100%",display:"flex",flexDirection:"column",fontFamily:"'Pixelify Sans', monospace",fontSize:"12px",...s},children:[x.jsxs("div",{style:{background:st.windowHeader,color:st.text,padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",userSelect:"none",fontFamily:"'Jacquard 12', monospace"},children:[x.jsx("span",{style:{fontWeight:"bold"},children:r}),n&&x.jsx(le,{onClick:n,style:{width:"20px",height:"20px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Arial",lineHeight:"1"},children:"×"})]}),x.jsx("div",{style:{flex:1,padding:"8px",overflow:"auto",color:st.text},children:t})]}),WD=({id:r,title:t,position:n,size:s,onPositionChange:o,onSizeChange:u,onClose:f,children:m,zIndex:y})=>{const[g,T]=ct.useState(!1),[S,A]=ct.useState(!1),[V,z]=ct.useState({x:0,y:0}),[F,U]=ct.useState({x:0,y:0,width:0,height:0}),tt=ct.useRef(null),et=_t=>{_t.target.closest("button")||_t.target.closest(".resize-handle")||(T(!0),z({x:_t.clientX-n.x,y:_t.clientY-n.y}))},nt=_t=>{_t.stopPropagation(),A(!0),U({x:_t.clientX,y:_t.clientY,width:s.width,height:s.height})},yt=ct.useCallback(_t=>{if(g)o(r,{x:_t.clientX-V.x,y:_t.clientY-V.y});else if(S){const k=Math.max(200,F.width+(_t.clientX-F.x)),w=Math.max(150,F.height+(_t.clientY-F.y));u(r,{width:k,height:w})}},[g,S,V.x,V.y,F,r,o,u]),ft=ct.useCallback(()=>{T(!1),A(!1)},[]);return ct.useEffect(()=>{if(g||S)return document.addEventListener("mousemove",yt),document.addEventListener("mouseup",ft),()=>{document.removeEventListener("mousemove",yt),document.removeEventListener("mouseup",ft)}},[g,S,yt,ft]),x.jsxs("div",{ref:tt,style:{position:"absolute",left:n.x,top:n.y,width:s.width,height:s.height,zIndex:y,cursor:g?"move":"default"},onMouseDown:et,children:[x.jsx(XD,{title:t,onClose:()=>f(r),children:m}),x.jsx("div",{className:"resize-handle",style:{position:"absolute",bottom:0,right:0,width:"16px",height:"16px",cursor:"se-resize",background:"linear-gradient(135deg, transparent 0%, transparent 30%, #808080 30%, #808080 35%, transparent 35%, transparent 65%, #808080 65%, #808080 70%, transparent 70%)",userSelect:"none"},onMouseDown:nt})]})},Ym=({style:r={},...t})=>x.jsx("input",{type:"text",style:{background:st.textLight,border:"2px solid",borderColor:`${st.borderDark} ${st.borderLight} ${st.borderLight} ${st.borderDark}`,padding:"4px",fontFamily:"'Pixelify Sans', monospace",fontSize:"12px",outline:"none",...r},...t}),Gb=({style:r={},...t})=>x.jsx("textarea",{style:{background:st.textLight,border:"2px solid",borderColor:`${st.borderDark} ${st.borderLight} ${st.borderLight} ${st.borderDark}`,padding:"4px",fontFamily:"'Pixelify Sans', monospace",fontSize:"12px",resize:"none",outline:"none",...r},...t}),ZD=({children:r,style:t={},...n})=>x.jsx("select",{style:{background:st.textLight,border:"2px solid",borderColor:`${st.borderDark} ${st.borderLight} ${st.borderLight} ${st.borderDark}`,padding:"4px",fontFamily:"'Pixelify Sans', monospace",fontSize:"12px",outline:"none",...t},...n,children:r}),JD=({windows:r,activeWindow:t,onAddWindow:n,onFocusWindow:s,onSaveLayout:o,onClearAll:u,onLogout:f,currentTime:m})=>x.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"32px",background:st.windowBg,borderTop:`2px solid ${st.borderLight}`,display:"flex",alignItems:"center",padding:"2px",gap:"4px",zIndex:2e3},children:[x.jsx(le,{onClick:()=>n("search"),title:"Search",children:"🔍"}),x.jsx(le,{onClick:()=>n("rss"),title:"RSS Feed",children:"📰"}),x.jsx(le,{onClick:()=>n("notes"),title:"Notes",children:"📝"}),x.jsx(le,{onClick:()=>n("ai"),title:"AI Launcher",children:"🤖"}),x.jsx(le,{onClick:()=>n("bookmarks"),title:"Bookmarks",children:"🔖"}),x.jsx(le,{onClick:()=>n("calendar"),title:"Calendar",children:"📅"}),x.jsx(le,{onClick:()=>n("uidemo"),title:"UI Demo",children:"🎨"}),x.jsx("div",{style:{width:"2px",height:"28px",borderLeft:`1px solid ${st.borderDark}`,borderRight:`1px solid ${st.borderLight}`,margin:"0 2px"}}),x.jsx("div",{style:{flex:1,display:"flex",gap:"2px",overflow:"hidden"},children:r.map(y=>x.jsx(le,{onClick:()=>s(y.id),active:t===y.id,style:{flexShrink:1,minWidth:"60px",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:y.title},y.id))}),x.jsx("div",{style:{padding:"2px 8px",border:"2px solid",borderColor:`${st.borderDark} ${st.borderLight} ${st.borderLight} ${st.borderDark}`,fontSize:"11px",fontFamily:"'Pixelify Sans', monospace",color:"#000000",backgroundColor:"#c0c0c0",minWidth:"80px",textAlign:"center"},children:m}),x.jsx(le,{onClick:o,title:"Save Layout",children:"💾"}),x.jsx(le,{onClick:u,title:"Clear All Windows",children:"🗑️"}),x.jsx(le,{onClick:f,title:"Logout",children:"Logout"})]}),tO=()=>{const[r,t]=ct.useState(""),n=()=>{r.trim()&&(window.open(`https://www.google.com/search?q=${encodeURIComponent(r)}`,"_blank"),t(""))};return x.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center",fontFamily:"'Pixelify Sans', monospace"},children:[x.jsx("span",{style:{fontSize:"16px"},children:"🔍"}),x.jsx(Ym,{value:r,onChange:s=>t(s.target.value),onKeyPress:s=>s.key==="Enter"&&n(),placeholder:"Search Google...",style:{flex:1,width:"300px"}}),x.jsx(le,{onClick:n,children:"Go"})]})},eO="https://api.allorigins.win/raw?url=",nO=["https://rss.nytimes.com/services/xml/rss/nyt/Technology.xml","https://rss.nytimes.com/services/xml/rss/nyt/World.xml","http://astralcodexten.substack.com/feed"];class iO{async fetchFeeds(){const t=[];for(const n of nO)try{const s=await fetch(`${eO}${encodeURIComponent(n)}`);if(!s.ok){console.error(`Failed to fetch ${n}: ${s.statusText}`);continue}const o=await s.text(),u=new window.DOMParser().parseFromString(o,"text/xml"),f=u.querySelector("channel > title")?.textContent||"Unknown Source";u.querySelectorAll("item").forEach(y=>{t.push({title:y.querySelector("title")?.textContent||"",link:y.querySelector("link")?.textContent||"",description:y.querySelector("description")?.textContent?.replace(/<[^>]*>?/gm,"")||"",pubDate:y.querySelector("pubDate")?.textContent||"",source:f})})}catch(s){console.error(`Error parsing feed from ${n}:`,s)}return t.sort((n,s)=>{const o=n.pubDate?new Date(n.pubDate).getTime():0;return(s.pubDate?new Date(s.pubDate).getTime():0)-o}),t.slice(0,30)}}const rO=new iO,sO=()=>{const[r,t]=ct.useState([]),[n,s]=ct.useState(!0),[o,u]=ct.useState(null);return ct.useEffect(()=>{(async()=>{try{s(!0);const m=await rO.fetchFeeds();t(m)}catch(m){u("Failed to load RSS feeds"),console.error(m)}finally{s(!1)}})()},[]),{articles:r,loading:n,error:o}},aO=()=>{const{articles:r,loading:t,error:n}=sO();return t?x.jsx("div",{style:{padding:"8px"},children:"Loading feeds..."}):n?x.jsx("div",{style:{padding:"8px",color:"red"},children:n}):x.jsx("div",{style:{height:"100%",overflowY:"auto",background:"#ffffff",color:"#000000",fontFamily:"'Pixelify Sans', monospace",border:"2px solid",borderColor:`${st.borderDark} ${st.borderLight} ${st.borderLight} ${st.borderDark}`},children:r.map((s,o)=>x.jsxs("div",{style:{borderBottom:`1px solid ${st.borderDark}`,padding:"8px",cursor:"pointer"},onClick:()=>window.open(s.link,"_blank"),children:[x.jsx("div",{style:{fontWeight:"bold",marginBottom:"2px",fontSize:"12px",color:"#000000",fontFamily:"'Pixelify Sans', monospace"},children:s.title}),x.jsx("div",{style:{color:"#000000",fontSize:"11px",marginBottom:"4px",maxHeight:"4.5em",overflow:"hidden",fontFamily:"'Pixelify Sans', monospace"},children:s.description}),x.jsxs("div",{style:{color:"#666666",fontSize:"10px",fontStyle:"italic",display:"flex",justifyContent:"space-between",fontFamily:"'Pixelify Sans', monospace"},children:[x.jsxs("span",{children:["— ",s.source]}),s.pubDate&&x.jsx("span",{children:new Date(s.pubDate).toLocaleDateString()})]})]},o))})};class oO{async saveLayout(t,n){const s=Fr(bn,"layouts",t);await S2(s,{windows:n,timestamp:new Date})}async loadLayout(t){const n=Fr(bn,"layouts",t),s=await b2(n);return s.exists()?s.data().windows:null}async getNotes(t){const n=eo(bn,"users",t,"notes"),s=_2(n,v2("timestamp","desc"));return(await Fm(s)).docs.map(u=>({id:u.id,...u.data()}))}async saveNote(t,n){const s={text:n,timestamp:new Date().toISOString()},o=eo(bn,"users",t,"notes");return{id:(await Gm(o,s)).id,...s}}async getBookmarks(t){const n=eo(bn,"users",t,"bookmarks"),s=await Fm(n);return s.empty?[{name:"GitHub",url:"https://github.com",icon:"📁"},{name:"Hacker News",url:"https://news.ycombinator.com",icon:"📰"}]:s.docs.map(o=>({id:o.id,...o.data()}))}async addBookmark(t,n){const s=eo(bn,"users",t,"bookmarks");return{id:(await Gm(s,n)).id,...n}}async removeBookmark(t,n){const s=Fr(bn,"users",t,"bookmarks",n);await Rb(s)}}const Kr=new oO,tT=r=>{let t;const n=new Set,s=(g,T)=>{const S=typeof g=="function"?g(t):g;if(!Object.is(S,t)){const A=t;t=T??(typeof S!="object"||S===null)?S:Object.assign({},t,S),n.forEach(V=>V(t,A))}},o=()=>t,m={setState:s,getState:o,getInitialState:()=>y,subscribe:g=>(n.add(g),()=>n.delete(g))},y=t=r(s,o,m);return m},lO=r=>r?tT(r):tT,uO=r=>r;function cO(r,t=uO){const n=to.useSyncExternalStore(r.subscribe,to.useCallback(()=>t(r.getState()),[r,t]),to.useCallback(()=>t(r.getInitialState()),[r,t]));return to.useDebugValue(n),n}const eT=r=>{const t=lO(r),n=s=>cO(t,s);return Object.assign(n,t),n},hO=r=>r?eT(r):eT,fO={search:"Search",rss:"RSS Feed",notes:"Quick Notes",ai:"AI Assistant",bookmarks:"Bookmarks",calendar:"Calendar",uidemo:"UI Demo"},dO={search:{width:400,height:100},rss:{width:350,height:400},notes:{width:300,height:350},ai:{width:280,height:250},bookmarks:{width:200,height:250},calendar:{width:320,height:420},uidemo:{width:500,height:600}},Wp=hO((r,t)=>({windows:[],activeWindow:null,userId:null,setUserId:n=>r({userId:n}),addWindow:n=>{const s={id:`${n}-${Date.now()}`,type:n,title:fO[n],position:{x:100+Math.random()*200,y:100+Math.random()*100},size:dO[n]};r(o=>({windows:[...o.windows,s],activeWindow:s.id}))},removeWindow:n=>{r(s=>({windows:s.windows.filter(o=>o.id!==n),activeWindow:s.activeWindow===n?null:s.activeWindow}))},updateWindowPosition:(n,s)=>{r(o=>({windows:o.windows.map(u=>u.id===n?{...u,position:s}:u)}))},updateWindowSize:(n,s)=>{r(o=>({windows:o.windows.map(u=>u.id===n?{...u,size:s}:u)}))},focusWindow:n=>{r({activeWindow:n})},saveLayout:async()=>{const{windows:n,userId:s}=t();s&&(await Kr.saveLayout(s,n),alert("Layout saved!"))},loadLayout:async()=>{const{userId:n}=t();if(n){const s=await Kr.loadLayout(n);s&&r({windows:s})}},clearAll:()=>{if(confirm("Clear all windows? This cannot be undone.")){r({windows:[],activeWindow:null});const{userId:n}=t();n&&Kr.saveLayout(n,[])}}})),mO=()=>{const[r,t]=ct.useState([]),n=Wp(u=>u.userId),s=ct.useCallback(async()=>{if(n){const u=await Kr.getNotes(n);t(u)}},[n]);return ct.useEffect(()=>{s()},[s]),{notes:r,saveNote:async u=>{n&&(await Kr.saveNote(n,u),s())}}},pO=()=>{const[r,t]=ct.useState(""),{notes:n,saveNote:s}=mO(),o=async()=>{await s(r),t("")};return x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",height:"100%"},children:[x.jsx(Gb,{value:r,onChange:u=>t(u.target.value),placeholder:"Type your note here...",style:{height:"80px"}}),x.jsx(le,{onClick:o,disabled:!r.trim(),children:"📝 Save Note"}),x.jsx("div",{style:{flex:1,overflow:"auto",border:"2px solid",borderColor:`${st.borderDark} ${st.borderLight} ${st.borderLight} ${st.borderDark}`,padding:"4px",background:"#ffffff",color:"#000000",fontFamily:"'Pixelify Sans', monospace"},children:n.map(u=>x.jsxs("div",{style:{borderBottom:`1px solid ${st.borderDark}`,padding:"4px 0",marginBottom:"4px"},children:[x.jsx("div",{style:{color:"#666666",fontSize:"10px",fontFamily:"'Pixelify Sans', monospace"},children:new Date(u.timestamp).toLocaleString()}),x.jsx("div",{style:{whiteSpace:"pre-wrap",color:"#000000",fontFamily:"'Pixelify Sans', monospace"},children:u.text})]},u.id))})]})},pm=[{id:"claude",name:"Claude",url:"https://claude.ai/new"},{id:"chatgpt",name:"ChatGPT",url:"https://chat.openai.com/"},{id:"gemini",name:"Gemini",url:"https://gemini.google.com/app"}],gO=()=>{const[r,t]=ct.useState(""),[n,s]=ct.useState("claude"),o=()=>{if(!r.trim())return;const u=pm.find(f=>f.id===n);u&&navigator.clipboard.writeText(r).then(()=>{window.open(u.url,"_blank"),t(""),alert(`Prompt copied to clipboard! Paste it in ${u.name} chat.`)})};return x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[x.jsx(ZD,{value:n,onChange:u=>s(u.target.value),children:pm.map(u=>x.jsx("option",{value:u.id,children:u.name},u.id))}),x.jsx(Gb,{value:r,onChange:u=>t(u.target.value),placeholder:"Enter your prompt...",style:{minHeight:"80px"}}),x.jsxs(le,{onClick:o,disabled:!r.trim(),children:["🤖 Launch ",pm.find(u=>u.id===n)?.name]})]})},yO=()=>{const[r,t]=ct.useState([]),n=Wp(f=>f.userId),s=ct.useCallback(async()=>{if(n){const f=await Kr.getBookmarks(n);t(f)}},[n]);return ct.useEffect(()=>{s()},[s]),{bookmarks:r,addBookmark:async f=>{n&&(await Kr.addBookmark(n,f),s())},removeBookmark:async f=>{n&&(await Kr.removeBookmark(n,f),s())}}},_O=()=>{const{bookmarks:r,addBookmark:t}=yO(),[n,s]=ct.useState(!1),[o,u]=ct.useState({name:"",url:""}),f=()=>{o.name&&o.url&&(t({...o,icon:"🔗"}),u({name:"",url:""}),s(!1))};return x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",fontFamily:"'Pixelify Sans', monospace"},children:[r.map((m,y)=>x.jsxs(le,{onClick:()=>window.open(m.url,"_blank"),style:{textAlign:"left",justifyContent:"flex-start",padding:"4px 8px"},children:[x.jsx("span",{style:{marginRight:"6px"},children:m.icon}),m.name]},y)),n?x.jsxs("div",{style:{border:"2px solid",borderColor:`${st.borderDark} ${st.borderLight} ${st.borderLight} ${st.borderDark}`,padding:"4px",background:st.windowBg,fontFamily:"'Pixelify Sans', monospace"},children:[x.jsx(Ym,{value:o.name,onChange:m=>u({...o,name:m.target.value}),placeholder:"Name",style:{width:"100%",marginBottom:"4px"}}),x.jsx(Ym,{value:o.url,onChange:m=>u({...o,url:m.target.value}),placeholder:"URL",style:{width:"100%",marginBottom:"4px"}}),x.jsxs("div",{style:{display:"flex",gap:"4px"},children:[x.jsx(le,{onClick:f,style:{fontSize:"10px",padding:"2px 6px"},children:"OK"}),x.jsx(le,{onClick:()=>s(!1),style:{fontSize:"10px",padding:"2px 6px"},children:"Cancel"})]})]}):x.jsx(le,{onClick:()=>s(!0),style:{marginTop:"8px"},children:"➕ Add Bookmark"})]})},vO=()=>{const[r,t]=ct.useState([]),[n,s]=ct.useState(!1),[o,u]=ct.useState(null),[f,m]=ct.useState(!1),[y,g]=ct.useState(null),T=ct.useCallback(()=>new Promise((V,z)=>{if(window.google?.accounts){V();return}const F=document.createElement("script");F.src="https://accounts.google.com/gsi/client",F.onload=()=>{const U=document.createElement("script");U.src="https://apis.google.com/js/api.js",U.onload=()=>{window.gapi.load("client",{callback:V,onerror:z})},U.onerror=z,document.head.appendChild(U)},F.onerror=z,document.head.appendChild(F)}),[]),S=ct.useCallback(async()=>{try{return await T(),new Promise(V=>{window.google.accounts.oauth2.initTokenClient({client_id:"699151675972-8ur3v19ta7aq7ss11o41lrl4hfn0ab3i.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/calendar.readonly",callback:F=>{if(F.error){console.error("OAuth error:",F),u("Failed to authenticate with Google Calendar"),V(!1);return}g(F.access_token),m(!0),V(!0)}}).requestAccessToken({prompt:"consent"})})}catch(V){return console.error("Calendar permission error:",V),u("Failed to get calendar permission. Please check your Google API configuration."),!1}},[T]),A=ct.useCallback(async()=>{if(!((!f||!y)&&!await S())){s(!0),u(null);try{const V=new Date().toISOString(),z=new Date(Date.now()+720*60*60*1e3).toISOString(),F=new URL("https://www.googleapis.com/calendar/v3/calendars/primary/events");F.searchParams.append("timeMin",V),F.searchParams.append("timeMax",z),F.searchParams.append("singleEvents","true"),F.searchParams.append("orderBy","startTime"),F.searchParams.append("maxResults","50"),F.searchParams.append("key","AIzaSyB1eVbZ6VOZDU26V3wBWSZ-ecuLKM_mzpY"),console.log("Making Calendar API request to:",F.toString()),console.log("Using API Key:","AIzaSyB1eVbZ6VOZDU26V3wBWSZ-ecuLKM_mzpY".substring(0,10)+"..."),console.log("Using Access Token:",y?.substring(0,10)+"...");const U=await fetch(F.toString(),{headers:{Authorization:`Bearer ${y}`}});if(console.log("API Response Status:",U.status),!U.ok){const nt=await U.json().catch(()=>({}));throw console.error("Calendar API response:",nt),U.status===403?nt.error?.message?.includes("Calendar API has not been used")?new Error("Google Calendar API is not enabled. Please enable it in Google Cloud Console."):nt.error?.message?.includes("insufficient")?new Error("Insufficient permissions. Please grant calendar access."):new Error(`Calendar API access denied: ${nt.error?.message||"Check your API key and OAuth setup"}`):new Error(`Calendar API error: ${U.status} ${U.statusText}`)}const et=(await U.json()).items||[];t(et),u(null)}catch(V){console.error("Error loading calendar events:",V);const z=V instanceof Error?V.message:"Failed to load calendar events";u(`${z}. Using demo data instead.`);const F=[{id:"demo-1",summary:"Demo: Team Meeting",start:{dateTime:new Date().toISOString()},end:{dateTime:new Date(Date.now()+36e5).toISOString()},location:"Conference Room A"},{id:"demo-2",summary:"Demo: Lunch Meeting",start:{dateTime:new Date(Date.now()+864e5).toISOString()},end:{dateTime:new Date(Date.now()+864e5+36e5).toISOString()},location:"Restaurant"}];t(F)}finally{s(!1)}}},[f,y,S]);return{events:r,loading:n,error:o,hasPermission:f,requestPermission:S,loadEvents:A}},TO=()=>{const{events:r,loading:t,error:n,loadEvents:s,hasPermission:o,requestPermission:u}=vO();ct.useEffect(()=>{o&&s()},[o,s]);const f=T=>new Date(T).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:T.includes("T")?"numeric":void 0,minute:T.includes("T")?"2-digit":void 0}),m=T=>T.start.dateTime||T.start.date||"",y=r.filter(T=>{const S=m(T);if(!S)return!1;const A=new Date().toDateString(),V=new Date(S).toDateString();return A===V}),g=r.filter(T=>{const S=m(T);if(!S)return!1;const A=new Date;return new Date(S)>A}).slice(0,5);return o?t?x.jsx("div",{style:{padding:"16px",textAlign:"center",color:st.text},children:"Loading calendar events..."}):n?x.jsxs("div",{style:{padding:"16px"},children:[x.jsx("div",{style:{color:"red",marginBottom:"12px",fontSize:"11px"},children:"⚠️ Calendar Setup Required"}),x.jsx("div",{style:{color:st.text,fontSize:"10px",marginBottom:"12px",lineHeight:"1.4"},children:n}),n.includes("API is not enabled")&&x.jsxs("div",{style:{background:st.textLight,border:`1px solid ${st.borderDark}`,padding:"8px",fontSize:"10px",marginBottom:"12px",lineHeight:"1.3"},children:[x.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Setup Steps:"}),x.jsx("div",{children:"1. Go to Google Cloud Console"}),x.jsx("div",{children:"2. Enable Google Calendar API"}),x.jsx("div",{children:"3. Create OAuth credentials"}),x.jsx("div",{children:"4. Add your domain to authorized origins"})]}),x.jsx(le,{onClick:u,style:{fontSize:"10px"},children:"🔄 Try Again"})]}):x.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",color:"#000000",fontFamily:"'Pixelify Sans', monospace"},children:[x.jsxs("div",{style:{padding:"8px",borderBottom:`1px solid ${st.borderDark}`,background:st.windowHeader,fontWeight:"bold",fontSize:"12px",color:"#000000",fontFamily:"'Pixelify Sans', monospace"},children:["📅 ",new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),x.jsxs("div",{style:{flex:1,overflow:"auto"},children:[y.length>0&&x.jsxs("div",{style:{padding:"8px"},children:[x.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px",fontSize:"11px",color:"#000000",fontFamily:"'Jacquard 12', monospace"},children:"Today's Events:"}),y.map(T=>x.jsxs("div",{style:{border:`1px solid ${st.borderDark}`,borderColor:`${st.borderLight} ${st.borderDark} ${st.borderDark} ${st.borderLight}`,padding:"6px",marginBottom:"4px",background:"#ffffff",fontSize:"11px",fontFamily:"'Pixelify Sans', monospace"},children:[x.jsx("div",{style:{fontWeight:"bold",marginBottom:"2px"},children:T.summary}),x.jsx("div",{style:{color:"#666",fontSize:"10px"},children:f(m(T))}),T.location&&x.jsxs("div",{style:{color:"#555",fontSize:"10px",marginTop:"2px"},children:["📍 ",T.location]})]},T.id))]}),g.length>0&&x.jsxs("div",{style:{padding:"8px"},children:[x.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px",fontSize:"11px",color:"#000000",fontFamily:"'Jacquard 12', monospace"},children:"Upcoming Events:"}),g.map(T=>x.jsxs("div",{style:{border:`1px solid ${st.borderDark}`,borderColor:`${st.borderDark} ${st.borderLight} ${st.borderLight} ${st.borderDark}`,padding:"6px",marginBottom:"4px",background:st.windowBg,fontSize:"11px"},children:[x.jsx("div",{style:{fontWeight:"bold",marginBottom:"2px"},children:T.summary}),x.jsx("div",{style:{color:"#666",fontSize:"10px"},children:f(m(T))}),T.location&&x.jsxs("div",{style:{color:"#555",fontSize:"10px",marginTop:"2px"},children:["📍 ",T.location]})]},T.id))]}),y.length===0&&g.length===0&&x.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666",fontSize:"11px"},children:"No upcoming events found"})]}),x.jsx("div",{style:{padding:"8px",borderTop:`1px solid ${st.borderDark}`,textAlign:"center"},children:x.jsx(le,{onClick:s,style:{fontSize:"11px"},children:"🔄 Refresh"})})]}):x.jsxs("div",{style:{padding:"16px",textAlign:"center"},children:[x.jsx("div",{style:{marginBottom:"16px",color:st.text},children:"Calendar access required to view your events"}),x.jsx(le,{onClick:u,children:"📅 Grant Calendar Access"})]})},EO=(r,t={})=>{const{maxWidth:n=800,maxHeight:s=600,quality:o=.8,format:u="webp"}=t;return new Promise((f,m)=>{const y=document.createElement("canvas"),g=y.getContext("2d"),T=new Image;T.onload=()=>{let{width:S,height:A}=T;S>n&&(A=A*n/S,S=n),A>s&&(S=S*s/A,A=s),y.width=S,y.height=A,g?(g.drawImage(T,0,0,S,A),y.toBlob(V=>{V?f(V):m(new Error("Failed to compress image"))},`image/${u}`,o)):m(new Error("Failed to get canvas context"))},T.onerror=()=>m(new Error("Failed to load image")),T.src=URL.createObjectURL(r)})},bO=(r,t="webp")=>`${r.replace(/\.[^/.]+$/,"")}.${t}`,SO=()=>{const[r,t]=ct.useState([]),[n,s]=ct.useState(!1),[o,u]=ct.useState(null),f=ct.useCallback(async()=>{const z=yi.currentUser;if(z){s(!0),u(null);try{const F=eo(bn,"users",z.uid,"desktopImages"),U=await Fm(F),tt=[];U.forEach(et=>{tt.push({id:et.id,...et.data()})}),t(tt)}catch(F){console.error("Error loading desktop images:",F),u(`Failed to load images: ${F.message}`)}finally{s(!1)}}},[]),m=ct.useCallback(async(z,F)=>{const U=yi.currentUser;if(!U){u("User not authenticated");return}if(!z.type.startsWith("image/")){u("Please select an image file");return}if(z.size>50*1024*1024){u("Image file too large (max 50MB)");return}s(!0),u(null);try{console.log(`Original file size: ${(z.size/1024/1024).toFixed(2)}MB`);const tt=await EO(z,{maxWidth:1200,maxHeight:900,quality:.8,format:"webp"});console.log(`Compressed size: ${(tt.size/1024/1024).toFixed(2)}MB`),console.log(`Compression ratio: ${((z.size-tt.size)/z.size*100).toFixed(1)}%`);const et=Date.now(),nt=bO(z.name,"webp"),yt=`desktopImages/${U.uid}/${et}-${nt}`,ft=Z0(J0,yt),_t=await qD(ft,tt),k=await HD(_t.ref),w={width:200,height:150},I={name:z.name,compressedName:nt,url:k,position:F,size:w,uploadedAt:new Date().toISOString(),storagePath:yt,originalSize:z.size,compressedSize:tt.size,compressionRatio:((z.size-tt.size)/z.size*100).toFixed(1)},M=eo(bn,"users",U.uid,"desktopImages"),O=await Gm(M,I);t(P=>[...P,{id:O.id,...I}])}catch(tt){console.error("Error adding image:",tt),tt.message?.includes("compress")?u(`Failed to compress image: ${tt.message}`):tt.message?.includes("upload")?u(`Failed to upload image: ${tt.message}`):u(`Failed to add image: ${tt.message}`)}finally{s(!1)}},[]),y=ct.useCallback(async(z,F)=>{const U=yi.currentUser;if(U)try{const tt=Fr(bn,"users",U.uid,"desktopImages",z);await fm(tt,{position:F})}catch(tt){console.error("Error updating image position:",tt),u(`Failed to update position: ${tt.message}`)}},[]),g=ct.useCallback((z,F)=>{t(U=>U.map(tt=>tt.id===z?{...tt,position:F}:tt))},[]),T=ct.useCallback(async(z,F)=>{const U=yi.currentUser;if(U)try{const tt=Fr(bn,"users",U.uid,"desktopImages",z);await fm(tt,{size:F})}catch(tt){console.error("Error updating image size:",tt),u(`Failed to update size: ${tt.message}`)}},[]),S=ct.useCallback((z,F)=>{t(U=>U.map(tt=>tt.id===z?{...tt,size:F}:tt))},[]),A=ct.useCallback(async(z,F)=>{const U=yi.currentUser;if(U)try{const tt=Fr(bn,"users",U.uid,"desktopImages",z);await fm(tt,{aspectRatio:F}),t(et=>et.map(nt=>nt.id===z?{...nt,aspectRatio:F}:nt))}catch(tt){console.error("Error updating image aspect ratio:",tt)}},[]),V=ct.useCallback(async z=>{const F=yi.currentUser;if(F)try{const U=r.find(et=>et.id===z);if(!U)return;const tt=Z0(J0,U.storagePath);await FD(tt),await Rb(Fr(bn,"users",F.uid,"desktopImages",z)),t(et=>et.filter(nt=>nt.id!==z))}catch(U){console.error("Error deleting image:",U),u(`Failed to delete image: ${U.message}`)}},[r]);return ct.useEffect(()=>{const z=yi.onAuthStateChanged(F=>{F?f():t([])});return()=>z()},[f]),{images:r,loading:n,error:o,addImage:m,updateImagePosition:y,updateImagePositionLocal:g,updateImageSize:T,updateImageSizeLocal:S,updateImageAspectRatio:A,deleteImage:V,loadImages:f}},nT=(r,t)=>{let n;return(...s)=>{clearTimeout(n),n=setTimeout(()=>r(...s),t)}},AO=({id:r,src:t,position:n,size:s,storedAspectRatio:o,onPositionChange:u,onPositionChangeLocal:f,onSizeChange:m,onSizeChangeLocal:y,onAspectRatioUpdate:g,onDelete:T})=>{const[S,A]=ct.useState(!1),[V,z]=ct.useState(!1),[F,U]=ct.useState({x:0,y:0}),[tt,et]=ct.useState(!1),[nt,yt]=ct.useState(o||null),ft=ct.useMemo(()=>nT((O,P)=>{u(O,P)},500),[u]),_t=ct.useMemo(()=>nT((O,P)=>{m(O,P)},500),[m]),k=ct.useCallback(O=>{(O.target===O.currentTarget||O.target.tagName==="IMG")&&(O.preventDefault(),A(!0),U({x:O.clientX-n.x,y:O.clientY-n.y}))},[n]),w=ct.useCallback(O=>{if(S){const P={x:O.clientX-F.x,y:O.clientY-F.y};f(r,P),ft(r,P)}},[S,F,r,f,ft]),I=ct.useCallback(()=>{A(!1),z(!1)},[]);to.useEffect(()=>{if(S||V)return document.addEventListener("mousemove",w),document.addEventListener("mouseup",I),()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",I)}},[S,V,w,I]);const M=ct.useCallback(O=>{O.stopPropagation(),O.preventDefault(),z(!0);const P=O.clientX,C=O.clientY,pe=s.width,ne=s.height,Q=dt=>{const kt=dt.clientX-P,D=dt.clientY-C;let J,ot;if(nt){const pt=Math.sqrt(kt*kt+D*D),Ct=kt+D>0?1:-1,bt=1+pt*Ct/Math.max(pe,ne);J=Math.max(50,pe*bt),ot=Math.max(50/nt,J/nt)}else J=Math.max(50,pe+kt),ot=Math.max(50,ne+D);const it={width:J,height:ot};y(r,it),_t(r,it)},at=()=>{z(!1),document.removeEventListener("mousemove",Q),document.removeEventListener("mouseup",at)};document.addEventListener("mousemove",Q),document.addEventListener("mouseup",at)},[r,s,nt,y,_t]);return x.jsxs("div",{style:{position:"absolute",left:n.x,top:n.y,width:s.width,height:s.height,cursor:S?"grabbing":"grab",zIndex:500,userSelect:"none"},onMouseDown:k,onMouseEnter:()=>et(!0),onMouseLeave:()=>et(!1),children:[x.jsx("img",{src:t,alt:"Desktop image",style:{width:"100%",height:"100%",objectFit:"contain",pointerEvents:"none"},draggable:!1,onLoad:O=>{const P=O.target,C=P.naturalWidth/P.naturalHeight;yt(C),!o&&C&&g(r,C)}}),tt&&x.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",width:"20px",height:"20px",background:"red",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",zIndex:1},onClick:O=>{O.stopPropagation(),T(r)},children:"×"}),tt&&x.jsx("div",{style:{position:"absolute",bottom:"-4px",right:"-4px",width:"12px",height:"12px",background:"#666",cursor:"nw-resize"},onMouseDown:M})]})},wO=()=>{const{images:r,loading:t,error:n,addImage:s,updateImagePosition:o,updateImagePositionLocal:u,updateImageSize:f,updateImageSizeLocal:m,updateImageAspectRatio:y,deleteImage:g}=SO(),[T,S]=ct.useState(!1),A=ct.useCallback(async V=>{V.preventDefault(),V.stopPropagation(),S(!1);const F=Array.from(V.dataTransfer?.files||[]).filter(U=>U.type.startsWith("image/"));for(const U of F){const tt={x:V.clientX-100,y:V.clientY-100};await s(U,tt)}},[s]);return ct.useEffect(()=>{const V=U=>{U.preventDefault(),U.stopPropagation(),S(!0)},z=U=>{U.preventDefault(),U.stopPropagation(),U.relatedTarget||S(!1)},F=U=>{U.preventDefault(),U.stopPropagation(),S(!0)};return document.addEventListener("dragenter",V),document.addEventListener("dragover",F),document.addEventListener("dragleave",z),document.addEventListener("drop",A),()=>{document.removeEventListener("dragenter",V),document.removeEventListener("dragover",F),document.removeEventListener("dragleave",z),document.removeEventListener("drop",A)}},[A]),t?null:x.jsxs(x.Fragment,{children:[T&&x.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 100, 255, 0.1)",border:"3px dashed #0066ff",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none"},children:x.jsx("div",{style:{backgroundColor:"rgba(0, 100, 255, 0.9)",color:"white",padding:"20px 40px",borderRadius:"8px",fontSize:"18px",fontWeight:"bold",fontFamily:"'Jacquard 12', 'MS Sans Serif', monospace"},children:"📸 Drop images here!"})}),r.map(V=>x.jsx(AO,{id:V.id,src:V.url,position:V.position,size:V.size,storedAspectRatio:V.aspectRatio,onPositionChange:o,onPositionChangeLocal:u,onSizeChange:f,onSizeChangeLocal:m,onAspectRatioUpdate:y,onDelete:g},V.id)),t&&x.jsxs("div",{style:{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"12px 20px",borderRadius:"6px",fontSize:"14px",zIndex:10001,fontFamily:"'Jacquard 12', 'MS Sans Serif', monospace",display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid transparent",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"🗜️ Compressing and uploading image..."]}),n&&x.jsxs("div",{style:{position:"fixed",top:"10px",right:"10px",background:"red",color:"white",padding:"8px 12px",borderRadius:"4px",fontSize:"12px",zIndex:1e3,maxWidth:"300px"},children:["⚠️ ",n]})]})},gm=({children:r,style:t="raised",size:n=2,className:s="",customStyle:o={},onClick:u})=>{const f=()=>{const m="#ffffff",y="#c0c0c0",g="#808080",T="#000000";switch(t){case"raised":return{borderStyle:"solid",borderWidth:`${n}px`,borderTopColor:m,borderLeftColor:m,borderRightColor:n>1?T:g,borderBottomColor:n>1?T:g,backgroundColor:y};case"inset":return{borderStyle:"solid",borderWidth:`${n}px`,borderTopColor:n>1?T:g,borderLeftColor:n>1?T:g,borderRightColor:m,borderBottomColor:m,backgroundColor:y};case"flat":return{borderStyle:"solid",borderWidth:`${n}px`,borderColor:g,backgroundColor:y};default:return{}}};return x.jsx("div",{className:s,onClick:u,style:{...f(),...o},children:r})},ym=({children:r,borderStyle:t="raised",borderWidth:n=2,cornerRadius:s=0,className:o="",style:u={},onClick:f})=>{const m={light:"#ffffff",medium:"#c0c0c0",dark:"#808080",black:"#000000"},g=(()=>{switch(t){case"raised":return{top:m.light,left:m.light,right:m.black,bottom:m.black,topInner:n>1?m.medium:m.light,leftInner:n>1?m.medium:m.light,rightInner:n>1?m.dark:m.black,bottomInner:n>1?m.dark:m.black};case"inset":return{top:m.black,left:m.black,right:m.light,bottom:m.light,topInner:n>1?m.dark:m.black,leftInner:n>1?m.dark:m.black,rightInner:n>1?m.medium:m.light,bottomInner:n>1?m.medium:m.light};case"flat":return{top:m.dark,left:m.dark,right:m.dark,bottom:m.dark,topInner:m.dark,leftInner:m.dark,rightInner:m.dark,bottomInner:m.dark};default:return{top:m.medium,left:m.medium,right:m.medium,bottom:m.medium,topInner:m.medium,leftInner:m.medium,rightInner:m.medium,bottomInner:m.medium}}})();return n>2?x.jsxs("div",{className:o,onClick:f,style:{position:"relative",backgroundColor:m.medium,...u},children:[x.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,borderStyle:"solid",borderWidth:"1px",borderTopColor:g.top,borderLeftColor:g.left,borderRightColor:g.right,borderBottomColor:g.bottom,borderRadius:s}}),x.jsx("div",{style:{position:"absolute",top:"1px",left:"1px",right:"1px",bottom:"1px",borderStyle:"solid",borderWidth:`${n-1}px`,borderTopColor:g.topInner,borderLeftColor:g.leftInner,borderRightColor:g.rightInner,borderBottomColor:g.bottomInner,borderRadius:Math.max(0,s-1)}}),x.jsx("div",{style:{position:"relative",margin:`${n}px`,zIndex:1},children:r})]}):x.jsx("div",{className:o,onClick:f,style:{borderStyle:"solid",borderWidth:`${n}px`,borderTopColor:g.top,borderLeftColor:g.left,borderRightColor:g.right,borderBottomColor:g.bottom,backgroundColor:m.medium,borderRadius:s,...u},children:r})},Yn=({children:r,borderStyle:t="raised",className:n="",style:s={},onClick:o,disabled:u=!1})=>{const f={light:"#ffffff",medium:"#c0c0c0",dark:"#808080",black:"#000000"},y=(()=>{switch(t){case"raised":return{outerTop:f.light,outerLeft:f.light,outerRight:f.black,outerBottom:f.black,innerTop:f.medium,innerLeft:f.medium,innerRight:f.dark,innerBottom:f.dark,background:f.medium,borderWidth:2};case"inset":return{outerTop:f.black,outerLeft:f.black,outerRight:f.light,outerBottom:f.light,innerTop:f.dark,innerLeft:f.dark,innerRight:f.medium,innerBottom:f.medium,background:f.medium,borderWidth:2};case"window":return{outerTop:f.light,outerLeft:f.light,outerRight:f.black,outerBottom:f.black,innerTop:f.medium,innerLeft:f.medium,innerRight:f.dark,innerBottom:f.dark,background:f.medium,borderWidth:2};case"button":return{outerTop:u?f.dark:f.light,outerLeft:u?f.dark:f.light,outerRight:u?f.light:f.black,outerBottom:u?f.light:f.black,innerTop:f.medium,innerLeft:f.medium,innerRight:u?f.medium:f.dark,innerBottom:u?f.medium:f.dark,background:f.medium,borderWidth:2};case"textbox":return{outerTop:f.black,outerLeft:f.black,outerRight:f.light,outerBottom:f.light,innerTop:f.dark,innerLeft:f.dark,innerRight:f.medium,innerBottom:f.medium,background:f.light,borderWidth:2};default:return{outerTop:f.medium,outerLeft:f.medium,outerRight:f.medium,outerBottom:f.medium,innerTop:f.medium,innerLeft:f.medium,innerRight:f.medium,innerBottom:f.medium,background:f.medium,borderWidth:1}}})(),g={position:"relative",display:"inline-block",minWidth:y.borderWidth*4,minHeight:y.borderWidth*4,cursor:o?"pointer":void 0,...s},T={position:"absolute",top:0,left:0,right:0,bottom:0,borderStyle:"solid",borderWidth:"1px",borderTopColor:y.outerTop,borderLeftColor:y.outerLeft,borderRightColor:y.outerRight,borderBottomColor:y.outerBottom,backgroundColor:y.background},S=y.borderWidth>1?{position:"absolute",top:"1px",left:"1px",right:"1px",bottom:"1px",borderStyle:"solid",borderWidth:"1px",borderTopColor:y.innerTop,borderLeftColor:y.innerLeft,borderRightColor:y.innerRight,borderBottomColor:y.innerBottom}:{},A={position:"relative",padding:t==="textbox"?"2px 4px":"4px",margin:`${y.borderWidth}px`,zIndex:1,fontFamily:"'Pixelify Sans', monospace",fontSize:"11px",color:t==="textbox"?f.black:void 0};return x.jsxs("div",{className:n,onClick:o,style:g,children:[x.jsx("div",{style:T}),y.borderWidth>1&&x.jsx("div",{style:S}),x.jsx("div",{style:A,children:r})]})},qc=({children:r,borderStyle:t="raised",cornerStyle:n="gothic",className:s="",style:o={},onClick:u,disabled:f=!1})=>{const m={light:"#ffffff",medium:"#c0c0c0",dark:"#808080",black:"#000000",gold:"#ffd700",bronze:"#cd7f32"},y=()=>{switch(t){case"raised":return{outerTop:m.light,outerLeft:m.light,outerRight:m.black,outerBottom:m.black,innerTop:m.medium,innerLeft:m.medium,innerRight:m.dark,innerBottom:m.dark,background:m.medium};case"inset":return{outerTop:m.black,outerLeft:m.black,outerRight:m.light,outerBottom:m.light,innerTop:m.dark,innerLeft:m.dark,innerRight:m.medium,innerBottom:m.medium,background:m.medium};case"ornate":return{outerTop:m.gold,outerLeft:m.gold,outerRight:m.bronze,outerBottom:m.bronze,innerTop:m.light,innerLeft:m.light,innerRight:m.dark,innerBottom:m.dark,background:m.medium};default:return{outerTop:m.light,outerLeft:m.light,outerRight:m.black,outerBottom:m.black,innerTop:m.medium,innerLeft:m.medium,innerRight:m.dark,innerBottom:m.dark,background:m.medium}}},g=F=>{const U={position:"absolute",width:"16px",height:"16px",fontSize:"10px",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"'Jacquard 12', monospace",fontWeight:"bold",zIndex:10,textShadow:"1px 1px 0px rgba(0,0,0,0.3)"},tt={topLeft:{top:"-2px",left:"-2px"},topRight:{top:"-2px",right:"-2px"},bottomLeft:{bottom:"-2px",left:"-2px"},bottomRight:{bottom:"-2px",right:"-2px"}};let et="",nt=m.gold;switch(n){case"gothic":et=["⚜","❋","✠","◊"][["topLeft","topRight","bottomLeft","bottomRight"].indexOf(F)],nt=t==="ornate"?m.gold:m.dark;break;case"carved":et=["◢","◣","◥","◤"][["topLeft","topRight","bottomLeft","bottomRight"].indexOf(F)],nt=m.dark;break;case"jeweled":et=["◆","◇","♦","❖"][["topLeft","topRight","bottomLeft","bottomRight"].indexOf(F)],nt=t==="ornate"?m.gold:m.bronze;break;case"scrollwork":et=["❦","❧","❦","❧"][["topLeft","topRight","bottomLeft","bottomRight"].indexOf(F)],nt=m.bronze;break;default:et="●",nt=m.dark;break}return x.jsx("div",{style:{...U,...tt[F],color:nt,background:t==="ornate"?`radial-gradient(circle, ${m.light} 0%, ${m.medium} 100%)`:m.medium,borderRadius:"50%",border:`1px solid ${m.dark}`},children:et})},T=y(),S={position:"relative",display:"inline-block",minWidth:"40px",minHeight:"40px",cursor:u?"pointer":void 0,...o},A={position:"absolute",top:0,left:0,right:0,bottom:0,borderStyle:"solid",borderWidth:"2px",borderTopColor:T.outerTop,borderLeftColor:T.outerLeft,borderRightColor:T.outerRight,borderBottomColor:T.outerBottom,backgroundColor:T.background},V={position:"absolute",top:"2px",left:"2px",right:"2px",bottom:"2px",borderStyle:"solid",borderWidth:"1px",borderTopColor:T.innerTop,borderLeftColor:T.innerLeft,borderRightColor:T.innerRight,borderBottomColor:T.innerBottom},z={position:"relative",padding:"8px 12px",margin:"6px",zIndex:1,fontFamily:"'Pixelify Sans', monospace",fontSize:"11px"};return x.jsxs("div",{className:s,onClick:f?void 0:u,style:{...S,opacity:f?.6:1,cursor:f?"not-allowed":u?"pointer":"default"},children:[x.jsx("div",{style:A}),x.jsx("div",{style:V}),g("topLeft"),g("topRight"),g("bottomLeft"),g("bottomRight"),x.jsx("div",{style:z,children:r})]})},Hc=({children:r,theme:t="medieval",size:n="medium",ornamentLevel:s="decorative",className:o="",style:u={},onClick:f})=>{const m={medieval:{primary:"#8B4513",secondary:"#DAA520",accent:"#CD853F",light:"#F5DEB3",dark:"#654321"},gothic:{primary:"#2F2F2F",secondary:"#FFD700",accent:"#8B0000",light:"#D3D3D3",dark:"#000000"},renaissance:{primary:"#B8860B",secondary:"#FF6347",accent:"#4169E1",light:"#FFFACD",dark:"#8B4513"},celtic:{primary:"#228B22",secondary:"#FFD700",accent:"#4169E1",light:"#F0FFF0",dark:"#006400"}},y={small:{border:8,corner:12,font:"8px"},medium:{border:12,corner:16,font:"10px"},large:{border:16,corner:20,font:"12px"}},g=m[t],T=y[n],S=tt=>{const et={minimal:{tl:"◢",tr:"◣",bl:"◥",br:"◤"},decorative:{tl:"❈",tr:"❋",bl:"❦",br:"❧"},elaborate:{tl:"⚜",tr:"❃",bl:"✠",br:"◊"}},nt={tl:{top:"-4px",left:"-4px"},tr:{top:"-4px",right:"-4px"},bl:{bottom:"-4px",left:"-4px"},br:{bottom:"-4px",right:"-4px"}};return x.jsx("div",{style:{position:"absolute",...nt[tt],width:`${T.corner}px`,height:`${T.corner}px`,background:`radial-gradient(circle, ${g.secondary} 0%, ${g.primary} 70%, ${g.dark} 100%)`,border:`2px solid ${g.dark}`,borderRadius:s==="elaborate"?"50%":"20%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:T.font,color:g.light,fontFamily:"'Jacquard 12', monospace",fontWeight:"bold",textShadow:`1px 1px 0px ${g.dark}`,boxShadow:`inset 1px 1px 0px ${g.light}, inset -1px -1px 0px ${g.dark}`,zIndex:10},children:et[s][tt]})},A=tt=>{const et={top:{position:"absolute",top:"0px",left:"50%",transform:"translateX(-50%)",width:"60%",height:"4px",background:`linear-gradient(90deg, transparent 0%, ${g.secondary} 20%, ${g.primary} 50%, ${g.secondary} 80%, transparent 100%)`,borderRadius:"2px"},bottom:{position:"absolute",bottom:"0px",left:"50%",transform:"translateX(-50%)",width:"60%",height:"4px",background:`linear-gradient(90deg, transparent 0%, ${g.secondary} 20%, ${g.primary} 50%, ${g.secondary} 80%, transparent 100%)`,borderRadius:"2px"},left:{position:"absolute",left:"0px",top:"50%",transform:"translateY(-50%)",width:"4px",height:"60%",background:`linear-gradient(180deg, transparent 0%, ${g.secondary} 20%, ${g.primary} 50%, ${g.secondary} 80%, transparent 100%)`,borderRadius:"2px"},right:{position:"absolute",right:"0px",top:"50%",transform:"translateY(-50%)",width:"4px",height:"60%",background:`linear-gradient(180deg, transparent 0%, ${g.secondary} 20%, ${g.primary} 50%, ${g.secondary} 80%, transparent 100%)`,borderRadius:"2px"}};return x.jsx("div",{style:et[tt]})},V={position:"relative",display:"inline-block",minWidth:`${T.border*4}px`,minHeight:`${T.border*4}px`,cursor:f?"pointer":void 0,...u},z={position:"absolute",top:0,left:0,right:0,bottom:0,background:`linear-gradient(135deg, ${g.light} 0%, ${g.primary} 50%, ${g.dark} 100%)`,border:`3px solid ${g.dark}`,borderRadius:"4px"},F={position:"absolute",top:"6px",left:"6px",right:"6px",bottom:"6px",background:"#c0c0c0",border:"2px solid",borderColor:"#ffffff #808080 #808080 #ffffff",borderRadius:"2px"},U={position:"relative",padding:`${T.border}px`,margin:`${T.border+4}px`,zIndex:1,fontFamily:"'Pixelify Sans', monospace",fontSize:"11px"};return x.jsxs("div",{className:o,onClick:f,style:V,children:[x.jsx("div",{style:z}),x.jsx("div",{style:F}),s==="elaborate"&&x.jsxs(x.Fragment,{children:[A("top"),A("right"),A("bottom"),A("left")]}),S("tl"),S("tr"),S("bl"),S("br"),x.jsx("div",{style:U,children:r})]})},Fc=({style:r="fleurDeLis",size:t=16,color:n="#DAA520",position:s})=>{const o=()=>{switch(r){case"fleurDeLis":return"⚜";case"celtic":return"❋";case"gothic":return"✠";case"baroque":return"❦";case"runes":return"ᚱ";default:return"◆"}},u=()=>{const f=-t/2;switch(s){case"topLeft":return{top:f,left:f};case"topRight":return{top:f,right:f};case"bottomLeft":return{bottom:f,left:f};case"bottomRight":return{bottom:f,right:f}}};return x.jsx("div",{style:{position:"absolute",width:t,height:t,...u(),background:`radial-gradient(circle, ${n} 0%, #8B4513 70%, #654321 100%)`,border:"2px solid #654321",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:`${t*.6}px`,color:"#F5DEB3",fontFamily:"'Jacquard 12', monospace",fontWeight:"bold",textShadow:"1px 1px 0px #654321",boxShadow:"inset 1px 1px 0px rgba(245, 222, 179, 0.5), inset -1px -1px 0px rgba(101, 67, 33, 0.8)",zIndex:10},children:o()})},Gc=({children:r,cornerStyle:t="fleurDeLis",cornerSize:n=16,cornerColor:s="#DAA520",showCorners:o=[!0,!0,!0,!0],className:u="",style:f={}})=>x.jsxs("div",{className:u,style:{position:"relative",display:"inline-block",...f},children:[r,o[0]&&x.jsx(Fc,{style:t,size:n,color:s,position:"topLeft"}),o[1]&&x.jsx(Fc,{style:t,size:n,color:s,position:"topRight"}),o[2]&&x.jsx(Fc,{style:t,size:n,color:s,position:"bottomLeft"}),o[3]&&x.jsx(Fc,{style:t,size:n,color:s,position:"bottomRight"})]}),RO=()=>{const[r,t]=ct.useState(null);return x.jsxs("div",{style:{padding:"20px",fontFamily:"'Pixelify Sans', monospace",fontSize:"11px",display:"flex",flexDirection:"column",gap:"20px"},children:[x.jsx("h2",{style:{fontFamily:"'Jacquard 12', monospace",fontSize:"14px"},children:"Windows 95 UI Kit Demo"}),x.jsxs("div",{children:[x.jsx("h3",{style:{marginBottom:"10px"},children:"BorderBox Components:"}),x.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[x.jsx(gm,{style:"raised",size:2,customStyle:{padding:"8px",minWidth:"100px"},children:"Raised Border"}),x.jsx(gm,{style:"inset",size:2,customStyle:{padding:"8px",minWidth:"100px"},children:"Inset Border"}),x.jsx(gm,{style:"flat",size:1,customStyle:{padding:"8px",minWidth:"100px"},children:"Flat Border"})]})]}),x.jsxs("div",{children:[x.jsx("h3",{style:{marginBottom:"10px"},children:"ScalableBorder Components:"}),x.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[x.jsx(ym,{borderStyle:"raised",borderWidth:3,style:{padding:"12px",minWidth:"120px"},children:"Thick Raised Border"}),x.jsx(ym,{borderStyle:"inset",borderWidth:4,style:{padding:"12px",minWidth:"120px"},children:"Very Thick Inset"}),x.jsx(ym,{borderStyle:"raised",borderWidth:2,cornerRadius:4,style:{padding:"12px",minWidth:"120px"},children:"Rounded Corners"})]})]}),x.jsxs("div",{children:[x.jsx("h3",{style:{marginBottom:"10px"},children:"NineSliceBorder Components:"}),x.jsx(Yn,{borderStyle:"window",style:{width:"300px",height:"200px",marginBottom:"10px"},children:x.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[x.jsx("div",{style:{backgroundColor:"#008080",color:"white",padding:"2px 4px",marginBottom:"4px",fontWeight:"bold"},children:"Window Title Bar"}),x.jsx("div",{style:{flex:1,overflow:"auto"},children:"This is a resizable window content area. It maintains proper borders at any size."})]})}),x.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",marginBottom:"10px"},children:[x.jsx(Yn,{borderStyle:"button",onClick:()=>t("btn1"),style:{minWidth:"80px"},children:"Normal Button"}),x.jsx(Yn,{borderStyle:"button",disabled:!0,style:{minWidth:"80px"},children:"Disabled Button"}),x.jsx(Yn,{borderStyle:r==="btn3"?"inset":"button",onClick:()=>t(r==="btn3"?null:"btn3"),style:{minWidth:"80px"},children:"Toggle Button"})]}),x.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[x.jsx(Yn,{borderStyle:"textbox",style:{minWidth:"150px"},children:x.jsx("input",{type:"text",placeholder:"Text input...",style:{border:"none",outline:"none",background:"transparent",fontFamily:"'Pixelify Sans', monospace",fontSize:"11px",width:"100%"}})}),x.jsx(Yn,{borderStyle:"textbox",style:{minWidth:"200px",height:"60px"},children:x.jsx("textarea",{placeholder:"Multi-line text...",style:{border:"none",outline:"none",background:"transparent",fontFamily:"'Pixelify Sans', monospace",fontSize:"11px",width:"100%",height:"100%",resize:"none"}})})]})]}),x.jsxs("div",{children:[x.jsx("h3",{style:{marginBottom:"10px"},children:"Resizable Demo:"}),x.jsx(Yn,{borderStyle:"window",style:{resize:"both",overflow:"auto",minWidth:"200px",minHeight:"100px",width:"250px",height:"150px"},children:x.jsx("div",{children:"Try resizing this window by dragging the bottom-right corner. The borders will scale properly at any size!"})})]}),x.jsxs("div",{children:[x.jsx("h3",{style:{marginBottom:"10px"},children:"Medieval Ornamental Borders:"}),x.jsxs("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap",marginBottom:"15px"},children:[x.jsx(qc,{cornerStyle:"gothic",borderStyle:"raised",children:"Gothic Corners"}),x.jsx(qc,{cornerStyle:"jeweled",borderStyle:"ornate",children:"Jeweled Ornate"}),x.jsx(qc,{cornerStyle:"scrollwork",borderStyle:"raised",children:"Scrollwork Design"}),x.jsx(qc,{cornerStyle:"carved",borderStyle:"inset",children:"Carved Style"})]}),x.jsxs("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap",marginBottom:"15px"},children:[x.jsx(Hc,{theme:"medieval",ornamentLevel:"elaborate",size:"medium",children:"Medieval Theme"}),x.jsx(Hc,{theme:"gothic",ornamentLevel:"decorative",size:"medium",children:"Gothic Theme"}),x.jsx(Hc,{theme:"renaissance",ornamentLevel:"elaborate",size:"large",children:"Renaissance"}),x.jsx(Hc,{theme:"celtic",ornamentLevel:"decorative",size:"medium",children:"Celtic Design"})]}),x.jsxs("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap"},children:[x.jsx(Gc,{cornerStyle:"fleurDeLis",cornerSize:20,children:x.jsx(Yn,{borderStyle:"window",style:{padding:"10px",minWidth:"120px"},children:"Fleur-de-Lis Corners"})}),x.jsx(Gc,{cornerStyle:"celtic",cornerSize:18,cornerColor:"#228B22",children:x.jsx(Yn,{borderStyle:"raised",style:{padding:"10px",minWidth:"120px"},children:"Celtic Corners"})}),x.jsx(Gc,{cornerStyle:"runes",cornerSize:16,cornerColor:"#8B0000",children:x.jsx(Yn,{borderStyle:"button",style:{padding:"10px",minWidth:"120px"},children:"Runic Corners"})})]})]}),x.jsxs("div",{children:[x.jsx("h3",{style:{marginBottom:"10px"},children:"Mixed Styles - Medieval Windows:"}),x.jsx(Gc,{cornerStyle:"gothic",cornerSize:24,cornerColor:"#FFD700",children:x.jsx(Yn,{borderStyle:"window",style:{width:"400px",height:"250px",resize:"both",overflow:"auto"},children:x.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[x.jsx("div",{style:{backgroundColor:"#8B4513",color:"#F5DEB3",padding:"4px 8px",marginBottom:"8px",fontWeight:"bold",fontFamily:"'Jacquard 12', monospace"},children:"⚔️ Medieval Window ⚔️"}),x.jsxs("div",{style:{flex:1,overflow:"auto"},children:["This window combines Windows 95 functionality with medieval aesthetics. The ornate corners add character while maintaining the practical resizable interface.",x.jsx("br",{}),x.jsx("br",{}),"Try resizing this window to see how the ornamental corners stay perfectly positioned!"]})]})})})]})]})},IO=()=>{const r=async()=>{try{await gR(yi,Fb)}catch(t){console.error("Authentication failed:",t)}};return x.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:st.desktop},children:x.jsxs("div",{style:{background:st.windowBg,padding:"40px",border:"2px solid",borderColor:`${st.borderLight} ${st.borderDark} ${st.borderDark} ${st.borderLight}`,textAlign:"center",fontFamily:"'Pixelify Sans', monospace"},children:[x.jsx("h1",{style:{margin:"0 0 20px 0",color:"#000000",fontSize:"16px",fontFamily:"'Jacquard 12', monospace"},children:"Dashboard Login"}),x.jsx("p",{style:{margin:"0 0 30px 0",color:"#000000",fontFamily:"'Pixelify Sans', monospace"},children:"Please sign in to continue"}),x.jsx(le,{onClick:r,children:"Sign In with Google"})]})})},CO={search:tO,rss:aO,notes:pO,ai:gO,bookmarks:_O,calendar:TO,uidemo:RO};function xO(){const[r,t]=ct.useState(new Date().toLocaleTimeString()),[n,s]=ct.useState(null),[o,u]=ct.useState(!0),{windows:f,activeWindow:m,addWindow:y,removeWindow:g,updateWindowPosition:T,updateWindowSize:S,focusWindow:A,saveLayout:V,loadLayout:z,clearAll:F,setUserId:U}=Wp();ct.useEffect(()=>{const et=Kw(yi,nt=>{s(nt),U(nt?.uid||null),u(!1),nt&&z()});return()=>et()},[z,U]),ct.useEffect(()=>{const et=setInterval(()=>{t(new Date().toLocaleTimeString())},1e3);return()=>clearInterval(et)},[]);const tt=async()=>{await Xw(yi)};return o?x.jsx("div",{style:{background:st.desktop,height:"100vh",color:"#000000",display:"flex",justifyContent:"center",alignItems:"center",fontFamily:"'Pixelify Sans', monospace"},children:"Loading..."}):n?x.jsxs("div",{style:{minHeight:"100vh",background:st.desktop,fontFamily:"'Pixelify Sans', monospace",position:"relative",overflow:"hidden"},children:[f.map(et=>{const nt=CO[et.type];return x.jsx("div",{onClick:()=>A(et.id),children:x.jsx(WD,{id:et.id,title:et.title,position:et.position,size:et.size,onPositionChange:T,onSizeChange:S,onClose:()=>g(et.id),zIndex:m===et.id?1e3:100,children:x.jsx(nt,{})})},et.id)}),x.jsx(wO,{}),x.jsx(JD,{windows:f,activeWindow:m,onAddWindow:y,onFocusWindow:A,onSaveLayout:V,onClearAll:F,onLogout:tt,currentTime:r})]}):x.jsx(IO,{})}RA.createRoot(document.getElementById("root")).render(x.jsx(to.StrictMode,{children:x.jsx(xO,{})}));
